'use strict';var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if("object"!=(void 0===console?'undefined':_typeof(console)))var console={info:function(e){window.status=e}};var runTime={remainTimer:0,waitOpenTimer:0,getLastOpenTimer:0,scollTopIntervalTimer:0,traceRemainTimer:0,traceWaitOpenTimer:0,buyTodayTimer:0,clearAll:function(){clearInterval(runTime.remainTimer),clearInterval(runTime.waitOpenTimer),clearInterval(runTime.getLastOpenTimer),clearInterval(runTime.scollTopIntervalTimer),clearInterval(runTime.traceRemainTimer),clearInterval(runTime.traceWaitOpenTimer),clearInterval(runTime.buyTodayTimer)}};!function(e){e.init=function(t){function a(t){if(t.code){for(var a="",l="",n=0;n<t.code.length;n++)a+="<b>"+t.code[n]+"</b>",l+=t.code[n];e("#todayIssuesBody").prepend('<ul class="fix"><li>'+t.issue+'</li><li>'+a+'</li></ul>')}}function l(e){var t=e>0?{day:Math.floor(e/86400),hour:Math.floor(e%86400/3600),minute:Math.floor(e%3600/60),second:Math.floor(e%60)}:{day:0,hour:0,minute:0,second:0};return 1==(t.hour+"").length&&(t.hour="0"+t.hour),1==(t.minute+"").length&&(t.minute="0"+t.minute),1==(t.second+"").length&&(t.second="0"+t.second),t}function n(t){var a=1,l=0;return e.each(t,function(e,t){l+=t.length,0==t.length&&(a=0)}),{flag:a,charsNum:l}}var i=e.extend({counter:0,lotteryId:1,lotteryName:'CQSSC',lotteryType:1,property_id:1,methods:[],maxCombPrize:0,openedIssues:[],minRebateGaps:[{from:0,to:.12,gap:.005},{from:.12,to:.125,gap:.001}],rebate:.123,defaultMode:1,defaultRebate:.123,missHot:{miss:[],hot:[]},halt:function(e){throw alert(e+'!'),e},prizeRate:0,curIssueInfo:{},lastIssueInfo:{},curMode:0,curMethod:{},curProjects:[],nextProjectCounter:0,curPrizeIndex:-1,rebateGapList:[],todayDrawList:[],curServerTime:'',curRemainTime:0,remainTimer:{},curWaitOpenTime:0,waitOpenTimer:{},getLastOpenTime:0,getLastOpenTimer:{},canBuy:!1,traceMethodPrize:0,tracePrizeLimit:0,canTraceIssues:[],counters:0},t),r={SXBD:{0:1,1:1,2:2,3:3,4:4,5:5,6:7,7:8,8:10,9:12,10:13,11:14,12:15,13:15,14:15,15:15,16:14,17:13,18:12,19:10,20:8,21:7,22:5,23:4,24:3,25:2,26:1,27:1},EXBD:{0:1,1:1,2:2,3:2,4:3,5:3,6:4,7:4,8:5,9:5,10:5,11:4,12:4,13:3,14:3,15:2,16:2,17:1,18:1},SXHZ:{0:1,1:3,2:6,3:10,4:15,5:21,6:28,7:36,8:45,9:55,10:63,11:69,12:73,13:75,14:75,15:73,16:69,17:63,18:55,19:45,20:36,21:28,22:21,23:15,24:10,25:6,26:3,27:1},EXHZ:{0:1,1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9,9:10,10:9,11:8,12:7,13:6,14:5,15:4,16:3,17:2,18:1},SXZXHZ:{1:1,2:2,3:2,4:4,5:5,6:6,7:8,8:10,9:11,10:13,11:14,12:14,13:15,14:15,15:14,16:14,17:13,18:11,19:10,20:8,21:6,22:5,23:4,24:2,25:2,26:1},factorial:function(e){return e<=1?1:e*r.factorial(e-1)},getNumByIssue:function(e){if(0==e.length)return!1;var t=e.indexOf("-");return-1!=t?e.substr(t+1):e.substr(e.length-3)},expandLotto:function(t){var a=[],l=[],n=0;if(e.each(t,function(t,a){if(""!=e.trim(a)){var i=a.split("_");i.sort(),l.push(i)}else n=1}),n)return[];var i,r,s,o,c;switch(t.length){case 2:for(i=0;i<l[0].length;i++)for(r=0;r<l[1].length;r++)a.push(l[0][i]+" "+l[1][r]);break;case 3:for(i=0;i<l[0].length;i++)for(r=0;r<l[1].length;r++)for(s=0;s<l[2].length;s++)a.push(l[0][i]+" "+l[1][r]+" "+l[2][s]);break;case 5:for(i=0;i<l[0].length;i++)for(r=0;r<l[1].length;r++)for(s=0;s<l[2].length;s++)for(o=0;o<l[3].length;o++)for(c=0;c<l[4].length;c++)a.push(l[0][i]+" "+l[1][r]+" "+l[2][s]+" "+l[2][o]+" "+l[2][c]);break;default:throw"unkown expand"}var u=[];return e.each(a,function(e,t){var a=t.split(" ");array_unique(a).length==a.length&&u.push(t)}),u}},s={rebateValue1Change:function(t){var a=t&&t.value||0;e.each(i.rebateGapList,function(t){e('.rebateValue1').each(function(t){0==t||15==t?e(this).html(round(i.curMode*i.curMethod.prize[1]*(i.prizeRate+i.rebate-i.rebateGapList[a].rebate)/i.prizeRate,4)):1==t||14==t?e(this).html(round(i.curMode*i.curMethod.prize[2]*(i.prizeRate+i.rebate-i.rebateGapList[a].rebate)/i.prizeRate,4)):2==t||13==t?e(this).html(round(i.curMode*i.curMethod.prize[3]*(i.prizeRate+i.rebate-i.rebateGapList[a].rebate)/i.prizeRate,4)):3==t||12==t?e(this).html(round(i.curMode*i.curMethod.prize[4]*(i.prizeRate+i.rebate-i.rebateGapList[a].rebate)/i.prizeRate,4)):4==t||11==t?e(this).html(round(i.curMode*i.curMethod.prize[5]*(i.prizeRate+i.rebate-i.rebateGapList[a].rebate)/i.prizeRate,4)):5==t||10==t?e(this).html(round(i.curMode*i.curMethod.prize[6]*(i.prizeRate+i.rebate-i.rebateGapList[a].rebate)/i.prizeRate,4)):6==t||9==t?e(this).html(round(i.curMode*i.curMethod.prize[7]*(i.prizeRate+i.rebate-i.rebateGapList[a].rebate)/i.prizeRate,4)):e(this).html(round(i.curMode*i.curMethod.prize[8]*(i.prizeRate+i.rebate-i.rebateGapList[a].rebate)/i.prizeRate,4))})})},changePrize:function(){if(('YMBDW'==i.curMethod.name||'QSYMBDW'==i.curMethod.name||'ZSYMBDW'==i.curMethod.name||'SXYMBDW'==i.curMethod.name||'WXYMBDW'==i.curMethod.name)&&i.rebateGapList[e("#curPrizeSpan").val()].prize>1900){var t=0;for(var a in i.rebateGapList)i.rebateGapList[a].prize<=1900&&i.rebateGapList[a].prize>t&&(i.curPrizeIndex=a,t=i.rebateGapList[a].prize);var l=e("#curPrizeSpan option").eq(i.curPrizeIndex).html().split("/");switch(i.curMethod.name){case'YMBDW':case'QSYMBDW':case'ZSYMBDW':sscmsg='一码不定位最大奖金固定是￥'+l[0]+'，不能再往上调节';break;case'SXYMBDW':sscmsg='四星一码不定位最大奖金固定是￥'+l[0]+'，不能再往上调节';break;case'WXYMBDW':sscmsg='一码不定位最大奖金固定是￥'+l[0]+'，不能再往上调节'}e("#curPrizeSpan").val(i.curPrizeIndex);var n=i.curPrizeIndex,r=layer.confirm(sscmsg,{closeBtn:0,btn:['确定']},function(){layer.close(r),e("#curPrizeSpan").val(n),e('#rebateValue').html(e('#curPrizeSpan option').eq(n).html()),e('.ethcx').html(e('#curPrizeSpan option').eq(ui.value).html().slice(0,-5)),e('#selectRebate').slider('option','value',n)})}else{if(!0!==e.isEmptyObject(i.curMethod)&&i.curMethod.description.indexOf("@P@")>0){for(var o=e("#curPrizeSpan option:selected").text().split("/"),c='',u=i.curMethod.description.split("@P@"),p=1;p<u.length;p++)void 0!=i.curMethod.prize[p]&&(c+=u[p-1]+Math.round(i.curMethod.prize[p]*o[0]/i.curMethod.prize[1]*1e4)/1e4+"元");c+=u[u.length-1],e("#methodDesc").text(c)}i.curPrizeIndex=e("#curPrizeSpan").val(),s.saveLastPrize(),d.updateTotalSingle()}},generateGapList:function(){var t=[];e.each(i.minRebateGaps,function(e,a){if(a.from=parseFloat(a.from),a.to=parseFloat(a.to),a.gap=parseFloat(a.gap),i.rebate>a.to)for(var l=a.from;l<=a.to;l+=a.gap)t.push(parseFloat(number_format(l,3)));else{for(l=a.from;l<a.to&&l<i.rebate;l+=a.gap)t.push(parseFloat(number_format(l,3)));t.push(parseFloat(number_format(i.rebate,3)))}}),t=array_unique(t);var a=[];return e.each(t,function(e,t){var l=round(i.maxCombPrize*(i.prizeRate+t),0);a.push({rebate:round(i.rebate-t,3),prize:l})}),a},showPirze:function(){if(!0!==e.isEmptyObject(i.curMethod)){e('#curPrizeSpan').empty(),e.each(i.rebateGapList,function(t,a){var l=round(i.curMode*i.curMethod.prize[1]*(i.prizeRate+i.rebate-i.rebateGapList[t].rebate)/i.prizeRate,4),n=round(i.curMode*i.curMethod.prize[2]*(i.prizeRate+i.rebate-i.rebateGapList[t].rebate)/i.prizeRate,4),r=round(i.curMode*i.curMethod.prize[3]*(i.prizeRate+i.rebate-i.rebateGapList[t].rebate)/i.prizeRate,4),s=round(i.curMode*i.curMethod.prize[4]*(i.prizeRate+i.rebate-i.rebateGapList[t].rebate)/i.prizeRate,4),o=round(i.curMode*i.curMethod.prize[5]*(i.prizeRate+i.rebate-i.rebateGapList[t].rebate)/i.prizeRate,4),c=round(i.curMode*i.curMethod.prize[6]*(i.prizeRate+i.rebate-i.rebateGapList[t].rebate)/i.prizeRate,4),u=round(i.curMode*i.curMethod.prize[7]*(i.prizeRate+i.rebate-i.rebateGapList[t].rebate)/i.prizeRate,4),d=round(i.curMode*i.curMethod.prize[8]*(i.prizeRate+i.rebate-i.rebateGapList[t].rebate)/i.prizeRate,4),p=number_format(100*parseFloat(i.rebateGapList[t].rebate),1);"JSHZ"===i.curMethod.name?e('#curPrizeSpan').append('<option value="'+t+'">'+l+';'+n+';'+r+';'+s+';'+o+';'+c+';'+u+';'+d+'/'+p+'%</option>'):e('#curPrizeSpan').append('<option value="'+t+'">'+l+'/'+p+'%</option>')}),e("#curPrizeSpan").val(i.curPrizeIndex),s.changePrize(),e('#selectRebate').slider({range:'min',min:0,max:e('#curPrizeSpan option').length-1,value:e('#curPrizeSpan option:selected').index(),slide:function(t,a){e('#curPrizeSpan option').removeAttr('selected'),e('#curPrizeSpan option').eq(a.value).attr('selected',!0),"JSETDX"==i.curMethod.name||"JSEBT"==i.curMethod.name||"JSSBT"==i.curMethod.name?(e('#curPrizeSpan').siblings('span').html('奖金/返点'),e('#rebateValue').html(e('#curPrizeSpan option').eq(a.value).html())):(e('#curPrizeSpan').siblings('span').html('返点'),e('#rebateValue').html(e('#curPrizeSpan option').eq(a.value).html().split('/')[1])),e('.rebateValue1_0').html(),e('#curPrizeSpan').change(),e('.ethcx').html(e('#curPrizeSpan option').eq(a.value).html().split('/')[0]),e('.rebateValueKS-HZDXDS').html(e('#curPrizeSpan option:selected').html().split('/')[0]),s.rebateValue1Change(a),i.curPrizeIndex=a.value}});var t=e('#curPrizeSpan option:selected').html();"JSETDX"==i.curMethod.name||"JSEBT"==i.curMethod.name||"JSSBT"==i.curMethod.name?(e('#curPrizeSpan').siblings('span').html('奖金/返点'),e('#rebateValue').html(e('#curPrizeSpan option:selected').html())):(e('#curPrizeSpan').siblings('span').html('返点'),e('#rebateValue').html(e('#curPrizeSpan option:selected').html().split('/')[1])),e('.ethcx').html(t.split('/')[0]),e('.rebateValue1_1').html(t.split(';')[0]),e('.rebateValue1_2').html(t.split(';')[1]),e('.rebateValue1_3').html(t.split(';')[2]),e('.rebateValue1_4').html(t.split(';')[3]),e('.rebateValue1_5').html(t.split(';')[4]),e('.rebateValue1_6').html(t.split(';')[5]),e('.rebateValue1_7').html(t.split(';')[6]),e('.rebateValue1_8').html(t.split('/')[0].split(';')[7]),e('.rebateValueKS-HZDXDS').html(e('#curPrizeSpan option:selected').html().split('/')[0])}},saveLastPrize:function(){setCookie("reb_"+i.lotteryId,i.rebateGapList[i.curPrizeIndex].rebate,2592e3)}},o={methodGroup_Click:function(t){e(this).addClass("methodGroup_selected").siblings().removeClass("methodGroup_selected methodGroup_hover"),e(t.target).is('label')&&(e(this).find('dd:first').click(),e("#traceBtn").show(),e(".choMainTab").children('.progressBar')&&(e(".progressBar").remove(),e(".choMainTab").css("padding-top",""))),e(this).addClass("methodGroup_hover"),/\w+_(\d+)/.test(e(this).attr("id"));RegExp.$1;e(".playNav ul .methodPopStyle").hide(),e(this).find('.methodPopStyle').show()},methodGroup_hoverOver:function(){e(this).addClass("methodGroup_hover"),e(this).hasClass("methodGroup_selected")&&e(this).find('.methodPopStyle').show()},methodGroup_hoverOut:function(){e(this).removeClass("methodGroup_hover"),/\w+_(\d+)/.test(e(this).attr("id"));RegExp.$1},method_hoverOver:function(){e(this).addClass("method_hover"),/\w+_(\d+)/.test(e(this).attr("id"));RegExp.$1;e(this).find('.methodPopStyle').show()},method_hoverOut:function(){e(this).removeClass("method_hover"),/\w+_(\d+)/.test(e(this).attr("id"));RegExp.$1;e(this).find('.methodPopStyle').hide()},method_Click:function(t){e("#quickSelect").text('快捷投注'),i.curMethod=t.data,e('.methodPopStyle').hide(),e('#multiple').val(''),e('#methodGroupContainer').find('.method').removeClass("method_selected"),e(this).addClass("method_selected"),e('#curMethod').text(i.curMethod.cname),e("#methodDesc").text(i.curMethod.description).hide(),e("#methodTipInfo").hover(function(){layer.tips(e("#methodDesc").text(),this,{tips:[2,'#f13131'],maxWidth:250,time:0,closeBtn:0})},function(){layer.closeAll('tips')}),c.generateBall(),e(".selectRandomBtn").parent().hide(),d.updateSingle(0),s.showPirze(),0==propLen(i.curMethod.field_def)&&(c.showInput(),e("#singleInfo").show(),e("#selectArea").removeClass("N-selected")),2==propLen(i.curMethod.field_def)&&e(".locate").css("padding","10px 0"),3==propLen(i.curMethod.field_def)&&e(".locate").css("padding","10px 0"),4==propLen(i.curMethod.field_def)&&e(".locate").css("padding","5px 0")},selectDefault:function(){e("#methodGroupContainer").find("label:contains('两面盘')").click(),e(".playNav ul ul").hide()}},c={reset:function(){e.isEmptyObject(i.curMethod.field_def)||(e.each(i.curMethod.field_def,function(t,a){e('#field_'+t).children().removeClass('ball_Selected')}),d.updateSingle(0))},showInput:function(){e("#selectArea").children().remove(),e(str).appendTo("#selectArea"),e("#delTA").click(function(){e("#inputTA").val("")}),e("#inputTA").keyup(function(){''!=e("#inputTA").val()?(e("#selectCodeBtn").addClass('selectCodeBtn_selected'),e(this).removeClass('MachineSeleBg')):e(this).addClass('MachineSeleBg')})},generateBall:function(){e("#selectArea").children().remove(),e('#quickSelect').data('val',0);e('#selectRebate').show(),['JSETDX','JSEBT','JSSBT'].includes(i.curMethod.name)?e('.bonusSlide ').show():(e('#totalSingleInfo').show(),e('#singleInfo').show()),['KS-HZDXDS','JSHZ','JSETFX','JSSTDX'].includes(i.curMethod.name)?e('#quickSelect').show():e('#quickSelect').hide(),e.each(i.curMethod.field_def,function(t,a){var l=a.nums.split(" "),n='',r="";e.each(l,function(e,t){isNaN(t)?"三同号通选"==t?n+='<li class="k3_sthtx"><span class="ts_sthtx">'+t+"</span><b class=\"ethcx\"></b><input type=\"text\" value=\"\" list=\"itemlist\" min=\"1\" name=\"multiple\" class=\"txtStyle txtaddSty f_left multiple1\" class=\"form-control\" maxlength=\"5\" data-ball=\""+t+'" /></li>':"三连号通选"==t&&(n+='<li class="k3_slhtx"><span class="ts_slhtx">'+t+"</span><b class=\"ethcx\"></b><input type=\"text\" value=\"\" list=\"itemlist\" min=\"1\" name=\"multiple\" class=\"txtStyle txtaddSty f_left multiple1\" class=\"form-control\" maxlength=\"5\" data-ball=\""+t+'" /></li>'):"JSETDX"==i.curMethod.name||"JSEBT"==i.curMethod.name||"JSSBT"==i.curMethod.name?n+='<li class="k3m_x ts'+t+'">'+t+'</li>':n+='<li class="k3_x"><span class="ts'+t+'">'+t+"</span><b class=\"ethcx\"></b><input type=\"text\" value=\"\" list=\"itemlist\" min=\"1\" name=\"multiple\" class=\"txtStyle txtaddSty f_left multiple1\" class=\"form-control\" maxlength=\"5\" data-ball=\""+t+'" /></li>'}),"JSHZ"==i.curMethod.name?(n="",e.each(l,function(e,t){isNaN(t)||(n+='3'===t||"18"===t?"<li><span>"+t+"</span><b class=\"rebateValue1 rebateValue1_1\"></b><input type=\"text\" value=\"\" list=\"itemlist\" min=\"1\" name=\"multiple\" class=\"txtStyle txtaddSty f_left multiple1\" class=\"form_control\" maxlength=\"5\" data-ball=\""+t+'" /></li>':'4'===t||"17"===t?"<li><span>"+t+"</span><b class=\"rebateValue1 rebateValue1_2\"></b><input type=\"text\" value=\"\" list=\"itemlist\" min=\"1\" name=\"multiple\" class=\"txtStyle txtaddSty f_left multiple1\" class=\"form_control\" maxlength=\"5\" data-ball=\""+t+'" /></li>':'5'===t||"16"===t?"<li><span>"+t+"</span><b class=\"rebateValue1 rebateValue1_3\"></b><input type=\"text\" value=\"\" list=\"itemlist\" min=\"1\" name=\"multiple\" class=\"txtStyle txtaddSty f_left multiple1\" class=\"form_control\" maxlength=\"5\" data-ball=\""+t+'" /></li>':'6'===t||"15"===t?"<li><span>"+t+"</span><b class=\"rebateValue1 rebateValue1_4\"></b><input type=\"text\" value=\"\" list=\"itemlist\" min=\"1\" name=\"multiple\" class=\"txtStyle txtaddSty f_left multiple1\" class=\"form_control\" maxlength=\"5\" data-ball=\""+t+'" /></li>':'7'===t||"14"===t?"<li><span>"+t+"</span><b class=\"rebateValue1 rebateValue1_5\"></b><input type=\"text\" value=\"\" list=\"itemlist\" min=\"1\" name=\"multiple\" class=\"txtStyle txtaddSty f_left multiple1\" class=\"form_control\" maxlength=\"5\" data-ball=\""+t+'" /></li>':'8'===t||"13"===t?"<li><span>"+t+"</span><b class=\"rebateValue1 rebateValue1_6\"></b><input type=\"text\" value=\"\" list=\"itemlist\" min=\"1\" name=\"multiple\" class=\"txtStyle txtaddSty f_left multiple1\" class=\"form-control\" maxlength=\"5\" data-ball=\""+t+'" /></li>':'9'===t||"12"===t?"<li><span>"+t+"</span><b class=\"rebateValue1 rebateValue1_7\"></b><input type=\"text\" value=\"\" list=\"itemlist\" min=\"1\" name=\"multiple\" class=\"txtStyle txtaddSty f_left multiple1\" class=\"form_control\" maxlength=\"5\" data-ball=\""+t+'" /></li>':"<li><span>"+t+"</span><b class=\"rebateValue1 rebateValue1_8\"></b><input type=\"text\" value=\"\" list=\"itemlist\" min=\"1\" name=\"multiple\" class=\"txtStyle txtaddSty f_left multiple1\" class=\"form_control\" maxlength=\"5\" data-ball=\""+t+'" /></li>')})):"KS-HZDXDS"==i.curMethod.name&&(n="",e.each(l,function(e,t){n+="<li><span>"+t+"</span><b class=\"rebateValueKS-HZDXDS\"></b><input type=\"text\" value=\"\" list=\"itemlist\" min=\"1\" name=\"multiple\" class=\"txtStyle txtaddSty f_left multiple1\" class=\"form_control\" maxlength=\"5\" data-ball=\""+t+'" /></li>'}));var s='ballList_x';6==i.lotteryType&&'JSHZ'!=i.curMethod.name&&(s='ballList_k3no_square_x'),6!=i.lotteryType||'JSSTTX'!=i.curMethod.name&&'JSSLTX'!=i.curMethod.name||(s='ballList_k3no_sttx_x'),"KS-HZDXDS"==i.curMethod.name&&(s='ballList_x'),n="JSETDX"==i.curMethod.name?'<li class="areaPrefix_3"><ul class="'+s+(/(BD|HZ)$/.test(i.curMethod.name)?" dice":"")+'" id=field_'+t+">"+n+"</ul></li>":'<li class="areaPrefix_2"><ul class="'+s+(/(BD|HZ)$/.test(i.curMethod.name)?" dice":"")+'" id=field_'+t+">"+n+"</ul></li>",r='<li><ul class="BDHZinfo">'+r+"</ul></li>";var o="";/(DXDS)$/.test(i.curMethod.name)?o=' DXDS-margin-left':/(SDDDS)$/.test(i.curMethod.name)?o=' SDDDS-margin-left':/(SDCZW)$/.test(i.curMethod.name)&&(o=' SDCZW-margin-left'),"JSETDX"==i.curMethod.name?e('<div class="locate" id="locate_'+t+'"><ul class="lotteryNumber'+o+'">'+(a.prompt?'<li class="areaPrefix">'+a.prompt+"</li>":"")+n+"</ul></div>").appendTo("#selectArea"):e('<div class="locate" id="locate_'+t+'"><ul class="lotteryNumber k3">'+n+"</ul></div>").appendTo("#selectArea"),a.has_filter_btn&&e("#locate_"+t).find("ul").first().append("<li class=\"Quick\"><div class=\"QuickChoose\"><dl class=\"navSub\"><dd>全</dd><dd>奇</dd><dd>偶</dd> <dd>大</dd><dd>小</dd><dd>清</dd></dl></div></li>");var c=[];c.length>0&&e.each(c,function(t,a){e(a).appendTo('#selectArea')})}),"JSETDX"==i.curMethod.name||"JSEBT"==i.curMethod.name||"JSSBT"==i.curMethod.name?e('.gameLeftLI').css('display','block'):e('.gameLeftLI').css('display','none'),['JSETDX','JSEBT','JSSBT'].includes(i.curMethod.name)&&e('.lotteryNumber ul>li').bind("click",c.ball_Click),e(".f_left").click(function(){this.focus(),this.select()}).blur(function(){''!=this.value&&0!=this.value||(this.value='',d.updateTotalSingle())}).keyup(d.checkMultiple).keyup(d.updateTotalSingle)},getAssisInfo:function(t){var a="",l=[];if(!e.isArray(i.missHot.miss)||!e.isArray(i.missHot.hot))return[];var n=-1;switch(i.curMethod.name){case"QSZX":case"QSLX":case"QEZX":case"QELX":case"QSIZX":case"WXZX":case"WXLX":case"WXDW":case'SXDW':case"SDQSZX":case"SDQEZX":n=t-1+0;break;case"SIXZX":case"ZSZX":case"ZSLX":n=t-1+1;break;case"SXZX":case"SXLX":n=t-1+2;break;case"EXZX":case"EXLX":n=t-1+3;break;case"YXZX":n=t-1+4}return n>-1&&(e.each(i.missHot.miss[n],function(e,t){a+='<li class="yiLouNum">'+t+"</li>"}),a='<div class="missDIV" id="missHot_'+t+'"><ul class="missHotNumber"><li class="missHotUnit">遗漏:</li><li><ul class="yiLouList" id=yiLouList_'+t+">"+a+"</ul></li></ul></div>",l.push(a),a="",e.each(i.missHot.hot[n],function(e,t){a+='<li class="yiLouNum">'+t+"</li>"}),a='<div class="hotDIV" id="missHot_'+t+'"><ul class="missHotNumber"><li class="missHotUnit">冷热:</li><li><ul class="yiLouList" id=yiLouList_'+t+">"+a+"</ul></li></ul></div>",l.push(a)),l},ball_Click:function(t){var a=e(this);a.toggleClass("ball_Selected"),a.find('span').length>0&&a.find('span').toggleClass('x_spanball_selected'),/\w+_(\d+)/.test(a.parent().attr("id"));var l=RegExp.$1;a.parent().find(".ball_Selected").length>i.curMethod.field_def[l].max_selected?1==i.curMethod.field_def[l].max_selected?a.siblings(".ball_Selected").removeClass("ball_Selected"):(a.removeClass("ball_Selected"),parent.layer.alert("当前最多只能选择"+i.curMethod.field_def[l].max_selected+"个号码",{icon:7})):('JSETDX'==i.curMethod.name&&e('#locate_'+(1==l?2:1)).find(".ballList_k3no_square_x li").eq(parseInt(a.text().substr(0,1))-1).removeClass("ball_Selected"),c.computeSingle())},computeSingle:function(){var t=[];e.each(i.curMethod.field_def,function(a,l){var n="",r=i.curMethod.field_def[a].nums.split(" ");e("#field_"+a+" li").each(function(t){if(e(this).hasClass("ball_Selected")){var l=e(this);2==i.lotteryType||i.curMethod.field_def[a].max_selected>10||r[r.length-1].length>1?1==+e('#quickSelect').data('val')?n+=l.find('span').text()+'_':n+=l.text()+'_':1==+e('#quickSelect').data('val')?n+=l.find('span').text():n+=l.text()}}),-1==n.indexOf("_")?t.push(n):t.push(n.substr(0,n.length-1))});var a=m(t);d.updateSingle(a.singleNum),'WXDW'!=i.curMethod.name&&'REZX'!=i.curMethod.name&&'RSZX'!=i.curMethod.name&&'RSIZX'!=i.curMethod.name||e.each(t,function(e,a){''==a&&(t[e]='-')});var l=t.join(",");return'JSSTTX'==i.curMethod.name?l='111_222_333_444_555_666':'JSSLTX'==i.curMethod.name&&(l='123_234_345_456'),{singleNum:a.singleNum,isDup:a.isDup,code:l}}},u={missHotBtn_Click:function(){"1"==e(this).val()?(e("#selectArea .missDIV").removeClass("hidden"),e("#selectArea .hotDIV").addClass("hidden")):(e("#selectArea .missDIV").addClass("hidden"),e("#selectArea .hotDIV").removeClass("hidden"))}},d={selectCodeBtnFast:function(){d.selectCodeBtn_Click()},plusBtn_Click:function(){var t=e("#multiple").val();e("#multiple").val(parseInt(t)+1),d.checkMultiple(),d.updateTotalSingle()},minusBtn_Click:function(){var t=e("#multiple").val();parseInt(t)>1&&(e("#multiple").val(t-1),d.checkMultiple(),d.updateTotalSingle())},inputBtn_Click:function(t){i.curMethod=t.data,c.showInput(),e('#methodGroupContainer').find('.method').removeClass("method_selected"),e(this).addClass("method_selected"),e("#selectCodeBtn").addClass("selectCodeBtn_selected"),e(".selectRandomBtn").parent().show(),e("#selectArea").removeClass("N-selected")},selectCodeBtn_Click:function(){if(e("#inputTA").length>0){var t=[];if(0==e.trim(e("#inputTA").val()).length)return!1;var a={singleNum:1,isDup:0},l='<li><span class="width1" mid="'+i.curMethod.method_id+'" mname="'+i.curMethod.name+'">',n=i.curMethod.cname+'</span><span class="width2">';if(t.length<=1e3)for(var r in t){var a=m(t[r]),s=number_format(2*a.singleNum*i.curMode,3),o='</span><span class="width3">'+a.singleNum+'注</span><span class="width4">￥'+s+'</span><span class="xDel">X</span></li>';if(a.isDup)return parent.layer.alert("您输入的号码有误，请重新检查输入!",{icon:7}),!1;i.nextProjectCounter++,e(l+n+t[r].join(",")+o).appendTo("#projectList")}else{var u='',p='';for(var r in t)if(u&&(u+='|'),u+=t[r].join(","),(a=m(t[r])).isDup)return parent.layer.alert("您输入的号码有误，请重新检查输入!",{icon:7}),!1;var s=number_format(2*t.length*i.curMode,3),o='</span><span class="width3">'+t.length+'注</span><span class="width4">￥'+s+'</span><span class="xDel">X</span></li>';i.nextProjectCounter=t.length,e(p+=l+n+u+o).appendTo("#projectList")}d.updateTotalSingle(),e("#delTA").click()}else{if(0==(a=c.computeSingle()).singleNum)return!1;i.nextProjectCounter++;s=number_format(2*a.singleNum*i.curMode,3);367!=i.curMethod.method_id&&700!=i.curMethod.method_id&&708!=i.curMethod.method_id||(a.code='123_234_345_456'),e('<li><span class="width1" mid="'+i.curMethod.method_id+'" mname="'+i.curMethod.name+'">'+i.curMethod.cname+'</span><span class="width2">'+a.code+'</span><span class="width3">'+a.singleNum+'注</span><span class="width4">￥'+s+'</span><span class="xDel">X</span></li>').appendTo("#projectList"),d.updateTotalSingle(),c.reset()}},rxInputCodes:function(e,t){for(var a=['-','-','-','-','-'],l=e[0];l<=e[e.length-1];l++)a[l]=''},removeAll:function(){e("#token").val(""),e("#projectList").empty(),i.nextProjectCounter=0,e(".areaPrefix_2 ul li .txtStyle").val(""),e(".areaPrefix_2 ul li").removeClass('ball_Selected'),e(".areaPrefix_3 ul li").removeClass('ball_Selected'),e('#multiple').val(''),e('#betCount').html('0'),e('.x_spanball_selected').removeClass('x_spanball_selected'),d.updateTotalSingle()},updateSingle:function(t){var a=number_format(2*t*i.curMode,3);e("#betCount").text(t),e("#betAmount").text(a);var l=0==e('#projectList li').length?1:e('#projectList li').length;if(t>0){e("#selectCodeBtn").parent().addClass('selectCodeBtn_selected');var n=e("#totalBetAmount").text(),r=(s=e('#curPrizeSpan').find("option:selected").text()).split('/')[0];e("#totalWin").text(number_format(r*l*e("#multiple").val()-n-a,3))}else{e("#selectCodeBtn").parent().removeClass('selectCodeBtn_selected');var n=e("#totalBetAmount").text(),s=e('#curPrizeSpan').find("option:selected").text(),r=s.split('/')[0];e("#totalWin").text(number_format(r*l*e("#multiple").val()-n,3))}},updateTotalSingle:function(){var t=0;e("#projectList").children("li").each(function(a){var l=e(this).children();t+=parseInt(l.eq(2).text()),l.eq(3).text("￥"+number_format(2*parseInt(l.eq(2).text())*e("#multiple").val()*i.curMode,3))}),t>0?e("#confirmBtn").addClass('CantapCodeBtn_selected'):e("#confirmBtn").removeClass('CantapCodeBtn_selected');var a=0==e('#projectList li').length?1:e('#projectList li').length;e("#totalBetCount").text(t);var l=number_format(2*t*e("#multiple").val()*i.curMode,3);e("#totalBetAmount").text(l);var n=e('#curPrizeSpan').find("option:selected").text().split('/')[0];e("#totalWin").text(number_format(n*a*e("#multiple").val()-l,3))},checkMultiple:function(){return this.value=this.value.replace(/^0|[^\d]/g,''),!(e(this).val()>5e4)||(parent.layer.alert("请填写投注金额",{icon:7}),e(this).val(5e4),!0)},confirmBtn_Click:function(){var t,a='',l=0,n='',r=0,s=0,o=+e('#quickSelect').data('val');if("JSETDX"==i.curMethod.name?(e('#field_1 li').each(function(t,l){e(l).hasClass('ball_Selected')&&(a+=e(l).html()+'_')}),a=rtrim(a,'_'),a+=',',e('#field_2 li').each(function(t,l){e(l).hasClass('ball_Selected')&&(a+=e(l).html())}),t="buy",s=e('#betCount').html(),r=e('#multiple').val()*s,l=0):"JSEBT"==i.curMethod.name||"JSSBT"==i.curMethod.name?(e('.ballList_k3no_square_x li').each(function(t,l){e(l).hasClass('ball_Selected')&&(a+=e(l).html())}),t="buy",s=e('#betCount').html(),r=e('#multiple').val()*s,l=0):(a=[],o?(t='buy',e('.locate').each(function(t){var l=[];e('#locate_'+(t+=1)+' .ball_Selected').each(function(t,a){var n=e(a);l[l.length]=o?n.find('span').text():n.text()}),a[a.length]=l.join('_')}),a=a.join(','),s=e('#betCount').text(),r+=s*e("#multiple").val(),l=0):(t="xbuy",e.each(e('.f_left'),function(t,l){var n=e(l),i=parseInt(n.val()),o=n.data('ball');/^[1-9]*[1-9][0-9]*$/.test(i)&&void 0!==o&&(a[a.length]=o+'+'+i,r+=i,s++)}),a=a.join('|'),l=1)),a=i.curMethod.method_id.toString()+':'+a,n='JSSLTX'===i.curMethod.name?'123_234_345_456':'JSSTTX'===i.curMethod.name?'111_222_333_444_555_666':a.split(':')[1].replace(/\+.*?\|/g,',').split('+')[0],"JSETDX"==i.curMethod.name||"JSEBT"==i.curMethod.name||"JSSBT"==i.curMethod.name){if(''==e('#multiple').val()&&'0'==e('#betCount').html())return parent.layer.alert("请先选择号码再投注",{icon:7}),!1;if(''===e('#multiple').val())return parent.layer.alert("请填写投注金额",{icon:7}),!1;if('0'===e('#betCount').html())return parent.layer.alert("请先选择号码再投注",{icon:7}),!1;if(!/^[1-9]*[1-9][0-9]*$/.test(e('#multiple').val()))return parent.layer.alert("请填写投注金额",{icon:7}),e("#multiple").val("1"),!1}else if(0===r||0===s)return parent.layer.alert("请填写投注金额",{icon:7}),!1;if(!i.canBuy)return parent.layer.alert("该期已截止购买",{icon:7}),!1;if(0===a.length)return parent.layer.alert("请先选择号码再投注",{icon:7}),!1;var c=0,u='<br>注数：'+s+'注',p='<div id="buy_message">请确认以下投注内容：<br>************************<br>玩法：<span>'+i.curMethod.cname+'</span><br>投注期号：'+i.curIssueInfo.issue+'<br>内容：'+n+(0==l?u:'')+"<br>总 金 额：￥"+r+"<br>************************<br></div>";parent.layer.confirm(p,{icon:7},function(l){if(parent.$('.xubox_botton').empty(),parent.$('.xubox_botton').html('<div class="LoadingShow"><span class="Loading_icon"></span><span class="Loading_Font">投注中，请稍后...</span></div>'),1==(c+=1)){e.post("?c=game&a=play",{op:t,lotteryId:i.lotteryId,issue:i.curIssueInfo.issue,curRebate:i.rebateGapList[i.curPrizeIndex].rebate,modes:i.curMode,codes:a,xgame:1,multiple:'xbuy'===t?1:e("#multiple").val(),token:getRandChar(32)},function(e){if(0==e.errno){h.todayBuyBtnNew_Click(),d.removeAll();var t='<div id="buy_success_message">购买成功!<br>************************<br>订单编号：'+e.pkgnum+"<br>投注总额：￥"+r+"<br>************************<br></div>";parent.layer.close(l),parent.layer.alert(t,{icon:1}),parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")})}else 65534==e.errno||(parent.layer.close(l),parent.layer.alert("购买失败:"+e.errstr,{icon:2}),console.log("错误代码:"+e.errno));showBalance()},"json").fail(function(e){parent.layer.close(l),parent.layer.alert("网络异常，请在“游戏记录-订单查询”中确认该订单是否提交成功。",{icon:2})});var n=setInterval(function(){0==(c=0)&&clearInterval(n)},5e3)}})},traceBtn_Click:function(){if(e("#traceBtn").attr("mark",1),0==e("#projectList li").length)return parent.layer.alert("请先选择投注号码",{icon:7}),!1;e("#traceBtn").attr('disabled',"true");var t=[];e("#projectList li").each(function(a){-1==e.inArray(e(this).find("span:first").attr("mid"),t)&&t.push(e(this).find("span:first").attr("mid"))}),e.ajax({url:"?c=game&a=play",type:"POST",data:{op:"getTracePage",lotteryId:i.lotteryId,mids:t.join(",")},cache:!1,dataType:"json",timeout:3e4,success:function(a){if(e("#traceBtn").removeAttr("disabled"),0==a.errno){i.canTraceIssues=a.issues,i.traceMethodPrize=a.prize,i.tracePrizeLimit=a.prizeLimit;var l=e('#traceHtml'),n=p.showTracePage(l),r=[250,251,360,368,28,56,101,202,298,34,57,102,203,304,4,52,106,193,274,5,53,107,194,275,81,108,109,195,351,42,75,115,219,312,43,76,116,220,313,38,71,120,214,308,39,72,121,215,309,82,110,122,216,352,86,93,126,228,356,87,94,127,229,357,88,95,128,230,358,47,78,141,222,317,235,236,386,25,155,173,189,24,154,172,188];0!=a.prize&&1==t.length&&-1==e.inArray(parseInt(i.curMethod.method_id),r)||e("#multipleStyle2").attr("disabled",!0),e("input[name=multipleStyle]").unbind("click").click(p.multipleStyle_Click),e("#confirmTraceBtn").unbind("click").click(function(){p.confirmTraceBtn_Click()&&parent.layer.close(n)}),e("#cancelTraceBtn").unbind("click").click(function(){p.cancelTraceBtn_Click(),parent.layer.close(n)}),e("#startIssue").unbind("change").change(p.startIssue_Change),e("#traceNum").unbind("click").click(function(){this.focus(),this.select()}).keyup(d.checkMultiple).keyup(p.traceNum_Keyup),e(".multipleNumDropdown").mouseover(function(){e(this).addClass('multipleNumDropdownSelected')}).mouseout(function(){e(this).removeClass('multipleNumDropdownSelected')}).click(function(){e(this).parent().find('.multipleNumValue').toggle()}),e(".multipleNumValue li").mousemove(function(){e(this).addClass('multipleNumValueSelected')}).mouseout(function(){e(this).removeClass('multipleNumValueSelected')}).unbind("click").click(function(){var t=e(this).parent().siblings('.zhuiz_number_e2');t.val(parseInt(e(this).text())),e.proxy(d.checkMultiple,t.get(0))(),'style1BodyMultiple'==t.attr('id')?(e('.style1BodyMultiple').val(t.val()).each(function(){e.proxy(p.style1BodyMultiple_Keyup,e(this).get(0))()}),p.updateTotalMoney()):'traceNum'==t.attr('id')&&e.proxy(p.traceNum_Keyup,t.get(0))(),e(this).parent().slideUp('fast')}),e('#style1BodyMultiple').unbind("click").click(function(){this.focus(),this.select()}).keyup(d.checkMultiple).keyup(function(){isNaN(parseInt(e(this).val()))&&e(this).val("1"),e('.style1BodyMultiple').val(e(this).val()).each(function(){e.proxy(p.style1BodyMultiple_Keyup,e(this).get(0))()}),p.updateTotalMoney()}),e('#checkAll').unbind("click").live('click',function(){e(this).is(':checked')?e('.checkbox input[type=checkbox]').attr('checked',!0).parent().parent().css('color',''):e('.checkbox input[type=checkbox]').attr('checked',!1).parent().parent().css('color','#ccc'),p.updateTotalMoney()}),e('.checkbox input[type=checkbox]').unbind("click").live('click',function(){if('checkAll'!=e(this).attr('id')){e(this).is(':checked')?e(this).parent().parent().css('color',''):e(this).parent().parent().css('color','#ccc');var t=e(this).parent().parent().index();e.proxy(p.style1BodyMultiple_Keyup,e('#style1BodyMultiple_'+t).get(0))(),p.updateTotalMoney()}}),e("#singleNum").text(e("#totalBetCount").text()),e("#issuesNum2").text("1"),e("#multipleStyle1").click(),p.updateTotalMoney(),null!=runTime.traceRemainTimer&&window.clearInterval(runTime.traceRemainTimer),runTime.traceRemainTimer=window.setInterval(p.traceRemain_Timer_Handle,1e3)}else alert(a.errstr)},error:function(t,a,l){e("#traceBtn").removeAttr("disabled"),-1!=l.indexOf("a=logout")||-1!=l.indexOf("a=login")?(alert("您已经退出，请重新登录"),window.location.href="?a=logout"):alert("操作超时，请刷新页面.")}})},selectRandom:function(){var t,a,l=propLen(i.curMethod.field_def),n={},r=[];switch(i.curMethod.name){case'WXDW':n.WXDW=1;case'REZX':n.REZX=2;case'RSZX':n.RSZX=3;for(u=0;u<l;u++)r[u]="-";for(var s=[],o=1;o<=n[i.curMethod.name];o++){count=Math.floor(Math.random()*l+1);b=!1;for(var c in s)if(s[c]===count){b=!0;break}if(b)o--;else{s.push(count),t=parseInt(i.curMethod.field_def[o].max_selected),a=Math.floor(Math.random()*t);v=(y=i.curMethod.field_def[o].nums.split(" "))[a];r[count-1]=v}}break;case'RSIZX':n.RSIZX=4;for(var u=0;u<l;u++)r[u]="-";for(var s=[],o=1;o<=n[i.curMethod.name];o++){count=Math.floor(Math.random()*l+1);b=!1;for(var c in s)if(s[c]===count){b=!0;break}if(b)o--;else{s.push(count),t=parseInt(i.curMethod.field_def[o].max_selected),a=Math.floor(Math.random()*t);v=(y=i.curMethod.field_def[o].nums.split(" "))[a];r[count-1]=v}}break;case'EXZUX':n.EXZUX=[2];case'SXZS':n.SXZS=[2];case'SXZL':n.SXZL=[3];case'QEZUX':n.QEZUX=[2];case'QSZS':n.QSZS=[2];case'QSZL':n.QSZL=[3];case"ZSZS":n.ZSZS=[2];case"ZSZL":n.ZSZL=[3];case'ZUX24':n.ZUX24=[4];case'ZUX12':n.ZUX12=[1,2];case'ZUX6':n.ZUX6=[2];case'ZUX4':n.ZUX4=[1,1];case'ZUX120':n.ZUX120=[5];case'ZUX60':n.ZUX60=[1,3];case'ZUX30':n.ZUX30=[2,1];case'ZUX20':n.ZUX20=[1,2];case'ZUX10':n.ZUX10=[1,1];case'ZUX5':n.ZUX5=[1,1];for(var p=[],o=1;o<=l;o++){var h=[],f="";t=parseInt(i.curMethod.field_def[o].max_selected);for(var g=1;g<=n[i.curMethod.name][o-1];g++){var b=!1;a=Math.floor(Math.random()*t);for(var c in p)if(p[c]===a){b=!0;break}b?g--:(p.push(a),h.push(a),f=h.sort().join(''))}r.push(f)}break;default:for(o=1;o<=l;o++){t=parseInt(i.curMethod.field_def[o].max_selected),a=Math.floor(Math.random()*t);var y=i.curMethod.field_def[o].nums.split(" "),v=y[a];r.push(v)}}var _=m(r),S=r.join(",");if(0==_.singleNum)return!1;i.nextProjectCounter++;var x=number_format(2*_.singleNum*i.curMode,3);e('<li><span class="width1" mid="'+i.curMethod.method_id+'" mname="'+i.curMethod.name+'">'+i.curMethod.cname+'</span><span class="width2">'+S+'</span><span class="width3">'+_.singleNum+'注</span><span class="width4">￥'+x+'</span><span class="xDel">X</span></li>').appendTo("#projectList"),d.updateTotalSingle()},selectRandomBtn_Click:function(){e(this).attr('disabled','true');var t,a=e(this).attr('num');for(t=1;t<=a;t++)d.selectRandom();e(this).removeAttr('disabled')}},p={multipleStyle_Click:function(){e("#startIssue").get(0).selectedIndex=0,e("#traceNum").val(1),e("#style1BodyMultiple").val(1),1==e(this).val()?(e(".style1BodyMultiple").live("click",function(){this.focus(),this.select()}).live("keyup",d.checkMultiple).live("keyup",p.style1BodyMultiple_Keyup),p.updateStyle1(),e(".multipleNum").eq(0).show(),e("#multipleStyle1DIV").show(),e("#multipleStyle2DIV").hide()):(e("#startMultiple").click(function(){this.focus(),this.select()}),e("#beitouToolSmainbtzk input").click(function(){e(this).parent().click()}).focus(function(){this.select()}),e("#beitouToolSmainbtzk li").click(function(){e(this).addClass("checked").siblings().removeClass("checked"),e(this).find("input[name=profitStyle]").attr("checked",!0)}),e(".multipleNum").eq(0).hide(),e("#generalPlanBtn").click(p.generalPlanBtn_Click),e("#issuesNum2").text("1"),e("#traceTotalAmount").text(number_format(2*parseInt(e("#singleNum").text())*i.curMode,3)),e("#style2Body").empty(),e("#startMultiple").val("1"),e("input[name=totalProfitRate]").val("10"),e("input[name=first5Rate]").val("5"),e("input[name=first5RateValue]").val("10"),e("input[name=laterRateValue]").val("5"),e("input[name=totalProfit]").val("100"),e("input[name=first5Profit]").val("5"),e("input[name=first5ProfitValue]").val("100"),e("input[name=laterProfitValue]").val("50"),e("#beitouToolSmainbtzk li:first").click(),e("#multipleStyle1DIV").hide(),e("#multipleStyle2DIV").show())},startIssue_Change:function(){"1"==e("input[name=multipleStyle]:checked").val()?p.updateStyle1():p.generalPlanBtn_Click()},traceNum_Keyup:function(){"1"==e("input[name=multipleStyle]:checked").val()&&p.updateStyle1()},traceRemain_Timer_Handle:function(){var t=l(i.curRemainTime);if(i.curRemainTime>0)e("#remainTimerLabel").text(t.hour+":"+t.minute+":"+t.second),e("#traceBtn").attr("mark",0);else{clearInterval(runTime.traceRemainTimer);var a=l(i.curWaitOpenTime);if(e("#remainTimerLabel").text(a.hour+":"+a.minute+":"+a.second),runTime.traceWaitOpenTimer=window.setInterval(p.traceWaitOpen_Timer_Handle,100),parent.layer.alert("第"+i.curIssueInfo.issue+"期投注时间已结束，投注内容将进入到下一期！",{icon:7}),1!=e("#traceBtn").attr("mark"))if(e("#startIssue").children(":first").remove(),e("#startIssue").children(":first").text(e("#startIssue").children(":first").text()+"(当前期)"),"1"==e("input[name=multipleStyle]:checked").val()){var n=[];e(".style1BodyMultiple").each(function(){n.push(this.value)}),p.updateStyle1(),e(".style1BodyMultiple").each(function(){this.value=n.pop()})}else e("#style2Body li").length>0&&p.generalPlanBtn_Click()}},traceWaitOpen_Timer_Handle:function(){var t=l(i.curWaitOpenTime);e("#remainTimerLabel").text(t.hour+":"+t.minute+":"+t.second),i.curWaitOpenTime<0&&(clearInterval(runTime.traceWaitOpenTimer),runTime.traceRemainTimer=window.setInterval(p.traceRemain_Timer_Handle,1e3))},style1BodyMultiple_Keyup:function(){var t=parseInt(e(this).val());(isNaN(t)||t<1||t>99999)&&(t=1),/\w+_(\d+)/.test(e(this).attr("id"));var a=RegExp.$1;if(0==a)r=0;else{for(var l,n=a-1;n>=0;n--)if(e('#check_'+n).is(':checked')){l=n;break}var r=parseFloat(e("#totalMoney_"+l).text())}e("#style1BodyMultiple_"+a).val(t);var s=parseInt(e("#singleNum").text())*t*2*i.curMode;for(e("#curMoney_"+a).text(number_format(s,3));a<=e("#style1Body li").length;)e('#check_'+a).is(':checked')&&(r+=parseFloat(e("#curMoney_"+a).text()),e("#totalMoney_"+a).text(number_format(r,3))),a++;p.updateTotalMoney()},updateStyle1:function(){var t=-1;if(e.each(i.canTraceIssues,function(a,l){l==e("#startIssue").val()&&(t=a)}),-1!=t){isNaN(parseInt(e("#traceNum").val()))&&e("#traceNum").val("1"),e('#style1BodyMultiple').val("1");var a=i.canTraceIssues.slice(t,t+parseInt(e("#traceNum").val()));a.length<e("#traceNum").val()&&(parent.layer.alert("最多只能追"+a.length+"期",{icon:7}),e("#traceNum").val(a.length)),e("#style1Body").empty();var l,n=0;e('#checkAll').attr('checked',!0),e.each(a,function(t,a){l=2*parseInt(e("#singleNum").text())*i.curMode,n+=l;var r='<li id="traceIssueLI_'+t+'"><span class="checkbox"><input type="checkbox" id="check_'+t+'" checked /></span><span id="traceIssue_'+t+'">'+a+'</span><span><input type="text" value="1" id="style1BodyMultiple_'+t+'" class="beitouToolsinput style1BodyMultiple" maxlength="5" /></span><span id=curMoney_'+t+">"+number_format(l,3)+"</span><span id=totalMoney_"+t+">"+number_format(n,3)+"</span></li>";e("#style1Body").append(r),e(".style1BodyMultiple").bind("click",function(){this.focus(),this.select()}).bind("keyup",d.checkMultiple).bind("keyup",p.style1BodyMultiple_Keyup)}),p.updateTotalMoney()}},confirmTraceBtn_Click:function(){var t,a,l,n,r,s;if(e("#projectList").children("li").each(function(i){t=e(this).children(),n=t.eq(0).attr("mid"),r=t.eq(1).text(),s=!1,l||(l=n,a=n+":",s=!0),l!=n?(a+="#"+n+":",l=n,a+=r):a+=1==s?r:"|"+r}),!i.canBuy)return parent.layer.alert("该期已截止购买",{icon:7}),!1;if(0==a.length)return parent.layer.alert("请先选择号码再投注",{icon:7}),!1;var o=[];if("1"==e("input[name=multipleStyle]:checked").val()?e("#style1Body li").each(function(t){if(e(this).find("input[type=checkbox]").is(':checked')){var a=e(this).find("span:eq(1)").text(),l=e(this).find("input[type=text]").val();o.push({issue:a,multiple:l})}}):e("#style2Body li").each(function(t){var a=e(this).find("span:eq(0)").text(),l=e(this).find("span:eq(1)").text();o.push({issue:a,multiple:l})}),!o||o.length<=0)return parent.layer.alert("追号的期数不能为空",{icon:7}),!1;e("#token").val(getRandChar(32));var c=1==i.curMode?"2元":.5==i.curMode?"1元":.1==i.curMode?"2角":.05==i.curMode?"1角":.01==i.curMode?"分":"厘",u=e("#traceTotalAmount").text(),m=e("input[name=stopOnWin]").attr("checked")?1:0,f='<div id="buy_message">请确认以下投注内容：<br>************************<br>是否追号：是<br>单倍注数：'+e("#totalBetCount").text()+"注<br>总 金 额：￥"+u+"<br>超始期号："+o[0].issue+"<br>追号期数："+o.length+"<br>模&nbsp;&nbsp;式："+c+"模式<br>************************<br></div>";return p.destroyTracePage(),parent.layer.confirm(f,{icon:7},function(t){e.post("?c=game&a=play",{op:"buy",lotteryId:i.lotteryId,issue:i.curIssueInfo.issue,curRebate:i.rebateGapList[i.curPrizeIndex].rebate,modes:i.curMode,codes:a,traceData:o,stopOnWin:m,token:e("#token").val()},function(e){if(0==e.errno){d.removeAll(),h.todayBuyBtnNew_Click();var a='<div id="buy_success_message">追号订单成功!<br>************************<br>订单编号：'+e.pkgnum+"<br>起始期号："+o[0].issue+"<br>追号期数："+o.length+"<br>追号总额：￥"+u+"<br>模&nbsp;&nbsp;式："+c+"模式<br>************************<br></div>";parent.layer.close(t),parent.layer.alert(a,{icon:1}),parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")})}else parent.layer.close(t),parent.layer.alert("追号失败:"+e.errstr+e.errno,{icon:2})},"json").fail(function(e){parent.layer.close(t),layer.alert("网络异常，请在“游戏记录-追号记录”中确认该订单是否提交成功。",{icon:2})}),parent.$('.xubox_botton').empty(),parent.$('.xubox_botton').html('<div class="LoadingShow"><span class="Loading_icon"></span><span class="Loading_Font">投注中，请稍后...</span></div>')}),parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")}),!0},cancelTraceBtn_Click:function(){p.destroyTracePage()},showTracePage:function(t){var a=parent.layer.open({type:1,title:'追号管理',offset:['50px',''],area:['700px','auto'],content:t,success:function(t){var a='';e.each(i.canTraceIssues,function(e,t){a+='<option value="'+t+'">'+t+'期</option>'}),e("#startIssue").html(a).children(":first").text(e("#startIssue").children(":first").text()+"(当前期)"),e('#maxTraceCount').html(i.canTraceIssues.length)},close:p.cancelTraceBtn_Click});return e(document).one('keyup',function(e){27==(e.keyCode?e.keyCode:e.which)&&(p.cancelTraceBtn_Click(),parent.layer.close(a))}),a},destroyTracePage:function(){clearInterval(runTime.traceRemainTimer),clearInterval(runTime.traceWaitOpenTimer)},updateTotalMoney:function(){var t=0;"1"==e("input[name=multipleStyle]:checked").val()?(e("#style1Body li").each(function(a){e(this).find("input[type=checkbox]").is(':checked')&&(t+=parseInt(e(this).find("input[type=text]").val()))}),e("#issuesNum2").text(e("#style1Body li input[type=checkbox]:checked").length)):(e("#style2Body li").each(function(a){t+=parseInt(e(this).find("span:eq(1)").text())}),e("#issuesNum2").text(e("#style2Body li").length)),e("#traceTotalAmount").text(number_format(parseInt(e("#singleNum").text())*t*2*i.curMode,3))},generalPlanBtn_Click:function(){var t=function(e,t,a,l,n){if(e=isNaN(parseInt(e))?-1:parseInt(e),t=isNaN(parseInt(t))?-1:parseInt(t),a=isNaN(parseFloat(a))?-1:parseFloat(a),l=isNaN(parseFloat(l))?-1:parseFloat(l),n=parseFloat(n),e<0||t<0||a<0||l<0||n<=0)return 0;var i=0;return a>0&&(t>0?(i=(t/100+1)*l/(n-a*(t/100+1)),i=Math.ceil(round(i,3))):i=1,i>0&&i<e&&(i=e)),i},a=-1;if(e.each(i.canTraceIssues,function(t,l){l==e("#startIssue").val()&&(a=t)}),-1==a)throw alert("数据出错"),"数据出错";isNaN(parseInt(e("#traceNum").val()))&&e("#traceNum").val("1");var l=i.canTraceIssues.slice(a,a+parseInt(e("#traceNum").val()));l.length<e("#traceNum").val()&&(parent.layer.alert("最多只能追"+l.length+"期",{icon:7}),e("#traceNum").val(l.length)),e("#style2Body").empty();var n,r,s=[],o=0,c=2*parseInt(e("#singleNum").text())*i.curMode,u=i.traceMethodPrize*(i.rebateGapList[i.curPrizeIndex].prize/(i.maxCombPrize*i.prizeRate))*i.curMode;e.each(l,function(a,l){if(1==e("input[name=profitStyle]:checked").val())if(0==a){if(n=parseInt(e("#startMultiple").val()),r=n*parseInt(e("#singleNum").text())*2*i.curMode,(n*u-r)/r*100<e("input[name=totalProfitRate]").val())return parent.layer.alert("该计划无法实现，请调整目标",{icon:7}),!1}else n=t(e("#startMultiple").val(),e("input[name=totalProfitRate]").val(),c,o,u);else if(2==e("input[name=profitStyle]:checked").val())if(0==a){if(n=parseInt(e("#startMultiple").val()),r=n*parseInt(e("#singleNum").text())*2*i.curMode,(n*u-r)/r*100<e("input[name=first5RateValue]").val())return parent.layer.alert("该计划无法实现，请调整目标",{icon:7}),!1}else n=a<e("input[name=first5Rate]").val()?t(e("#startMultiple").val(),e("input[name=first5RateValue]").val(),c,o,u):t(e("#startMultiple").val(),e("input[name=laterRateValue]").val(),c,o,u);else 3==e("input[name=profitStyle]:checked").val()?(n=Math.ceil(round((parseInt(e("input[name=totalProfit]").val())+o)/(u-2*parseInt(e("#singleNum").text())*i.curMode),3)))<e("#startMultiple").val()&&(n=e("#startMultiple").val()):4==e("input[name=profitStyle]:checked").val()&&(n=a<e("input[name=first5Profit]").val()?Math.ceil(round((parseInt(e("input[name=first5ProfitValue]").val())+o)/(u-2*parseInt(e("#singleNum").text())*i.curMode),3)):Math.ceil(round((parseInt(e("input[name=laterProfitValue]").val())+o)/(u-2*parseInt(e("#singleNum").text())*i.curMode),3)));return 0==n?(parent.layer.alert("您输入的参数有误，必须为正整数",{icon:7}),!1):n<0?(parent.layer.alert("该计划不可能实现，请调整目标",{icon:7}),!1):n*u>i.tracePrizeLimit?(parent.layer.alert("该计划超出无法实现，请调整目标",{icon:7}),!1):(r=n*parseInt(e("#singleNum").text())*2*i.curMode,o+=r,void s.push({issue:l,multiple:n,curMoney:number_format(r,2),totalMoney:number_format(o,2),curPrize:number_format(n*u,2),totalProfit:number_format(n*u-o,2),totalProfitRate:round((n*u-o)/o,2)}))}),p._showPlan(s)},_showPlan:function(t){e.each(t,function(t,a){var l='<li><span class="spanWidth90px">'+a.issue+'</span><span class="spanWidth50px">'+a.multiple+'</span><span class="spanWidth70px">'+a.curMoney+'</span><span class="spanWidth70px">'+a.totalMoney+'</span><span class="spanWidth70px">'+a.curPrize+'</span><span class="spanWidth70px">'+a.totalProfit+'</span><span class="spanWidth70px">'+Math.round(100*a.totalProfitRate)+"%</span></li>";e("#style2Body").append(l)}),p.updateTotalMoney()}},h={init:function(){if(runTime.remainTimer=window.setInterval(h.showCurIssue_Timer,1e3),""==i.lastIssueInfo.code)i.getLastOpenTime=0,clearInterval(runTime.getLastOpenTimer),runTime.getLastOpenTimer=window.setInterval(h.getLastOpen_Timer,1e3),e("#thisIssueInfo").addClass("lock"),i.canBuy=!1,e("#thisIssueSpan").text(i.lastIssueInfo.issue);else{var t=i.todayDrawList[0];if(i.lastIssueInfo.issue!=t.issue){var a=i.lastIssueInfo,l=h.getMoreInfo(a.code);if(a.prop=l,i.todayDrawList.unshift(a),e("#todayDrawBtn").hasClass("cur")){var n=i.todayDrawList[0],a=n.code.split(""),r=parseInt(a[0])+parseInt(a[1])+parseInt(a[2]),s='<ul><li class="width80px">'+n.issue+'</li><li class="width60px">'+n.code+'</li><li class="width53px">'+r+'</li><li class="width53px">'+(r>10?"大":"小")+(r%2?"单":"双")+"</li></ul>";e("#todayIssuesBody").prepend(s)}}}var o;null!=i.todayDrawList[0].code&&(o=i.todayDrawList[0].code.split("")),e('#thisIssueNumUL').children().empty(),null!=o&&e.each(o,function(t,a){e('#thisIssueNumUL').children().append('<span class="pendingNum_k3'+(t+1)+' k3"></span>')}),h.showLastDraw(),i.canBuy=!0},getCurIssue:function(t){e.ajax({url:"?c=game&a=play",type:"POST",data:{op:"getCurIssue",lotteryId:i.lotteryId},cache:!1,dataType:"json",timeout:3e4,success:function(n){if(0==n.errno)if(0!=n.kTime){e('.thisIssueDIV').css('display','none'),e('#confirmBtn').attr("disabled","disabled"),e('#confirmBtn').css("background","#ccc url(../images/light_blue/confirmBtn.png) no-repeat 11px 6px"),e('#quickSelect').attr("disabled","disabled"),e('#quickSelect').css("background","#ccc"),e('#lastIssueSpan').text('**'),e('#curIssueSpan').text('**'),e('#thisIssueSpan').text('*************');var r=n.kTime/1e3;e('.Timer').css('margin','0'),e('.Timer').css('height','69'),window.setInterval(function(){var t=l(--r);e('#thisIssueTimerIcon').html('<span style="font-size: 24px">休市中</span>');var a="  &nbsp;距离下次开市:<span>"+t.hour+"</span><em>:</em><span>"+t.minute+"</span><em>:</em><span>"+t.second+"</span>";e('#thisIssueRemainTime').html(a)},1e3),window.setTimeout(function(){clearInterval(runTime.waitOpenTimer),window.location.reload()},n.kTime)}else i.curIssueInfo=n.issueInfo,i.curServerTime=n.serverTime,i.curRemainTime=getTS(i.curIssueInfo.end_time)-getTS(i.curServerTime),i.curWaitOpenTime=8,i.lastIssueInfo=n.lastIssueInfo,n.lastIssueInfo&&i.counters>0&&a(n.lastIssueInfo),i.counters++,"function"==typeof t&&t();else alert(n.errstr)},error:function(e,t,a){-1!=a.indexOf("a=logout")||-1!=a.indexOf("a=login")?(top.layer.alert("您已经超时退出，请重新登录",{icon:7}),window.location.href="?a=logout"):top.layer.alert("操作超时，请刷新页面..",{icon:7})}})},showCurIssue_Timer:function(){e("#thisIssueSpan").text(i.curIssueInfo.issue),e("#thisIssueSpan2").text(i.curIssueInfo.issue);var t=l(--i.curRemainTime);if(i.curRemainTime>=0)e("#thisIssueRemainTime").html("<span>"+t.hour+"</span><em>:</em><span>"+t.minute+"</span><em>:</em><span>"+t.second+"</span>"),e("#thisIssueTimerIcon").removeClass("lock").addClass('clock').text("可以投注");else{clearInterval(runTime.remainTimer),layer.alert(i.curIssueInfo.issue+'期销售已截止，请进入下一期购买',{icon:7}),e('#thisIssueTimerIcon').removeClass('clock').addClass('lock').text("已截止投注");var a=l(i.curWaitOpenTime);e('#thisIssueRemainTime').html("<span>"+a.hour+"</span><em>:</em><span>"+a.minute+"</span><em>:</em><span>"+a.second+"</span>"),i.canBuy=!1,runTime.waitOpenTimer=window.setInterval(h.waitOpen_Timer,1e3)}},waitOpen_Timer:function(){--i.curWaitOpenTime;var t=l(i.curWaitOpenTime);e("#thisIssueRemainTime").html("<span>"+t.hour+"</span><em>:</em><span>"+t.minute+"</span><em>:</em><span>"+t.second+"</span>"),i.curWaitOpenTime<0&&(clearInterval(runTime.waitOpenTimer),h.getCurIssue(h.init))},getLastOpen_Timer:function(){i.getLastOpenTime++,i.getLastOpenTime%10==0&&e.ajax({url:"?c=game&a=play",type:"POST",data:{op:"getLastIssueCode",lotteryId:i.lotteryId,issue:i.lastIssueInfo.issue},cache:!1,dataType:"json",timeout:3e4,success:function(t){if(0==t.errno){if(0!=t.kTime)clearInterval(runTime.waitOpenTimer),window.location.reload();else if(void 0!==t.issueInfo.code){clearInterval(runTime.getLastOpenTimer),i.getLastOpenTime=0,i.lastIssueInfo=t.issueInfo,a(t.issueInfo);var l=h.getMoreInfo(t.issueInfo.code);if(t.issueInfo.prop=l,i.todayDrawList.unshift(t.issueInfo),e("#todayDrawBtn").hasClass("cur")){var n=i.todayDrawList[0],r=n.code.split(""),s=parseInt(r[0])+parseInt(r[1])+parseInt(r[2]),o='<ul><li class="width80px">'+n.issue+'</li><li class="width60px">'+n.code+'</li><li class="width53px">'+s+'</li><li class="width53px">'+(s>10?"大":"小")+(s%2?"单":"双")+"</li></ul>";e("#todayIssuesBody").prepend(o)}h.showLastDraw()}}else alert("系统繁忙，请稍候再试(03)")},error:function(e,t,a){-1!=a.indexOf("a=logout")||-1!=a.indexOf("a=login")?(top.layer.alert("您已经超时退出，请重新登录",{icon:7}),window.location.href="?a=logout"):top.layer.alert("操作超时，请刷新页面...",{icon:7})}})},showLastDraw:function(){var t=i.todayDrawList[0];e("#lastIssueSpan").text(i.lastIssueInfo.issue);var a;if(i.lastIssueInfo.issue==t.issue){var l=t.code.split(""),n=parseInt(l[0])+parseInt(l[1])+parseInt(l[2]);a='<ul><li class="last">形态：[ <span class="bs">'+(n>10?'大':'小')+'</span> <span class="oe">'+(n%2?'单':'双')+'</span> ]&nbsp;&nbsp;和值：[ <span class="num">'+n+'</span> ]</li></ul>',e("#openCode").html(t.code);var r=0;h.todayBuyBtnNew_Click();var s=0;window.setTimeout(function t(){if(e("#thisIssueNumUL").find(".k3").length>0){s++;var a=e("#thisIssueNumUL .NumdiceMove").children(".k3").first();e(".NumdiceMove").addClass("stop"),window.setTimeout(function(){a.removeClass().addClass("pendingNum_k3_"+l[r++]+" k3_"+s),t()},1e3)}},100)}else e(".NumdiceMove").removeClass("stop"),e.each(e("#thisIssueNumUL .NumdiceMove").children(),function(t,a){e(this).removeClass().addClass("pendingNum_k3"+(t+1)+" k3")}),a='<ul><li class="last">形态：[ <span class="bs">-</span> <span class="oe">-</span> ]&nbsp;&nbsp;和值：[ <span class="num">-</span> ]</li></ul>',e("#openCode").html('');e("#thisIssueMoreInfo").html(a)},todayDrawBtn_Click:function(){e("#rightBoxSrt").show(),e("#todayBuyBody").empty().hide(),e("#todayIssuesBody").empty(),e.each(i.todayDrawList,function(t,a){for(var l="",n="",i=0;i<a.code.length;i++)l+="<b>"+a.code[i]+"</b>",n+=a.code[i];var r=a.code.split(""),s=(parseInt(r[0]),parseInt(r[1]),parseInt(r[2]),'<ul class="fix"><li>'+a.issue+'</li><li>'+l+"</li></ul>");e("#todayIssuesBody").append(s)})},todayBuyBtnNew_Click:function(){e("#todayIssuesBody").find("li:first").text()!=i.curIssueInfo.issue&&e.post("?c=game&a=play",{op:"getBuyRecords",lotteryId:i.lotteryId},function(t){0==t.errno?(e("#todayBuyBtn").addClass('cur').parent().siblings().children().removeClass('cur'),e("#todayBuyBody").empty().show(),e("#rightBoxSrt").hide(),e('<ul><li class="C1">玩法</li><li class="C2">期号</li><li class="C4">金额</li><li class="C5">状态</li></ul><div class="clear"></div>').appendTo("#todayBuyBody"),0==t.prj.length?e('<div class="todayNoBet">暂时没有记录！</div>').appendTo("#todayBuyBody"):e.each(t.prj,function(t,a){e('<ul class="fix"><li class="C1"><a href="javascript:void(0);" onclick="showPackageDetail(\''+a.wrapId+'\');return false;">'+a.methodName+'</a></li><li class="C2">'+r.getNumByIssue(a.issue)+'</li><li class="C4">'+a.amount+'</li><li class="C5">'+a.prizeStatus+"</li></ul>").click(function(){}).appendTo("#todayBuyBody")})):alert("系统繁忙，请稍候再试(04)")},"json")},scrollPrizeRank:function(){var t=e("#prizeScrollContent")[0];t.scrollTop+=1,t.scrollTop>=e("#prizeScrollContent")[0].scrollHeight/2&&(t.scrollTop=0)},getMoreInfo:function(e){var t={};if(1==i.lotteryType||4==i.lotteryType){var a=e.split("");t.qshz=parseInt(a[0])+parseInt(a[1])+parseInt(a[2]),t.qszt=h.zutai(a[0],a[1],a[2]),t.hshz=parseInt(a[2])+parseInt(a[3])+parseInt(a[4]),t.hszt=h.zutai(a[2],a[3],a[4]),t.hehz=parseInt(a[3])+parseInt(a[4]),t.dxds=h.dxds(a[3],a[4])}return t},translateT:function(e){return'T'==e?'10':e},zutai:function(e,t,a){return e==t&&e==a&&t==a?"豹子":e==t||e==a||t==a?"组三":"组六"},dxds:function(e,t){var a=[],l=[];return a.push(e>=5?"大":"小"),a.push(e%2==1?"单":"双"),l.push(t>=5?"大":"小"),l.push(t%2==1?"单":"双"),[a[0]+l[0],a[0]+l[1],a[1]+l[0],a[1]+l[1]].join(",")}};if(!function(){var a=0;return void 0==t.lotteryId||!is_numeric(t.lotteryId)||t.lotteryId<=0?a=-1:void 0==t.lotteryName||''==t.lotteryName?a=-2:void 0!=t.lotteryType&&is_numeric(t.lotteryType)&&-1!=e.inArray(t.lotteryType,[1,2,4,5,6,7,8])?void 0!=t.methods&&e.isArray(t.methods)&&0!=t.methods.length?void 0!=t.openedIssues&&e.isArray(t.openedIssues)&&0!=t.openedIssues.length?void 0!=t.minRebateGaps&&e.isArray(t.minRebateGaps)&&0!=t.minRebateGaps.length?void 0!=t.defaultMode&&is_numeric(t.defaultMode)&&-1!=!e.inArray(t.defaultMode,[1,.5,.1,.05,.01,.001])?void 0==t.defaultRebate||!is_numeric(t.defaultRebate)||t.defaultRebate<0||t.defaultRebate>t.rebate?a=-9:(void 0==t.maxCombPrize||!is_numeric(t.maxCombPrize)||t.maxCombPrize<=0)&&(a=-10):a=-8:a=-6:a=-5:a=-4:a=-3,a<0&&console.info('参数错误：flag='+a),0==a}())return parent.layer.alert("数据初始化失败",{icon:2}),!1;i.rebateGapList=s.generateGapList(),0==i.rebateGapList.length&&i.halt("initPrizeBar failed"),i.curPrizeIndex=i.rebateGapList.length-1,s.showPirze(),e('#curPrizeSpan').change(s.changePrize),function(){var t=.5,a=parseFloat(getCookie("mod_"+i.lotteryId));e.each([.5],function(e,l){l==a&&(t=l)}),i.curMode=t}(),e.each(i.methods,function(t,a){1==a.childs.length?e('<li class="methodGroupLI" id="methodGroup_'+t+'"><label>'+a.mg_name+"</label></li>").click(o.methodGroup_Click).appendTo("#methodGroupContainer"):e('<li class="methodGroupLI" id="methodGroup_'+t+'"><label>'+a.mg_name+"</label></li>").click(o.methodGroup_Click).hover(o.methodGroup_hoverOver,o.methodGroup_hoverOut).appendTo("#methodGroupContainer");var l='',n='',i='',r='',s='',c='',u='',p='',h='',m='',f='';6==a.mg_id||50==a.mg_id||57==a.mg_id||169==a.mg_id?(m='<dl class="fix"><dt>任选复式：</dt>',f='<dl class="fix"><dt>任选单式：</dt>'):(l='<dl class="fix"><dt>直选：</dt>',n='<dl class="fix"><dt>组选：</dt>',i='<dl class="fix"><dt>趣味：</dt>',r='<dl class="fix"><dt>特殊：</dt>',s='<dl class="fix"><dt>定位：</dt>',c='<dl class="fix"><dt>不定位：</dt>',u='<dl class="fix"><dt>任选二：</dt>',p='<dl class="fix"><dt>任选三：</dt>',h='<dl class="fix"><dt>任选四：</dt>',m='<dl class="fix"><dt>其他：</dt>');var g=e('<div id="method_'+t+'"></div>').addClass('methodPopStyle').hide();e.each(a.childs,function(e,o){var d='<dd class="method" name="'+o.name+'" id="method_'+t+"_"+e+'">'+o.cname+'</dd>',g='';1==o.method_property?l+=d:2==o.method_property?n+=d:3==o.method_property?i+=d:4==o.method_property?r+=d:5==o.method_property?s+=d:6==o.method_property?c+=d:7==o.method_property?u+=d:8==o.method_property?p+=d:9==o.method_property?h+=d:0==o.method_property&&(m+=d),1==o.can_input&&(g='<dd class="method" name="'+o.name+"son\" id=\"method_"+t+"_"+e+"son\">"+o.cname+"单式</dd>",1==o.method_property?l+=g:2==o.method_property?n+=g:3==o.method_property?i+=g:4==o.method_property?r+=g:5==o.method_property?s+=g:6==o.method_property?c+=g:7==o.method_property?u+=g:8==o.method_property?p+=g:9==o.method_property?h+=g:0==o.method_property&&(6==a.mg_id||50==a.mg_id||57==a.mg_id||169==a.mg_id?f+=g:m+=g))}),n+='</dl>',i+='</dl>',r+='</dl>',s+='</dl>',c+='</dl>',u+='</dl>',p+='</dl>',h+='</dl>',m+='</dl>',f+='</dl>',(l+='</dl>').indexOf('</dd>')<0&&(l=''),n.indexOf('</dd>')<0&&(n=''),i.indexOf('</dd>')<0&&(i=''),r.indexOf('</dd>')<0&&(r=''),s.indexOf('</dd>')<0&&(s=''),c.indexOf('</dd>')<0&&(c=''),u.indexOf('</dd>')<0&&(u=''),p.indexOf('</dd>')<0&&(p=''),h.indexOf('</dd>')<0&&(h=''),m.indexOf('</dd>')<0&&(m=''),f.indexOf('</dd>')<0&&(f=''),e(l+n+i+r+s+c+u+p+h+m+f).appendTo(g),e.each(a.childs,function(a,l){e('#method_'+t+"_"+a).live("click",l,o.method_Click).hover(o.method_hoverOver,o.methodGroup_hoverOut),e("#method_"+t+"_"+a+"son").live("click",l,d.inputBtn_Click).hover(o.method_hoverOver,o.methodGroup_hoverOut)}),e("#methodGroup_"+t).append(g)}),e(".subTopBar").mouseleave(function(){e(this).find("div").removeClass("methodGroup_hover"),e(this).find("ul li .methodPopStyle").hide()}),o.selectDefault(),e("input[name=missHotBtn]").click(u.missHotBtn_Click),e('input[name=missHotBtn][value="1"]').click(),i.nextProjectCounter=0,d.removeAll(),e(".xDel").live("click",function(){e(this).parent().remove(),d.updateTotalSingle()}),e("#quickSelect").click(function(){var t=e(this);0==+e(this).data('val')?(t.data('val',1),e('.multiple1').attr('readonly','readonly').css('backgroundColor','#eee').addClass('cur-not').val(''),e('#totalSingleInfo').show(),e('#singleInfo').show(),e('#multiple').val(''),e('.lotteryNumber ul>li').bind('click',c.ball_Click),t.text('一般投注')):(t.data('val',0),e('.multiple1').removeAttr('readonly').css('backgroundColor','').removeClass('cur-not').val(''),e('#totalSingleInfo').hide(),e('#singleInfo').hide(),e('#multiple').val(''),e('.lotteryNumber ul>li').unbind('click',c.ball_Click),e('.ball_Selected').removeClass('ball_Selected'),e('.x_spanball_selected').removeClass('x_spanball_selected'),t.text('快捷投注'))}),e('#choPirze li').click(function(){var t=e('.multiple1').length;+e('#quickSelect').data('val')||0===t?e('#multiple').val(e(this).data('value')):e('.multiple1').val(e(this).data('value'))}),e("#clearProjectBtn").click(d.removeAll),e("#inputBtn").click(d.inputBtn_Click),e("#selectCodeBtn").click(d.selectCodeBtn_Click),e("#selectCodeBtnFast").click(d.selectCodeBtnFast),e("#confirmBtn").click(function(){d.confirmBtn_Click()}),e("#traceBtn").click(d.traceBtn_Click),e(".selectRandomBtn").click(d.selectRandomBtn_Click),e("#plusBtn").click(d.plusBtn_Click),e("#minusBtn").click(d.minusBtn_Click),e("#curLotteryName").text(i.lotteryName),e("#curLotteryName2").text(i.lotteryName),e("#todayIssuesHead").html('<li class="width:30%">期号</li><li class="width:70%">开奖号</li><li class="width55px">和值</li><li class="width55px">形态</li>'),e("#todayDrawBtn").click(h.todayDrawBtn_Click),e("#todayBuyBtn").click(h.todayBuyBtnNew_Click),h.todayBuyBtnNew_Click(),e.each(i.openedIssues,function(e,t){t.prop=h.getMoreInfo(t.code),i.todayDrawList.push(t)}),e("#prizeRankBtn").click(),h.getCurIssue(h.init);var m=function(t){if(0==n(t).charsNum)return{singleNum:0,isDup:0};var a,l=0,s=0;switch(i.curMethod.name){case'SXZX':case"ZSZX":case'QSZX':s=(l=t[0].length*t[1].length*t[2].length)>1?1:0;break;case'SXZS':case"ZSZS":case'QSZS':s=(l=t[0].length*(t[0].length-1))>2?1:0;break;case'SXZL':case"ZSZL":case'QSZL':s=(l=t[0].length*(t[0].length-1)*(t[0].length-2)/r.factorial(3))>1?1:0;break;case'SXLX':case"ZSLX":case'QSLX':if(0==n(t).flag)return{singleNum:0,isDup:0};var o=0,c=0,u=0;o=t[0].length*t[1].length*t[2].length,c=t[1].length*t[2].length,u=t[2].length,s=(l=o+c+u)>3?1:0;break;case'SXBD':case"ZSBD":case'QSBD':a=t[0].split('_'),e.each(a,function(e,t){l+=r.SXBD[t]}),s=a.length>1?1:0;break;case'SXHHZX':case"ZSHHZX":case'QSHHZX':s=(l=t[0].length*t[1].length*t[2].length)>1?1:0;break;case'EXZX':case'QEZX':s=(l=t[0].length*t[1].length)>1?1:0;break;case'EXZUX':case'QEZUX':s=(l=t[0].length*(t[0].length-1)/2)>1?1:0;break;case'EXLX':case'QELX':if(0==n(t).flag)return{singleNum:0,isDup:0};var c=0,u=0;c=t[0].length*t[1].length,u=t[1].length,s=(l=c+u)>2?1:0;break;case'EXBD':case'QEBD':a=t[0].split('_'),e.each(a,function(e,t){l+=r.EXBD[t]}),s=a.length>1?1:0;break;case'YXZX':s=(l=t[0].length)>1?1:0;break;case'WXDW':for(h=0;h<5;h++)'-'!=t[h]&&(l+=t[h].length);s=l>1?1:0;break;case'SXDW':s=(l=t[0].length+t[1].length+t[2].length)>1?1:0;break;case'EMBDW':case'QSEMBDW':case'ZSEMBDW':case'SXEMBDW':case'WXEMBDW':l=t[0].length*(t[0].length-1)/2,s=0;break;case'WXSMBDW':l=t[0].length*(t[0].length-1)*(t[0].length-2)/6,s=0;break;case'EXDXDS':case'QEDXDS':l=t[0].length*t[1].length==1?1:0,s=0;break;case'SXDXDS':l=t[0].length*t[1].length*t[2].length==1?1:0,s=0;break;case'YMBDW':case'ZSYMBDW':case'SXYMBDW':case'WXYMBDW':case'QSYMBDW':l=t[0].length,s=0;break;case'SXHZ':case"ZSHZ":case'QSHZ':a=t[0].split('_'),e.each(a,function(e,t){l+=r.SXHZ[t]}),s=a.length>1?1:0;break;case'EXHZ':case'QEHZ':a=t[0].split('_'),e.each(a,function(e,t){l+=r.EXHZ[t]}),s=a.length>1?1:0;break;case'SXZXHZ':case'QSZXHZ':a=t[0].split('_'),e.each(a,function(e,t){l+=r.SXZXHZ[t]}),s=a.length>1?1:0;break;case'SIXZX':case'QSIZX':s=(l=t[0].length*t[1].length*t[2].length*t[3].length)>1?1:0;break;case'WXZX':s=(l=t[0].length*t[1].length*t[2].length*t[3].length*t[4].length)>1?1:0;break;case'WXLX':if(0==n(t).flag)return{singleNum:0,isDup:0};var d=0,o=0,c=0,u=0;d=t[0].length*t[1].length*t[2].length*t[3].length*t[4].length,o=t[2].length*t[3].length*t[4].length,c=t[3].length*t[4].length,u=t[4].length,s=(l=d+o+c+u)>4?1:0;break;case'REZX':for(h=0;h<4;h++)if('-'!=t[h])for(m=h+1;m<5;m++)'-'!=t[m]&&(l+=t[h].length*t[m].length);s=l>1?1:0;break;case'RSZX':for(h=0;h<3;h++)if('-'!=t[h])for(m=h+1;m<4;m++)if('-'!=t[m])for(f=m+1;f<5;f++)'-'!=t[f]&&(l+=t[h].length*t[m].length*t[f].length);s=l>1?1:0;break;case'RSIZX':for(var p=0;p<2;p++)if('-'!=t[p])for(var h=p+1;h<3;h++)if('-'!=t[h])for(var m=h+1;m<4;m++)if('-'!=t[m])for(var f=m+1;f<5;f++)'-'!=t[f]&&(l+=t[p].length*t[h].length*t[m].length*t[f].length);s=l>1?1:0;break;case'SDQSZX':if(3!=t.length)return{singleNum:0,isDup:0};g=r.expandLotto(t);s=(l=g.length)>1?1:0;break;case'SDQEZX':if(2!=t.length)return{singleNum:0,isDup:0};var g=r.expandLotto(t);s=(l=g.length)>1?1:0;break;case'SDQSZUX':a=t[0].split('_'),s=(l=a.length*(a.length-1)*(a.length-2)/r.factorial(3))>1?1:0;break;case'SDQEZUX':a=t[0].split('_'),s=(l=a.length*(a.length-1)/2)>1?1:0;break;case'SDRX1':a=t[0].split('_'),s=(l=a.length)>1?1:0;break;case'SDRX2':a=t[0].split('_'),s=(l=a.length*(a.length-1)/2)>1?1:0;break;case'SDRX3':a=t[0].split('_'),s=(l=a.length*(a.length-1)*(a.length-2)/6)>1?1:0;break;case'SDRX4':a=t[0].split('_'),s=(l=a.length*(a.length-1)*(a.length-2)*(a.length-3)/24)>1?1:0;break;case'SDRX5':a=t[0].split('_'),s=(l=a.length*(a.length-1)*(a.length-2)*(a.length-3)*(a.length-4)/120)>1?1:0;break;case'SDRX6':a=t[0].split('_'),s=(l=a.length*(a.length-1)*(a.length-2)*(a.length-3)*(a.length-4)*(a.length-5)/720)>1?1:0;break;case'SDRX7':a=t[0].split('_'),s=(l=a.length*(a.length-1)*(a.length-2)*(a.length-3)*(a.length-4)*(a.length-5)*(a.length-6)/5040)>1?1:0;break;case'SDRX8':a=t[0].split('_'),s=(l=a.length*(a.length-1)*(a.length-2)*(a.length-3)*(a.length-4)*(a.length-5)*(a.length-6)*(a.length-7)/40320)>1?1:0;break;case'SDQSBDW':a=t[0].split('_'),s=(l=a.length)>1?1:0;break;case'SDQSDWD':e.each(t,function(e,t){''!=t&&(a=t.split('_'),l+=a.length)}),s=l>3?1:0;break;case'SDDDS':case'SDCZW':l=1,s=1;break;case'YFFS':case'HSCS':case'SXBX':case'SJFC':s=(l=t[0].length)>1?1:0;break;case'ZUX120':t[0].length>4&&(l=5===t[0].length?1:r.factorial(t[0].length)/(120*r.factorial(t[0].length-5))),s=l>1?1:0;break;case'ZUX24':t[0].length>3&&(l=r.factorial(t[0].length)/(24*r.factorial(t[0].length-4))),s=l>1?1:0;break;case'ZUX6':t[0].length>1&&(l=r.factorial(t[0].length)/(2*r.factorial(t[0].length-2))),s=l>1?1:0;break;case'ZUX10':case'ZUX5':case'ZUX4':if(t[0].length>0&&t[1].length>0){b=t[1].length;for(h=0;h<t[0].length;h++){y=b;t[1].indexOf(t[0].substr(h,1))>-1&&(y=b-1),y>0&&(l+=r.factorial(y)/r.factorial(y-1))}}s=l>1?1:0;break;case'ZUX20':case'ZUX12':if(t[0].length>0&&t[1].length>1){b=t[1].length;for(h=0;h<t[0].length;h++){y=b;t[1].indexOf(t[0].substr(h,1))>-1&&(y=b-1),y>1&&(l+=r.factorial(y)/(2*r.factorial(y-2)))}}s=l>1?1:0;break;case'ZUX60':if(t[0].length>0&&t[1].length>2){b=t[1].length;for(h=0;h<t[0].length;h++){y=b;t[1].indexOf(t[0].substr(h,1))>-1&&(y=b-1),y>2&&(l+=r.factorial(y)/(6*r.factorial(y-3)))}}s=l>1?1:0;break;case'ZUX30':if(t[0].length>1&&t[1].length>0){var b=t[0].length;for(h=0;h<t[1].length;h++){var y=b;t[0].indexOf(t[1].substr(h,1))>-1&&(y=b-1),y>1&&(l+=r.factorial(y)/(2*r.factorial(y-2)))}}s=l>1?1:0;break;case'JSETDX':if(2!=t.length)return{singleNum:0,isDup:0};var v=t[0].length?t[0].split('_'):[],_=t[1].length?t[1].split(''):[];s=(l=v.length*_.length)>1?1:0;break;case'JSETFX':a=t[0].split('_'),s=(l=a.length)>1?1:0;break;case'JSHZ':a=t[0].split('_'),l=a.length,s=a.length>1?1:0;break;case'JSSTTX':case'JSSLTX':s=(l=1)>1?1:0;break;case'JSEBT':S=t[0].length;l=(S-1)*S/2,s=S>2?1:0;break;case'JSSTDX':a=t[0].split('_'),l=a.length,s=a.length>1?1:0;break;case'JSSBT':var S=t[0].length;l=(S-1)*(S-2)*S/6,s=S>3?1:0;break;case'KS-HZDXDS':l=t[0].length,s=S>1?1:0;break;case'PKSZ':case'PKBZ':case'PKDZ':case'PKTH':case'PKTHS':case'PKBX':case'PKRX1':a=t[0].split('_'),s=(l=a.length)>1?1:0;break;case'PKRX2':a=t[0].split('_'),s=(l=a.length*(a.length-1)/2)>1?1:0;break;case'PKRX3':a=t[0].split('_'),s=(l=a.length*(a.length-1)*(a.length-2)/6)>1?1:0;break;case'PKRX4':a=t[0].split('_'),l=a.length;x=a.length;s=(l=x*(x-1)*(x-2)*(x-3)/24)>1?1:0;break;case'PKRX5':x=(a=t[0].split('_')).length;s=(l=x*(x-1)*(x-2)*(x-3)*(x-4)/120)>1?1:0;break;case'PKRX6':var x=(a=t[0].split('_')).length;s=(l=x*(x-1)*(x-2)*(x-3)*(x-4)*(x-5)/720)>1?1:0;break;default:throw"unknown method2 "+i.curMethod.name}return{singleNum:l,isDup:s}}}}(jQuery);
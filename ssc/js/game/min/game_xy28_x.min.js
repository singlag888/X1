'use strict';var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if("object"!=(void 0===console?'undefined':_typeof(console)))var console={info:function(e){window.status=e}};var runTime={remainTimer:0,waitOpenTimer:0,getLastOpenTimer:0,scollTopIntervalTimer:0,traceRemainTimer:0,traceWaitOpenTimer:0,buyTodayTimer:0,clearAll:function(){clearInterval(runTime.remainTimer),clearInterval(runTime.waitOpenTimer),clearInterval(runTime.getLastOpenTimer),clearInterval(runTime.scollTopIntervalTimer),clearInterval(runTime.traceRemainTimer),clearInterval(runTime.traceWaitOpenTimer),clearInterval(runTime.buyTodayTimer)}};!function($){$.init=function(settings){function todayGetCurIssue(e){if(e.code){for(var t="",a="",s=0,r=0;s<e.code.length;s++)t+="<b>"+e.code[s]+"</b>",a+=e.code[s],r+=parseFloat(e.code[s]);$("#todayIssuesBody").prepend('<ul class="fix"><li>'+e.issue+'</li><li id="numshezhi">'+t+'<span>=</span><a class="numshezhia">'+r+'</a></li></ul>')}}function subTime(e){var t=e>0?{day:Math.floor(e/86400),hour:Math.floor(e%86400/3600),minute:Math.floor(e%3600/60),second:Math.floor(e%60)}:{day:0,hour:0,minute:0,second:0};return 1==(t.hour+"").length&&(t.hour="0"+t.hour),1==(t.minute+"").length&&(t.minute="0"+t.minute),1==(t.second+"").length&&(t.second="0"+t.second),t}function allHasValue(e){var t=1,a=0;return $.each(e,function(e,s){a+=s.length,0==s.length&&(t=0)}),{flag:t,charsNum:a}}function remainTime(e){var t=e.hour,a=e.minute.split(''),s=e.second.toString().split('');$("#thisIssueRemainTime").html("<span>"+t[0]+"</span><span>"+t[1]+"</span><em>:</em><span>"+a[0]+"</span><span>"+a[1]+"</span><em>:</em><span>"+s[0]+"</span><span>"+s[1]+"</span>")}var verifyParams=function(){var e=0;return void 0==settings.lotteryId||!is_numeric(settings.lotteryId)||settings.lotteryId<=0?e=-1:void 0==settings.lotteryName||''==settings.lotteryName?e=-2:void 0!=settings.lotteryType&&is_numeric(settings.lotteryType)&&-1!=$.inArray(settings.lotteryType,[10])?void 0!=settings.methods&&$.isArray(settings.methods)&&0!=settings.methods.length?void 0!=settings.openedIssues&&$.isArray(settings.openedIssues)&&0!=settings.openedIssues.length?void 0!=settings.minRebateGaps&&$.isArray(settings.minRebateGaps)&&0!=settings.minRebateGaps.length?void 0==settings.rebate||!is_numeric(settings.rebate)||settings.rebate<0||settings.rebate>.15?e=-7:void 0!=settings.defaultMode&&is_numeric(settings.defaultMode)&&-1!=!$.inArray(settings.defaultMode,[1,.5,.1,.05,.01,.001])?void 0==settings.defaultRebate||!is_numeric(settings.defaultRebate)||settings.defaultRebate<0||settings.defaultRebate>settings.rebate?e=-9:(void 0==settings.maxCombPrize||!is_numeric(settings.maxCombPrize)||settings.maxCombPrize<=0)&&(e=-10):e=-8:e=-6:e=-5:e=-4:e=-3,e<0&&console.info('参数错误：flag='+e),0==e},ps=$.extend({counter:0,lotteryId:1,lotteryName:'XY28',lotteryType:10,property_id:1,methods:[],maxCombPrize:0,openedIssues:[],minRebateGaps:[{from:0,to:.12,gap:.005},{from:.12,to:.125,gap:.001}],rebate:.123,defaultMode:1,defaultRebate:.123,missHot:{miss:[],hot:[]},halt:function(e){throw alert(e+'!'),e},prizeRate:0,curIssueInfo:{},lastIssueInfo:{},curMode:0,curMethod:{},curProjects:[],nextProjectCounter:0,curPrizeIndex:-1,rebateGapList:[],todayDrawList:[],curServerTime:'',curRemainTime:0,remainTimer:{},curWaitOpenTime:0,waitOpenTimer:{},getLastOpenTime:0,getLastOpenTimer:{},canBuy:!1,traceMethodPrize:0,tracePrizeLimit:0,canTraceIssues:[],counters:0},settings),helper={TMHZ:{0:1,1:3,2:6,3:10,4:15,5:21,6:28,7:36,8:45,9:55,10:63,11:69,12:73,13:75,14:75,15:73,16:69,17:63,18:55,19:45,20:36,21:28,22:21,23:15,24:10,25:6,26:3,27:1},factorial:function(e){return e<=1?1:e*helper.factorial(e-1)},getNumByIssue:function(e){if(0==e.length)return!1;var t=e.indexOf("-");return-1!=t?e.substr(t+1):e.substr(e.length-3)},expandLotto:function(e){var t=[],a=[],s=0;if($.each(e,function(e,t){if(""!=$.trim(t)){var r=t.split("_");r.sort(),a.push(r)}else s=1}),s)return[];var r,n,i,l,o;switch(e.length){case 2:for(r=0;r<a[0].length;r++)for(n=0;n<a[1].length;n++)t.push(a[0][r]+" "+a[1][n]);break;case 3:for(r=0;r<a[0].length;r++)for(n=0;n<a[1].length;n++)for(i=0;i<a[2].length;i++)t.push(a[0][r]+" "+a[1][n]+" "+a[2][i]);break;case 5:for(r=0;r<a[0].length;r++)for(n=0;n<a[1].length;n++)for(i=0;i<a[2].length;i++)for(l=0;l<a[3].length;l++)for(o=0;o<a[4].length;o++)t.push(a[0][r]+" "+a[1][n]+" "+a[2][i]+" "+a[2][l]+" "+a[2][o]);break;default:throw"unkown expand"}var c=[];return $.each(t,function(e,t){var a=t.split(" ");array_unique(a).length==a.length&&c.push(t)}),c}},tool={uniqueArr:function(e){var t={};len=e.length,result=[];for(var a=0;a<len;a++)t[e[a]]||(t[e[a]]=!0,result.push(e[a]));return result}},initModesBar=function(){var e=.5,t=parseFloat(getCookie("mod_"+ps.lotteryId));$.each([.5],function(a,s){s==t&&(e=s)}),ps.curMode=e},modesBar={modesBtn_Click:function(){var e=$("#modesDIV").val();$('#projectList').children('li').length>0?parent.layer.confirm('切换元角分模式将影响您现有投注项，是否继续？',{icon:7},function(t){ps.curMode=e,buyBar.updateTotalSingle(),0!=$('#betCount').text()&&buyBar.updateSingle($('#betCount').text()),modesBar.saveLastModes(),prizeBar.showPirze(),parent.layer.close(t)},function(e){switch(ps.curMode){case'1':$("#yuan").removeClass().addClass("yuan"),$("#jiao").removeClass().addClass("jiao_off"),$("#fen").removeClass().addClass("fen_off"),$("#li").removeClass().addClass("li_off"),$("#yuanYi").removeClass().addClass("yuanYi_off"),$("#jiaoYi").removeClass().addClass("jiaoYi_off");break;case'0.5':$("#yuan").removeClass().addClass("yuan_off"),$("#jiao").removeClass().addClass("jiao_off"),$("#fen").removeClass().addClass("fen_off"),$("#li").removeClass().addClass("li_off"),$("#yuanYi").removeClass().addClass("yuanYi"),$("#jiaoYi").removeClass().addClass("jiaoYi_off");break;case'0.1':$("#yuan").removeClass().addClass("yuan_off"),$("#jiao").removeClass().addClass("jiao"),$("#fen").removeClass().addClass("fen_off"),$("#li").removeClass().addClass("li_off"),$("#yuanYi").removeClass().addClass("yuanYi_off"),$("#jiaoYi").removeClass().addClass("jiaoYi_off");break;case'0.05':$("#yuan").removeClass().addClass("yuan_off"),$("#jiao").removeClass().addClass("jiao_off"),$("#fen").removeClass().addClass("fen_off"),$("#li").removeClass().addClass("li_off"),$("#yuanYi").removeClass().addClass("yuanYi_off"),$("#jiaoYi").removeClass().addClass("jiaoYi");break;case'0.01':$("#yuan").removeClass().addClass("yuan_off"),$("#jiao").removeClass().addClass("jiao_off"),$("#fen").removeClass().addClass("fen"),$("#li").removeClass().addClass("li_off"),$("#yuanYi").removeClass().addClass("yuanYi_off"),$("#jiaoYi").removeClass().addClass("jiaoYi_off");break;case'0.001':$("#li").removeClass().addClass("li"),$("#yuan").removeClass().addClass("yuan_off"),$("#jiao").removeClass().addClass("jiao_off"),$("#fen").removeClass().addClass("fen_off"),$("#yuanYi").removeClass().addClass("yuanYi_off"),$("#jiaoYi").removeClass().addClass("jiaoYi_off")}$("#modesDIV").val(ps.curMode)}):(ps.curMode=e,0!=$('#betCount').text()&&buyBar.updateSingle($('#betCount').text()),modesBar.saveLastModes(),prizeBar.showPirze())},saveLastModes:function(){setCookie('mod_'+ps.lotteryId,ps.curMode,2592e3)}},initPrizeBar=function(){ps.rebateGapList=prizeBar.generateGapList(),0==ps.rebateGapList.length&&ps.halt("initPrizeBar failed"),ps.curPrizeIndex=ps.rebateGapList.length-1,prizeBar.showPirze(),$('#curPrizeSpan').change(prizeBar.changePrize)},prizeBar={changePrize:function(){if(('YMBDW'==ps.curMethod.name||'QSYMBDW'==ps.curMethod.name||'ZSYMBDW'==ps.curMethod.name||'SXYMBDW'==ps.curMethod.name||'WXYMBDW'==ps.curMethod.name)&&ps.rebateGapList[$("#curPrizeSpan").val()].prize>1900){var e=0;for(var t in ps.rebateGapList)ps.rebateGapList[t].prize<=1900&&ps.rebateGapList[t].prize>e&&(ps.curPrizeIndex=t,e=ps.rebateGapList[t].prize);var a=$("#curPrizeSpan option").eq(ps.curPrizeIndex).html().split("/");switch(ps.curMethod.name){case'YMBDW':case'QSYMBDW':case'ZSYMBDW':sscmsg='一码不定位最大奖金固定是￥'+a[0]+'，不能再往上调节';break;case'SXYMBDW':sscmsg='四星一码不定位最大奖金固定是￥'+a[0]+'，不能再往上调节';break;case'WXYMBDW':sscmsg='一码不定位最大奖金固定是￥'+a[0]+'，不能再往上调节'}$("#curPrizeSpan").val(ps.curPrizeIndex);var s=ps.curPrizeIndex,r=layer.confirm(sscmsg,{closeBtn:0,icon:7,btn:['确定']},function(){layer.close(r),$("#curPrizeSpan").val(s),$('#rebateValue').html($('#curPrizeSpan option').eq(s).html()),$('#selectRebate').slider('option','value',s)})}else{if(!0!==$.isEmptyObject(ps.curMethod)&&ps.curMethod.description.indexOf("@P@")>0){for(var n=$("#curPrizeSpan option:selected").text().split("/"),i='',l=ps.curMethod.description.split("@P@"),o=1;o<l.length;o++)void 0!=ps.curMethod.prize[o]&&(i+=l[o-1]+Math.round(ps.curMethod.prize[o]*n[0]/ps.curMethod.prize[1]*1e4)/1e4+"元");i+=l[l.length-1],$("#methodDesc").text(i)}ps.curPrizeIndex=$("#curPrizeSpan").val(),prizeBar.saveLastPrize(),buyBar.updateTotalSingle()}},generateGapList:function(){var e=[];$.each(ps.minRebateGaps,function(t,a){if(a.from=parseFloat(a.from),a.to=parseFloat(a.to),a.gap=parseFloat(a.gap),ps.rebate>a.to)for(var s=a.from;s<=a.to;s+=a.gap)e.push(parseFloat(number_format(s,3)));else{for(s=a.from;s<a.to&&s<ps.rebate;s+=a.gap)e.push(parseFloat(number_format(s,3)));e.push(parseFloat(number_format(ps.rebate,3)))}}),e=array_unique(e);var t=[];return $.each(e,function(e,a){var s=round(ps.maxCombPrize*(ps.prizeRate+a),0);t.push({rebate:round(ps.rebate-a,3),prize:s})}),t},showPirze:function(){!0!==$.isEmptyObject(ps.curMethod)&&($('#curPrizeSpan').empty(),$.each(ps.rebateGapList,function(e,t){var a=round(ps.curMode*ps.curMethod.prize[1]*(ps.prizeRate+ps.rebate-ps.rebateGapList[e].rebate)/ps.prizeRate,4),s=number_format(100*parseFloat(ps.rebateGapList[e].rebate),1);$('#curPrizeSpan').append('<option value="'+e+'">'+a+'/'+s+'%</option>')}),$("#curPrizeSpan").val(ps.curPrizeIndex),prizeBar.changePrize(),$('#selectRebate').slider({range:'min',min:0,max:$('#curPrizeSpan option').length-1,value:$('#curPrizeSpan option:selected').index(),slide:function(e,t){$('#curPrizeSpan option').removeAttr('selected'),$('#curPrizeSpan option').eq(t.value).attr('selected',!0),$('#curPrizeSpan').change(),ps.curPrizeIndex=t.value}}),'XYDXDS'===ps.curMethod.name||'JDX'===ps.curMethod.name||'XYSB'===ps.curMethod.name?($('.rebateValue').html($('#curPrizeSpan option:selected').html().split('/')[0]),$('#rebateValue').siblings('span').html('返点:'),$('#rebateValue').html($('#curPrizeSpan option:selected').html().split('/')[1])):($('#rebateValue').siblings('span').html('赔率/返点:'),$('#rebateValue').html($('#curPrizeSpan option:selected').html())))},saveLastPrize:function(){setCookie("reb_"+ps.lotteryId,ps.rebateGapList[ps.curPrizeIndex].rebate,2592e3)}},initMethodBar=function(){$.each(ps.methods,function(e,t){1==t.childs.length?$('<li class="methodGroupLI" id="methodGroup_'+e+'"><label>'+t.mg_name+"</label></li>").click(methodBar.methodGroup_Click).appendTo("#methodGroupContainer"):$('<li class="methodGroupLI" id="methodGroup_'+e+'"><label>'+t.mg_name+"</label></li>").click(methodBar.methodGroup_Click).hover(methodBar.methodGroup_hoverOver,methodBar.methodGroup_hoverOut).appendTo("#methodGroupContainer");var a='',s='',r='',n='',i='',l='',o='',c='',u='',d='',p='';6==t.mg_id||50==t.mg_id||57==t.mg_id||169==t.mg_id?(d='<dl class="fix"><dt>任选复式：</dt>',p='<dl class="fix"><dt>任选单式：</dt>'):(a='<dl class="fix"><dt>直选：</dt>',s='<dl class="fix"><dt>组选：</dt>',r='<dl class="fix"><dt>趣味：</dt>',n='<dl class="fix"><dt>特殊：</dt>',i='<dl class="fix"><dt>定位：</dt>',l='<dl class="fix"><dt>不定位：</dt>',o='<dl class="fix"><dt>任选二：</dt>',c='<dl class="fix"><dt>任选三：</dt>',u='<dl class="fix"><dt>任选四：</dt>',d='<dl class="fix"><dt>其他：</dt>');var m='';m=0==e?$('<div id="method_'+e+'" class="methodControl"></div>').addClass('methodPopStyle'):$('<div id="method_'+e+'" class="methodControl"></div>').addClass('methodPopStyle').hide(),$.each(t.childs,function(m,h){var f='<dd class="method" name="'+h.name+'" pid="method_'+e+'" id="method_'+e+"_"+m+'">'+h.cname+'</dd>',$='';1==h.method_property?a+=f:2==h.method_property?s+=f:3==h.method_property?r+=f:4==h.method_property?n+=f:5==h.method_property?i+=f:6==h.method_property?l+=f:7==h.method_property?o+=f:8==h.method_property?c+=f:9==h.method_property?u+=f:0==h.method_property&&(d+=f),1==h.can_input&&($='<dd class="method" name="'+h.name+"son\" pid=\"method_"+e+'" id="method_'+e+"_"+m+"son\">"+h.cname+"单式</dd>",1==h.method_property?a+=$:2==h.method_property?s+=$:3==h.method_property?r+=$:4==h.method_property?n+=$:5==h.method_property?i+=$:6==h.method_property?l+=$:7==h.method_property?o+=$:8==h.method_property?c+=$:9==h.method_property?u+=$:0==h.method_property&&(6==t.mg_id||50==t.mg_id||57==t.mg_id||169==t.mg_id?p+=$:d+=$))}),s+='</dl>',r+='</dl>',n+='</dl>',i+='</dl>',l+='</dl>',o+='</dl>',c+='</dl>',u+='</dl>',d+='</dl>',p+='</dl>',(a+='</dl>').indexOf('</dd>')<0&&(a=''),s.indexOf('</dd>')<0&&(s=''),r.indexOf('</dd>')<0&&(r=''),n.indexOf('</dd>')<0&&(n=''),i.indexOf('</dd>')<0&&(i=''),l.indexOf('</dd>')<0&&(l=''),o.indexOf('</dd>')<0&&(o=''),c.indexOf('</dd>')<0&&(c=''),u.indexOf('</dd>')<0&&(u=''),d.indexOf('</dd>')<0&&(d=''),p.indexOf('</dd>')<0&&(p=''),$(a+s+r+n+i+l+o+c+u+d+p).appendTo(m),$.each(t.childs,function(t,a){$('#method_'+e+"_"+t).live("click",a,methodBar.method_Click).hover(methodBar.method_hoverOver,methodBar.methodGroup_hoverOut),$("#method_"+e+"_"+t+"son").live("click",a,buyBar.inputBtn_Click).hover(methodBar.method_hoverOver,methodBar.methodGroup_hoverOut)}),$("#methods").append(m)}),$(".subTopBar").mouseleave(function(){$(this).find("li").removeClass("methodGroup_hover")}),methodBar.selectDefault()},methodBar={methodGroup_Click:function(e){$(this).addClass("methodGroup_selected").siblings().removeClass("methodGroup_selected methodGroup_hover"),$(e.target).is('label')&&($(this).find('dd:first').click(),$("#traceBtn").show(),$(".choMainTab").children('.progressBar')&&($(".progressBar").remove(),$(".choMainTab").css("padding-top",""))),$(this).addClass("methodGroup_hover"),/\w+_(\d+)/.test($(this).attr("id"));var t=RegExp.$1;$(".playNav ul .methodPopStyle").hide(),$(this).find('.methodPopStyle').show(),$(".methodControl").hide(),$("#method_"+t).show(),$("#method_"+t+"_0").click()},methodGroup_hoverOver:function(){$(this).addClass("methodGroup_hover"),$(this).hasClass("methodGroup_selected")&&$(this).find('.methodPopStyle').show()},methodGroup_hoverOut:function(){$(this).removeClass("methodGroup_hover"),/\w+_(\d+)/.test($(this).attr("id"));RegExp.$1},method_hoverOver:function(){$(this).addClass("method_hover"),/\w+_(\d+)/.test($(this).attr("id"));RegExp.$1;$(this).find('.methodPopStyle').show()},method_hoverOut:function(){$(this).removeClass("method_hover"),/\w+_(\d+)/.test($(this).attr("id"));RegExp.$1;$(this).find('.methodPopStyle').hide()},method_Click:function(e){$('#quickSelect').text('快捷投注'),ps.curMethod=e.data;var t=$(this),a=t.attr("pid");$("#"+a).find('.method').removeClass("method_selected"),t.addClass("method_selected"),$('#curMethod').text(ps.curMethod.cname),$("#methodDesc").text(ps.curMethod.description).hide(),$("#methodTipInfo").hover(function(){layer.tips($("#methodDesc").text(),this,{tips:[2,'#f13131'],maxWidth:250,time:0,closeBtn:0})},function(){layer.closeAll('tips')}),ballBar.generateBall(),$(".selectRandomBtn").parent().hide(),buyBar.updateSingle(0),prizeBar.showPirze(),0==propLen(ps.curMethod.field_def)&&(ballBar.showInput(),$("#singleInfo").show(),$("#selectArea").removeClass("N-selected")),2==propLen(ps.curMethod.field_def)&&$(".locate").css("padding","10px 0"),3==propLen(ps.curMethod.field_def)&&$(".locate").css("padding","10px 0"),4==propLen(ps.curMethod.field_def)&&$(".locate").css("padding","5px 0")},selectDefault:function(){$("#methodGroupContainer").find("label:contains('特码')").click(),$(".playNav ul ul").hide()}},ballBar={reset:function(){$.isEmptyObject(ps.curMethod.field_def)||($.each(ps.curMethod.field_def,function(e,t){$('#field_'+e).children().removeClass('ball_Selected')}),buyBar.updateSingle(0))},showInput:function(){$("#selectArea").children().remove();var e='<div class="manualInput fix"><div class="manualInputTop"><ul><li><p class="NumbBasket">号码篮</p><textarea cols="" rows="" class="inputTA MachineSeleBg" id="inputTA"></textarea></li><li id="delTA" class="delTA custBtnStyle">清空号码</li></div><div class="manualInputBottom"><li class="inputTip1"><p>提示：</p><p>请把您已有的大底号码复制或者输入到下边文本框中。</p><p>每注号码之间用 空格 或者换行符 隔开，每注号码每位之间不使用任何分隔符。</p><p>仅支持单式。 </p></li><li class="inputTip2"><p>例如：</p><p id="inputExample">',t=[1,2,3,4,5,6,7,8,9,0];e+=t.slice(0,propLen(ps.curMethod.field_def)).join("")+" "+t.slice(propLen(ps.curMethod.field_def),propLen(ps.curMethod.field_def)+propLen(ps.curMethod.field_def)).join("")+"<br></p></li></div></div>",$(e).appendTo("#selectArea"),$("#delTA").click(function(){$("#inputTA").val(""),$(".FatherCodeBtn").removeClass("selectCodeBtn_selected")}),$("#inputTA").live('keyup',function(){''!=$("#inputTA").val()?($(".FatherCodeBtn").addClass('selectCodeBtn_selected'),$(this).removeClass('MachineSeleBg')):($(".FatherCodeBtn").removeClass('selectCodeBtn_selected'),$(this).addClass('MachineSeleBg'))})},generateBall:function(){$("#selectArea").children().remove(),$('#quickSelect').data('val',0);-1!==$.inArray(ps.curMethod.name,['JDX','XYDXDS','XYSB'])?($('#totalSingleInfo').hide(),$('#singleInfo').hide(),$('#quickSelect').show()):($('#totalSingleInfo').show(),$('#singleInfo').show(),$('.bonusSlide ').show(),$('#quickSelect').hide()),$.each(ps.curMethod.field_def,function(e,t){var a=t.nums.split(" "),s='';$.each(a,function(e,t){switch(ps.curMethod.name){case'JDX':case'XYDXDS':case'XYSB':s+="<li class=\"list_1\"><span class=\"ball_hz\">"+t+"</span><b class=\"rebateValue\"></b><input type=\"number\" value=\"\" list=\"itemlist\" name=\"multiple\" class=\"moneyNum multiple1\" maxlength=\"5\" data-ball=\""+t+'" /></li>';break;default:s+='<li>'+t+"</li>"}});var r='ballList';-1!==$.inArray(ps.curMethod.name,['JDX','XYDXDS','XYSB'])&&(r='ballList_x_JDX'),s='<li><ul class="'+r+(/(BD|HZ)$/.test(ps.curMethod.name)?" w400":"")+'" id=field_'+e+">"+s+"</ul></li>";var n="";/(DXDS)$/.test(ps.curMethod.name)?n=' DXDS-margin-left':/(SDDDS)$/.test(ps.curMethod.name)?n=' SDDDS-margin-left':/(SDCZW)$/.test(ps.curMethod.name)&&(n=' SDCZW-margin-left'),$('<div class="locate" id="locate_'+e+'"><ul class="lotteryNumber'+n+'">'+(t.prompt?'<li class="areaPrefix">'+t.prompt+"</li>":"")+s+"</ul></div>").appendTo("#selectArea"),t.has_filter_btn&&($("#locate_"+e).find("ul").first().append("<li class=\"Quick\"><div class=\"QuickChoose\"><dl class=\"navSub\"><dd>全</dd><dd>奇</dd><dd>偶</dd> <dd>大</dd><dd>小</dd><dd>清</dd></dl></div></li>"),"EXZUX"==ps.curMethod.name||ps.curMethod.name,$("#locate_"+e).find("dd").click(function(){switch($(this).text()){case'全':$('#field_'+e).children().addClass('ball_Selected');break;case'奇':$('#field_'+e).children().removeClass('ball_Selected').parent().find(":odd").addClass('ball_Selected');break;case'偶':$('#field_'+e).children().removeClass('ball_Selected').parent().find(":even").addClass('ball_Selected');break;case'大':$('#field_'+e).children().removeClass('ball_Selected').filter(function(e){return e>=5}).addClass('ball_Selected');break;case'小':$('#field_'+e).children().removeClass('ball_Selected').filter(function(e){return e<5}).addClass('ball_Selected');break;case'清':$('#field_'+e).children().removeClass('ball_Selected');break;case'质':$('#field_'+e).children().removeClass('ball_Selected').filter(function(e){return-1!=$.inArray(e,[2,3,5,7])}).addClass('ball_Selected');break;case'合':$('#field_'+e).children().removeClass('ball_Selected').filter(function(e){return-1!=$.inArray(e,[4,6,8,9])}).addClass('ball_Selected');break;case'反':$('#field_'+e).children().toggleClass('ball_Selected')}ballBar.computeSingle()}));var i=[];i.length>0&&$.each(i,function(e,t){$(t).appendTo('#selectArea')})}),-1===$.inArray(ps.curMethod.name,['JDX','XYDXDS','XYSB'])&&$('.lotteryNumber ul>li').bind("click",ballBar.ball_Click)},getAssisInfo:function(e){var t="",a=[];if(!$.isArray(ps.missHot.miss)||!$.isArray(ps.missHot.hot))return[];var s=-1;switch(ps.curMethod.name){case"QSZX":case"QSLX":case"QEZX":case"QELX":case"QSIZX":case"WXZX":case"WXLX":case"WXDW":case'SXDW':case"SDQSZX":case"SDQEZX":s=e-1+0;break;case"SIXZX":case"ZSZX":case"ZSLX":s=e-1+1;break;case"SXZX":case"SXLX":s=e-1+2;break;case"EXZX":case"EXLX":s=e-1+3;break;case"YXZX":s=e-1+4}return s>-1&&($.each(ps.missHot.miss[s],function(e,a){t+='<li class="yiLouNum">'+a+"</li>"}),t='<div class="missDIV" id="missHot_'+e+'"><ul class="missHotNumber"><li class="missHotUnit">遗漏:</li><li><ul class="yiLouList" id=yiLouList_'+e+">"+t+"</ul></li></ul></div>",a.push(t),t="",$.each(ps.missHot.hot[s],function(e,a){t+='<li class="yiLouNum">'+a+"</li>"}),t='<div class="hotDIV" id="missHot_'+e+'"><ul class="missHotNumber"><li class="missHotUnit">冷热:</li><li><ul class="yiLouList" id=yiLouList_'+e+">"+t+"</ul></li></ul></div>",a.push(t)),a},ball_Click:function(e){var t=$(this);t.find('span').length>0&&t.find('span').toggleClass('x_spanball_selected'),$(this).toggleClass("ball_Selected"),/\w+_(\d+)/.test($(this).parent().attr("id"));var a=RegExp.$1;$(this).parent().find(".ball_Selected").length>ps.curMethod.field_def[a].max_selected?1==ps.curMethod.field_def[a].max_selected?$(this).siblings(".ball_Selected").removeClass("ball_Selected"):($(this).removeClass("ball_Selected"),parent.layer.alert("当前最多只能选择"+ps.curMethod.field_def[a].max_selected+"个号码",{icon:7})):('JSETDX'==ps.curMethod.name&&$('#locate_'+(1==a?2:1)).find(".ballList_k3no_square li").eq(parseInt($(this).text().substr(0,1))-1).removeClass("ball_Selected"),ballBar.computeSingle())},computeSingle:function(){var e=[];$.each(ps.curMethod.field_def,function(t,a){var s="";ps.curMethod.field_def[t].nums.split(" ");$("#field_"+t+" li").each(function(e){var t=$(this);$(this).hasClass("ball_Selected")&&(1==+$('#quickSelect').data('val')?s+=t.find('span').text()+'_':s+=t.text()+'_')}),-1===s.indexOf("_")?e.push(s):e.push(s.substr(0,s.length-1))});var t=isLegalCode(e);buyBar.updateSingle(t.singleNum);var a=e.join(",");return'JSSTTX'==ps.curMethod.name?a='111_222_333_444_555_666':'JSSLTX'==ps.curMethod.name&&(a='123_234_345_456'),{singleNum:t.singleNum,isDup:t.isDup,code:a}}},initMissHotBar=function(){$("input[name=missHotBtn]").click(missHotBar.missHotBtn_Click),$('input[name=missHotBtn][value="1"]').click()},missHotBar={missHotBtn_Click:function(){"1"==$(this).val()?($("#selectArea .missDIV").removeClass("hidden"),$("#selectArea .hotDIV").addClass("hidden")):($("#selectArea .missDIV").addClass("hidden"),$("#selectArea .hotDIV").removeClass("hidden"))}},initBuyBar=function(){ps.nextProjectCounter=0,buyBar.removeAll(),$("#multiple").click(function(){this.focus(),this.select()}).keyup(buyBar.checkMultiple).keyup(buyBar.updateTotalSingle),$(".xDel").live("click",function(){$(this).parent().remove(),buyBar.updateTotalSingle()}),$('#quickSelect').click(function(){var e=$(this);0===+$(this).data('val')?(e.data('val',1),$('.multiple1').attr('readonly','readonly').css('backgroundColor','#eee').addClass('cur-not').val(''),$('#totalSingleInfo').show(),$('#singleInfo').show(),$('#multiple').val(''),$('.lotteryNumber ul>li').bind('click',ballBar.ball_Click),e.text('一般投注')):(e.data('val',0),$('.multiple1').removeAttr('readonly').css('backgroundColor','').removeClass('cur-not').val(''),$('#totalSingleInfo').hide(),$('#singleInfo').hide(),$('#multiple').val(''),$('.lotteryNumber ul>li').unbind('click',ballBar.ball_Click),$('.ball_Selected').removeClass('ball_Selected'),$('.x_spanball_selected').removeClass('x_spanball_selected'),e.text('快捷投注'))}),$('#choPirze li').click(function(){var e=$('.moneyNum').length;+$('#quickSelect').data('val')||0===e?$('#multiple').val($(this).data('value')):$('.multiple1').val($(this).data('value'))}),$("#clearProjectBtn").click(buyBar.removeAll),$("#inputBtn").click(buyBar.inputBtn_Click),$("#selectCodeBtn").click(buyBar.selectCodeBtn_Click),$("#selectCodeBtnFast").click(buyBar.selectCodeBtnFast),$("#confirmBtn").click(function(){buyBar.confirmBtn_Click(0)}),$("#traceBtn").click(buyBar.traceBtn_Click),$(".selectRandomBtn").click(buyBar.selectRandomBtn_Click),$("#plusBtn").click(buyBar.plusBtn_Click),$("#minusBtn").click(buyBar.minusBtn_Click)},buyBar={selectCodeBtnFast:function(){buyBar.selectCodeBtn_Click(),buyBar.confirmBtn_Click(1)},plusBtn_Click:function(){var e=$("#multiple").val();$("#multiple").val(parseInt(e)+1),buyBar.checkMultiple(),buyBar.updateTotalSingle()},minusBtn_Click:function(){var e=$("#multiple").val();parseInt(e)>1&&($("#multiple").val(e-1),buyBar.checkMultiple(),buyBar.updateTotalSingle())},inputBtn_Click:function(e){ps.curMethod=e.data,ballBar.showInput();var t=$(this),a=t.attr("pid");$("#"+a).find('.method').removeClass("method_selected"),t.addClass("method_selected"),$("#selectCodeBtn").addClass("selectCodeBtn_selected"),$(".selectRandomBtn").parent().show(),$("#selectArea").removeClass("N-selected")},selectCodeBtn_Click:function selectCodeBtn_Click(){if($("#inputTA").length>0){var allCodes=[],str=$.trim($("#inputTA").val());if(0==str.length)return!1;var arrs=str.split(/\s+|,|，|;|；/),arrsHHZX=[],arr=tool.uniqueArr(arrs),re=eval("/^\\d{"+propLen(ps.curMethod.field_def)+"}$/");for(var i in arr)allCodes.push(arr[i].split(""));var ob={singleNum:1,isDup:0},strPart1='<li><span class="width1" mid="'+ps.curMethod.method_id+'" mname="'+ps.curMethod.name+'">',strPart2=ps.curMethod.cname+'</span><span class="width2">';if(allCodes.length<=1e3)for(var i in allCodes){var ob=isLegalCode(allCodes[i]),singleAmount=number_format(2*ob.singleNum*ps.curMode,3),strPart3='</span><span class="width3">'+ob.singleNum+'注</span><span class="width4">￥'+singleAmount+'</span><span class="xDel">X</span></li>';if(ob.isDup)return parent.layer.alert("您输入的号码有误，请重新检查输入!",{icon:7}),!1;ps.nextProjectCounter++,$(strPart1+strPart2+allCodes[i].join(",")+strPart3).appendTo("#projectList")}else{var allCodesStr='',allProjectsStr='';for(var i in allCodes){allCodesStr&&(allCodesStr+='|'),allCodesStr+=allCodes[i].join(",");var ob=isLegalCode(allCodes[i]);if(ob.isDup)return parent.layer.alert("您输入的号码有误，请重新检查输入!",{icon:7}),!1}var singleAmount=number_format(2*allCodes.length*ps.curMode,3),strPart3='</span><span class="width3">'+allCodes.length+'注</span><span class="width4">￥'+singleAmount+'</span><span class="xDel">X</span></li>';ps.nextProjectCounter=allCodes.length,allProjectsStr+=strPart1+strPart2+allCodesStr+strPart3,$(allProjectsStr).appendTo("#projectList")}buyBar.updateTotalSingle(),$("#delTA").click()}else{var ob=ballBar.computeSingle();if(0==ob.singleNum)return!1;ps.nextProjectCounter++;var singleAmount=number_format(2*ob.singleNum*ps.curMode,3);$('<li><span class="width1" mid="'+ps.curMethod.method_id+'" mname="'+ps.curMethod.name+'">'+ps.curMethod.cname+'</span><span class="width2">'+ob.code+'</span><span class="width3">'+ob.singleNum+'注</span><span class="width4">￥'+singleAmount+'</span><span class="xDel">X</span></li>').appendTo("#projectList"),buyBar.updateTotalSingle()}},rxInputCodes:function(e,t){for(var a=['-','-','-','-','-'],s=e[0];s<=e[e.length-1];s++)a[s]=''},removeAll:function(){$("#token").val(""),$("#projectList").empty(),ps.nextProjectCounter=0,$("#totalSingleInfo input").val(""),buyBar.updateTotalSingle(),ballBar.reset(),$('.multiple1').val(''),$('.x_spanball_selected').removeClass('x_spanball_selected')},updateSingle:function(e){var t=number_format(2*e*ps.curMode,3);$("#betCount").text(e),$("#betAmount").text(t);var a=0==$('#projectList li').length?1:$('#projectList li').length;if(e>0){$("#selectCodeBtn").parent().addClass('selectCodeBtn_selected');var s=$("#totalBetAmount").text(),r=(n=$('#curPrizeSpan').find("option:selected").text()).split('/')[0];$("#totalWin").text(number_format(r*a*$("#multiple").val()-s-t,3))}else{$("#selectCodeBtn").parent().removeClass('selectCodeBtn_selected');var s=$("#totalBetAmount").text(),n=$('#curPrizeSpan').find("option:selected").text(),r=n.split('/')[0];$("#totalWin").text(number_format(r*a*$("#multiple").val()-s,3))}},updateTotalSingle:function(){var e=0;$("#projectList").children("li").each(function(t){var a=$(this).children();e+=parseInt(a.eq(2).text()),a.eq(3).text("￥"+number_format(2*parseInt(a.eq(2).text())*$("#multiple").val()*ps.curMode,3))}),e>0?$("#confirmBtn").addClass('CantapCodeBtn_selected'):$("#confirmBtn").removeClass('CantapCodeBtn_selected');var t=0==$('#projectList li').length?1:$('#projectList li').length;$("#totalBetCount").text(e);var a=number_format(2*e*$("#multiple").val()*ps.curMode,3);$("#totalBetAmount").text(a);var s=$('#curPrizeSpan').find("option:selected").text().split('/')[0];$("#totalWin").text(number_format(s*t*$("#multiple").val()-a,3))},checkMultiple:function(){var e=$("#multiple").val().replace(/^0|[^\d]/g,'');$("#multiple").val(e);return!(parseInt(e)>5e4)||(parent.layer.alert("请填写投注金额",{icon:7}),$("#multiple").val(5e4),!0)},confirmBtn_Click:function(e){var t='',a=0,s=0,r=0,n='',i=+$('#quickSelect').data('val');if(['JDX','XYDXDS','XYSB'].includes(ps.curMethod.name)&&0===i)t='xbuy',n=ps.curMethod.method_id.toString()+':',$('.multiple1').each(function(e,t){var r=$(t),i=parseInt(r.val()),l=r.data('ball');if(!/^[1-9]*[1-9][0-9]*$/.test(i))return!0;ps.curMethod.name,n+=l+'+'+i+'|',a+=i,s++}),n=rtrim(n,'|'),r=1;else{$("#projectList").empty(),buyBar.selectCodeBtn_Click(),t='buy';var l={};if($("#projectList").children("li").each(function(e){$(this).children().eq(0).attr("mname");l[$(this).children().eq(0).attr("mid")]||(l[$(this).children().eq(0).attr("mid")]={}),l[$(this).children().eq(0).attr("mid")][e]=$(this).children().eq(1).text()}),$.each(l,function(e,t){n+=e+':',$.each(t,function(e,t){n+=t+'|'}),n=rtrim(n,'|'),n+='#'}),s=$("#betCount").text(),r=$("#multiple").val(),a=s*r,!/^[1-9]*[1-9][0-9]*$/.test(r))return parent.layer.alert("请填写投注金额",{icon:7}),$("#multiple").val(""),!1}if(n=rtrim(n,'#'),!ps.canBuy)return parent.layer.alert("该期已截止购买",{icon:7}),!1;if(0==n.length)return parent.layer.alert("请先选择号码再投注",{icon:7}),!1;$("#token").val(getRandChar(32));var o={op:t,lotteryId:ps.lotteryId,issue:ps.curIssueInfo.issue,curRebate:ps.rebateGapList[ps.curPrizeIndex].rebate,modes:ps.curMode,codes:n,xgame:1,multiple:'xbuy'===t?1:$("#totalSingleInfo input").val(),token:$("#token").val()},c=0;if(0==e){1==ps.curMode||(.5==ps.curMode||(.1==ps.curMode||(.05==ps.curMode||ps.curMode)));var u='<div id="buy_message">请确认以下投注内容：<br>************************<br>单倍注数：'+s+"注<br>总 金 额：￥"+a+"<br>************************<br></div>";parent.layer.confirm(u,{icon:7},function(e){if(parent.$('.xubox_botton').empty(),parent.$('.xubox_botton').html('<div class="LoadingShow"><span class="Loading_icon"></span><span class="Loading_Font">投注中，请稍后...</span></div>'),1==(c+=1)){$.post("?c=game&a=play",o,function(t){if(0==t.errno){drawBar.todayBuyBtnNew_Click(),buyBar.removeAll();var s='<div id="buy_success_message">购买成功!<br>************************<br>订单编号：'+t.pkgnum+"<br>投注期号："+ps.curIssueInfo.issue+"<br>投注总额：￥"+a+"<br>************************<br></div>";parent.layer.close(e),parent.layer.alert(s,{icon:1}),parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")})}else 65534==t.errno||(parent.layer.close(e),parent.layer.alert("购买失败:"+t.errstr,{icon:2}),console.log("错误代码:"+t.errno));showBalance()},"json").fail(function(t){parent.layer.close(e),parent.layer.alert("网络异常，请在“游戏记录-订单查询”中确认该订单是否提交成功。",{icon:2})});var t=setInterval(function(){0==(c=0)&&clearInterval(t)},5e3)}},function(){$("#token").val(""),$("#projectList").empty(),ps.nextProjectCounter=0,$("#totalSingleInfo input").val("")})}else parent.$('.xubox_botton').empty(),parent.$('.xubox_botton').html('<div class="LoadingShow"><span class="Loading_icon"></span><span class="Loading_Font">投注中，请稍后...</span></div>'),$.post("?c=game&a=play",o,function(e){if(0==e.errno){drawBar.todayBuyBtnNew_Click(),buyBar.removeAll();var t='<div id="buy_success_message">购买成功!<br>************************<br>订单编号：'+e.pkgnum+"<br>投注期号："+ps.curIssueInfo.issue+"<br>投注总额：￥"+a+"<br>模&nbsp;&nbsp;式："+(1==ps.curMode?"2元":.5==ps.curMode?"1元":.1==ps.curMode?"2角":.05==ps.curMode?"1角":.01==ps.curMode?"分":"厘")+"模式<br>倍&nbsp;&nbsp;数："+r+"倍<br>************************<br></div>";parent.layer.alert(t,{icon:1}),parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")})}else 65534==e.errno||(parent.layer.alert("购买失败:"+e.errstr,{icon:2}),console.log("错误代码:"+e.errno));showBalance()},"json").fail(function(e){parent.layer.alert("网络异常，请在“游戏记录-订单查询”中确认该订单是否提交成功。",{icon:2})});parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")})},traceBtn_Click:function(){if($("#traceBtn").attr("mark",1),0==$("#projectList li").length)return parent.layer.alert("请先选择投注号码",{icon:7}),!1;$("#traceBtn").attr('disabled',"true");var e=[];$("#projectList li").each(function(t){-1==$.inArray($(this).find("span:first").attr("mid"),e)&&e.push($(this).find("span:first").attr("mid"))}),$.ajax({url:"?c=game&a=play",type:"POST",data:{op:"getTracePage",lotteryId:ps.lotteryId,mids:e.join(",")},cache:!1,dataType:"json",timeout:3e4,success:function(t){if($("#traceBtn").removeAttr("disabled"),0==t.errno){ps.canTraceIssues=t.issues,ps.traceMethodPrize=t.prize,ps.tracePrizeLimit=t.prizeLimit;var a=$('#traceHtml'),s=traceFunc.showTracePage(a),r=[250,251,360,368,28,56,101,202,298,34,57,102,203,304,4,52,106,193,274,5,53,107,194,275,81,108,109,195,351,42,75,115,219,312,43,76,116,220,313,38,71,120,214,308,39,72,121,215,309,82,110,122,216,352,86,93,126,228,356,87,94,127,229,357,88,95,128,230,358,47,78,141,222,317,235,236,386,25,155,173,189,24,154,172,188];0!=t.prize&&1==e.length&&-1==$.inArray(parseInt(ps.curMethod.method_id),r)||$("#multipleStyle2").attr("disabled",!0),$("input[name=multipleStyle]").unbind("click").click(traceFunc.multipleStyle_Click),$("#confirmTraceBtn").unbind("click").click(function(){traceFunc.confirmTraceBtn_Click()&&parent.layer.close(s)}),$("#cancelTraceBtn").unbind("click").click(function(){traceFunc.cancelTraceBtn_Click(),parent.layer.close(s)}),$("#startIssue").unbind("change").change(traceFunc.startIssue_Change),$("#traceNum").unbind("click").click(function(){this.focus(),this.select()}).keyup(buyBar.checkMultiple).keyup(traceFunc.traceNum_Keyup),$(".multipleNumDropdown").mouseover(function(){$(this).addClass('multipleNumDropdownSelected')}).mouseout(function(){$(this).removeClass('multipleNumDropdownSelected')}).unbind("click").click(function(){$(this).parent().find('.multipleNumValue').toggle()}),$(".multipleNumValue li").mousemove(function(){$(this).addClass('multipleNumValueSelected')}).mouseout(function(){$(this).removeClass('multipleNumValueSelected')}).unbind("click").click(function(){var e=$(this).parent().siblings('.zhuiz_number_e2');e.val(parseInt($(this).text())),$.proxy(buyBar.checkMultiple,e.get(0))(),'style1BodyMultiple'==e.attr('id')?($('.style1BodyMultiple').val(e.val()).each(function(){$.proxy(traceFunc.style1BodyMultiple_Keyup,$(this).get(0))()}),traceFunc.updateTotalMoney()):'traceNum'==e.attr('id')&&$.proxy(traceFunc.traceNum_Keyup,e.get(0))(),$(this).parent().slideUp('fast')}),$('#style1BodyMultiple').unbind("click").click(function(){this.focus(),this.select()}).keyup(buyBar.checkMultiple).keyup(function(){isNaN(parseInt($(this).val()))&&$(this).val("1"),$('.style1BodyMultiple').val($(this).val()).each(function(){$.proxy(traceFunc.style1BodyMultiple_Keyup,$(this).get(0))()}),traceFunc.updateTotalMoney()}),$('#checkAll').unbind("click").live('click',function(){$(this).is(':checked')?$('.checkbox input[type=checkbox]').attr('checked',!0).parent().parent().css('color',''):$('.checkbox input[type=checkbox]').attr('checked',!1).parent().parent().css('color','#ccc'),traceFunc.updateTotalMoney()}),$('.checkbox input[type=checkbox]').unbind("click").live('click',function(){if('checkAll'!=$(this).attr('id')){$(this).is(':checked')?$(this).parent().parent().css('color',''):$(this).parent().parent().css('color','#ccc');var e=$(this).parent().parent().index();$.proxy(traceFunc.style1BodyMultiple_Keyup,$('#style1BodyMultiple_'+e).get(0))(),traceFunc.updateTotalMoney()}}),$("#singleNum").text($("#totalBetCount").text()),$("#issuesNum2").text("1"),$("#multipleStyle1").click(),traceFunc.updateTotalMoney(),null!=runTime.traceRemainTimer&&window.clearInterval(runTime.traceRemainTimer),runTime.traceRemainTimer=window.setInterval(traceFunc.traceRemain_Timer_Handle,1e3)}else alert("系统繁忙，请稍候再试(01)")},error:function(e,t,a){$("#traceBtn").removeAttr("disabled"),-1!=a.indexOf("a=logout")||-1!=a.indexOf("a=login")?(alert("您已经退出，请重新登录"),window.location.href="?a=logout"):alert("操作超时，请刷新页面.")}})},selectRandom:function(){var e,t,a=propLen(ps.curMethod.field_def),s={},r=[];switch(ps.curMethod.name){case'WXDW':s.WXDW=1;case'REZX':s.REZX=2;case'RSZX':s.RSZX=3;for(o=0;o<a;o++)r[o]="-";for(var n=[],i=1;i<=s[ps.curMethod.name];i++){count=Math.floor(Math.random()*a+1);m=!1;for(var l in n)if(n[l]===count){m=!0;break}if(m)i--;else{n.push(count),e=parseInt(ps.curMethod.field_def[i].max_selected),t=Math.floor(Math.random()*e);f=(h=ps.curMethod.field_def[i].nums.split(" "))[t];r[count-1]=f}}break;case'RSIZX':s.RSIZX=4;for(var o=0;o<a;o++)r[o]="-";for(var n=[],i=1;i<=s[ps.curMethod.name];i++){count=Math.floor(Math.random()*a+1);m=!1;for(var l in n)if(n[l]===count){m=!0;break}if(m)i--;else{n.push(count),e=parseInt(ps.curMethod.field_def[i].max_selected),t=Math.floor(Math.random()*e);f=(h=ps.curMethod.field_def[i].nums.split(" "))[t];r[count-1]=f}}break;case'EXZUX':s.EXZUX=[2];case'SXZS':s.SXZS=[2];case'SXZL':s.SXZL=[3];case'QEZUX':s.QEZUX=[2];case'QSZS':s.QSZS=[2];case'QSZL':s.QSZL=[3];case"ZSZS":s.ZSZS=[2];case"ZSZL":s.ZSZL=[3];case'ZUX24':s.ZUX24=[4];case'ZUX12':s.ZUX12=[1,2];case'ZUX6':s.ZUX6=[2];case'ZUX4':s.ZUX4=[1,1];case'ZUX120':s.ZUX120=[5];case'ZUX60':s.ZUX60=[1,3];case'ZUX30':s.ZUX30=[2,1];case'ZUX20':s.ZUX20=[1,2];case'ZUX10':s.ZUX10=[1,1];case'ZUX5':s.ZUX5=[1,1];for(var c=[],i=1;i<=a;i++){var u=[],d="";e=parseInt(ps.curMethod.field_def[i].max_selected);for(var p=1;p<=s[ps.curMethod.name][i-1];p++){var m=!1;t=Math.floor(Math.random()*e);for(var l in c)if(c[l]===t){m=!0;break}m?p--:(c.push(t),u.push(t),d=u.sort().join(''))}r.push(d)}break;default:for(i=1;i<=a;i++){e=parseInt(ps.curMethod.field_def[i].max_selected),t=Math.floor(Math.random()*e);var h=ps.curMethod.field_def[i].nums.split(" "),f=h[t];r.push(f)}}var y=isLegalCode(r),v=r.join(",");if(0==y.singleNum)return!1;ps.nextProjectCounter++;var b=number_format(2*y.singleNum*ps.curMode,3);$('<li><span class="width1" mid="'+ps.curMethod.method_id+'" mname="'+ps.curMethod.name+'">'+ps.curMethod.cname+'</span><span class="width2">'+v+'</span><span class="width3">'+y.singleNum+'注</span><span class="width4">￥'+b+'</span><span class="xDel">X</span></li>').appendTo("#projectList"),buyBar.updateTotalSingle()},selectRandomBtn_Click:function(){$(this).attr('disabled','true');var e,t=$(this).attr('num');for(e=1;e<=t;e++)buyBar.selectRandom();$(this).removeAttr('disabled')}},traceFunc={multipleStyle_Click:function(){$("#startIssue").get(0).selectedIndex=0,$("#traceNum").val(1),$("#style1BodyMultiple").val(1),1==$(this).val()?($(".style1BodyMultiple").live("click",function(){this.focus(),this.select()}).live("keyup",buyBar.checkMultiple).live("keyup",traceFunc.style1BodyMultiple_Keyup),traceFunc.updateStyle1(),$(".multipleNum").eq(0).show(),$("#multipleStyle1DIV").show(),$("#multipleStyle2DIV").hide()):($("#startMultiple").click(function(){this.focus(),this.select()}),$("#beitouToolSmainbtzk input").click(function(){$(this).parent().click()}).focus(function(){this.select()}),$("#beitouToolSmainbtzk li").click(function(){$(this).addClass("checked").siblings().removeClass("checked"),$(this).find("input[name=profitStyle]").attr("checked",!0)}),$(".multipleNum").eq(0).hide(),$("#generalPlanBtn").click(traceFunc.generalPlanBtn_Click),$("#issuesNum2").text("1"),$("#traceTotalAmount").text(number_format(2*parseInt($("#singleNum").text())*ps.curMode,3)),$("#style2Body").empty(),$("#startMultiple").val("1"),$("input[name=totalProfitRate]").val("10"),$("input[name=first5Rate]").val("5"),$("input[name=first5RateValue]").val("10"),$("input[name=laterRateValue]").val("5"),$("input[name=totalProfit]").val("100"),$("input[name=first5Profit]").val("5"),$("input[name=first5ProfitValue]").val("100"),$("input[name=laterProfitValue]").val("50"),$("#beitouToolSmainbtzk li:first").click(),$("#multipleStyle1DIV").hide(),$("#multipleStyle2DIV").show())},startIssue_Change:function(){"1"==$("input[name=multipleStyle]:checked").val()?traceFunc.updateStyle1():traceFunc.generalPlanBtn_Click()},traceNum_Keyup:function(){"1"==$("input[name=multipleStyle]:checked").val()&&traceFunc.updateStyle1()},traceRemain_Timer_Handle:function(){var e=subTime(ps.curRemainTime);if(ps.curRemainTime>0)$("#remainTimerLabel").text(e.hour+":"+e.minute+":"+e.second),$("#traceBtn").attr("mark",0);else{clearInterval(runTime.traceRemainTimer);var t=subTime(ps.curWaitOpenTime);if($("#remainTimerLabel").text(t.hour+":"+t.minute+":"+t.second),runTime.traceWaitOpenTimer=window.setInterval(traceFunc.traceWaitOpen_Timer_Handle,100),parent.layer.alert("第"+ps.curIssueInfo.issue+"期投注时间已结束，投注内容将进入到下一期！",{icon:7}),1!=$("#traceBtn").attr("mark"))if($("#startIssue").children(":first").remove(),$("#startIssue").children(":first").text($("#startIssue").children(":first").text()+"(当前期)"),"1"==$("input[name=multipleStyle]:checked").val()){var a=[];$(".style1BodyMultiple").each(function(){a.push(this.value)}),traceFunc.updateStyle1(),$(".style1BodyMultiple").each(function(){this.value=a.pop()})}else $("#style2Body li").length>0&&traceFunc.generalPlanBtn_Click()}},traceWaitOpen_Timer_Handle:function(){var e=subTime(ps.curWaitOpenTime);$("#remainTimerLabel").text(e.hour+":"+e.minute+":"+e.second),ps.curWaitOpenTime<0&&(clearInterval(runTime.traceWaitOpenTimer),runTime.traceRemainTimer=window.setInterval(traceFunc.traceRemain_Timer_Handle,1e3))},style1BodyMultiple_Keyup:function(){var e=parseInt($(this).val());(isNaN(e)||e<1||e>99999)&&(e=1),/\w+_(\d+)/.test($(this).attr("id"));var t=RegExp.$1;if(0==t)r=0;else{for(var a,s=t-1;s>=0;s--)if($('#check_'+s).is(':checked')){a=s;break}var r=parseFloat($("#totalMoney_"+a).text())}$("#style1BodyMultiple_"+t).val(e);var n=parseInt($("#singleNum").text())*e*2*ps.curMode;for($("#curMoney_"+t).text(number_format(n,3));t<=$("#style1Body li").length;)$('#check_'+t).is(':checked')&&(r+=parseFloat($("#curMoney_"+t).text()),$("#totalMoney_"+t).text(number_format(r,3))),t++;traceFunc.updateTotalMoney()},updateStyle1:function(){var e=-1;if($.each(ps.canTraceIssues,function(t,a){a==$("#startIssue").val()&&(e=t)}),-1==e)throw alert("数据出错"),"数据出错";isNaN(parseInt($("#traceNum").val()))&&$("#traceNum").val("1"),$('#style1BodyMultiple').val("1");var t=ps.canTraceIssues.slice(e,e+parseInt($("#traceNum").val()));t.length<$("#traceNum").val()&&(parent.layer.alert("最多只能追"+t.length+"期",{icon:7}),$("#traceNum").val(t.length)),$("#style1Body").empty();var a,s=0;$('#checkAll').attr('checked',!0),$.each(t,function(e,t){a=2*parseInt($("#singleNum").text())*ps.curMode,s+=a;var r='<li id="traceIssueLI_'+e+'"><span class="checkbox"><input type="checkbox" id="check_'+e+'" checked /></span><span id="traceIssue_'+e+'">'+t+'</span><span><input type="text" value="1" id="style1BodyMultiple_'+e+'" class="beitouToolsinput style1BodyMultiple" maxlength="5" /></span><span id=curMoney_'+e+">"+number_format(a,3)+"</span><span id=totalMoney_"+e+">"+number_format(s,3)+"</span></li>";$("#style1Body").append(r),$(".style1BodyMultiple").bind("click",function(){this.focus(),this.select()}).bind("keyup",buyBar.checkMultiple).bind("keyup",traceFunc.style1BodyMultiple_Keyup)}),traceFunc.updateTotalMoney()},confirmTraceBtn_Click:function(){var e,t,a,s,r,n;if($("#projectList").children("li").each(function(i){e=$(this).children(),s=e.eq(0).attr("mid"),r=e.eq(1).text(),n=!1,a||(a=s,t=s+":",n=!0),a!=s?(t+="#"+s+":",a=s,t+=r):t+=1==n?r:"|"+r}),!ps.canBuy)return parent.layer.alert("该期已截止购买",{icon:7}),!1;if(0==t.length)return parent.layer.alert("请先选择号码再投注",{icon:7}),!1;var i=[];if("1"==$("input[name=multipleStyle]:checked").val()?$("#style1Body li").each(function(e){if($(this).find("input[type=checkbox]").is(':checked')){var t=$(this).find("span:eq(1)").text(),a=$(this).find("input[type=text]").val();i.push({issue:t,multiple:a})}}):$("#style2Body li").each(function(e){var t=$(this).find("span:eq(0)").text(),a=$(this).find("span:eq(1)").text();i.push({issue:t,multiple:a})}),!i||i.length<=0)return parent.layer.alert("追号的期数不能为空",{icon:7}),!1;$("#token").val(getRandChar(32));var l=$("#traceTotalAmount").text(),o=$("input[name=stopOnWin]").attr("checked")?1:0,c='<div id="buy_message">请确认以下投注内容：<br>************************<br>是否追号：是<br>单倍注数：'+$("#totalBetCount").text()+"注<br>总 金 额：￥"+l+"<br>超始期号："+i[0].issue+"<br>追号期数："+i.length+"<br>模&nbsp;&nbsp;式："+(1==ps.curMode?"2元":.5==ps.curMode?"1元":.1==ps.curMode?"2角":.05==ps.curMode?"1角":.01==ps.curMode?"分":"厘")+"模式<br>************************<br></div>";return traceFunc.destroyTracePage(),parent.layer.confirm(c,{icon:7},function(e){$.post("?c=game&a=play",{op:"buy",lotteryId:ps.lotteryId,issue:ps.curIssueInfo.issue,curRebate:ps.rebateGapList[ps.curPrizeIndex].rebate,modes:ps.curMode,codes:t,traceData:i,stopOnWin:o,token:$("#token").val()},function(t){if(0==t.errno){buyBar.removeAll(),drawBar.todayBuyBtnNew_Click();var a='<div id="buy_success_message">追号订单成功!<br>************************<br>订单编号：'+t.pkgnum+"<br>起始期号："+i[0].issue+"<br>追号期数："+i.length+"<br>追号总额：￥"+l+"<br>模&nbsp;&nbsp;式："+(1==ps.curMode?"2元":.5==ps.curMode?"1元":.1==ps.curMode?"2角":.05==ps.curMode?"1角":.01==ps.curMode?"分":"厘")+"模式<br>************************<br></div>";parent.layer.close(e),parent.layer.alert(a,{icon:1}),parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")})}else parent.layer.close(e),parent.layer.alert("追号失败:"+t.errstr+t.errno,{icon:2})},"json").fail(function(t){parent.layer.close(e),layer.alert("网络异常，请在“游戏记录-追号记录”中确认该订单是否提交成功。",{icon:2})}),parent.$('.xubox_botton').empty(),parent.$('.xubox_botton').html('<div class="LoadingShow"><span class="Loading_icon"></span><span class="Loading_Font">投注中，请稍后...</span></div>')}),parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")}),!0},cancelTraceBtn_Click:function(){traceFunc.destroyTracePage()},showTracePage:function(e){var t=parent.layer.open({type:1,title:'追号管理',offset:['50px',''],area:['700px','auto'],content:e,success:function(e){var t='';$.each(ps.canTraceIssues,function(e,a){t+='<option value="'+a+'">'+a+'期</option>'}),$("#startIssue").html(t).children(":first").text($("#startIssue").children(":first").text()+"(当前期)"),$('#maxTraceCount').html(ps.canTraceIssues.length)},close:traceFunc.cancelTraceBtn_Click});return $(document).one('keyup',function(e){27==(e.keyCode?e.keyCode:e.which)&&(traceFunc.cancelTraceBtn_Click(),parent.layer.close(t))}),t},destroyTracePage:function(){clearInterval(runTime.traceRemainTimer),clearInterval(runTime.traceWaitOpenTimer)},updateTotalMoney:function(){var e=0;"1"==$("input[name=multipleStyle]:checked").val()?($("#style1Body li").each(function(t){$(this).find("input[type=checkbox]").is(':checked')&&(e+=parseInt($(this).find("input[type=text]").val()))}),$("#issuesNum2").text($("#style1Body li input[type=checkbox]:checked").length)):($("#style2Body li").each(function(t){e+=parseInt($(this).find("span:eq(1)").text())}),$("#issuesNum2").text($("#style2Body li").length)),$("#traceTotalAmount").text(number_format(parseInt($("#singleNum").text())*e*2*ps.curMode,3))},generalPlanBtn_Click:function(){var e=function(e,t,a,s,r){if(e=isNaN(parseInt(e))?-1:parseInt(e),t=isNaN(parseInt(t))?-1:parseInt(t),a=isNaN(parseFloat(a))?-1:parseFloat(a),s=isNaN(parseFloat(s))?-1:parseFloat(s),r=parseFloat(r),e<0||t<0||a<0||s<0||r<=0)return 0;var n=0;return a>0&&(t>0?(n=(t/100+1)*s/(r-a*(t/100+1)),n=Math.ceil(round(n,3))):n=1,n>0&&n<e&&(n=e)),n},t=-1;if($.each(ps.canTraceIssues,function(e,a){a==$("#startIssue").val()&&(t=e)}),-1!=t){isNaN(parseInt($("#traceNum").val()))&&$("#traceNum").val("1");var a=ps.canTraceIssues.slice(t,t+parseInt($("#traceNum").val()));a.length<$("#traceNum").val()&&(parent.layer.alert("最多只能追"+a.length+"期",{icon:7}),$("#traceNum").val(a.length)),$("#style2Body").empty();var s,r,n=[],i=0,l=2*parseInt($("#singleNum").text())*ps.curMode,o=ps.traceMethodPrize*(ps.rebateGapList[ps.curPrizeIndex].prize/(ps.maxCombPrize*ps.prizeRate))*ps.curMode;$.each(a,function(t,a){if(1==$("input[name=profitStyle]:checked").val())if(0==t){if(s=parseInt($("#startMultiple").val()),r=s*parseInt($("#singleNum").text())*2*ps.curMode,(s*o-r)/r*100<$("input[name=totalProfitRate]").val())return parent.layer.alert("该计划无法实现，请调整目标",{icon:7}),!1}else s=e($("#startMultiple").val(),$("input[name=totalProfitRate]").val(),l,i,o);else if(2==$("input[name=profitStyle]:checked").val())if(0==t){if(s=parseInt($("#startMultiple").val()),r=s*parseInt($("#singleNum").text())*2*ps.curMode,(s*o-r)/r*100<$("input[name=first5RateValue]").val())return parent.layer.alert("该计划无法实现，请调整目标",{icon:7}),!1}else s=t<$("input[name=first5Rate]").val()?e($("#startMultiple").val(),$("input[name=first5RateValue]").val(),l,i,o):e($("#startMultiple").val(),$("input[name=laterRateValue]").val(),l,i,o);else 3==$("input[name=profitStyle]:checked").val()?(s=Math.ceil(round((parseInt($("input[name=totalProfit]").val())+i)/(o-2*parseInt($("#singleNum").text())*ps.curMode),3)))<$("#startMultiple").val()&&(s=$("#startMultiple").val()):4==$("input[name=profitStyle]:checked").val()&&(s=t<$("input[name=first5Profit]").val()?Math.ceil(round((parseInt($("input[name=first5ProfitValue]").val())+i)/(o-2*parseInt($("#singleNum").text())*ps.curMode),3)):Math.ceil(round((parseInt($("input[name=laterProfitValue]").val())+i)/(o-2*parseInt($("#singleNum").text())*ps.curMode),3)));return 0==s?(parent.layer.alert("您输入的参数有误，必须为正整数",{icon:7}),!1):s<0?(parent.layer.alert("该计划不可能实现，请调整目标",{icon:7}),!1):s*o>ps.tracePrizeLimit?(parent.layer.alert("该计划超出无法实现，请调整目标",{icon:7}),!1):(r=s*parseInt($("#singleNum").text())*2*ps.curMode,i+=r,void n.push({issue:a,multiple:s,curMoney:number_format(r,2),totalMoney:number_format(i,2),curPrize:number_format(s*o,2),totalProfit:number_format(s*o-i,2),totalProfitRate:round((s*o-i)/i,2)}))}),traceFunc._showPlan(n)}},_showPlan:function(e){$.each(e,function(e,t){var a='<li><span class="spanWidth90px">'+t.issue+'</span><span class="spanWidth50px">'+t.multiple+'</span><span class="spanWidth70px">'+t.curMoney+'</span><span class="spanWidth70px">'+t.totalMoney+'</span><span class="spanWidth70px">'+t.curPrize+'</span><span class="spanWidth70px">'+t.totalProfit+'</span><span class="spanWidth70px">'+Math.round(100*t.totalProfitRate)+"%</span></li>";$("#style2Body").append(a)}),traceFunc.updateTotalMoney()}},initDrawBar=function(){$("#curLotteryName").text(ps.lotteryName),$("#curLotteryName2").text(ps.lotteryName),$("#todayIssuesHead").html('<li class="width:30%">期号</li><li class="width:70%">开奖号</li><li class="width55px">前三组态</li><li class="width55px">后三组态</li>'),$("#todayDrawBtn").find(drawBar.todayDrawBtn_Click),$("#prizeRankBtn").click(drawBar.prizeRankBtn_Click),drawBar.todayBuyBtnNew_Click(),$.each(ps.openedIssues,function(e,t){t.prop=drawBar.getMoreInfo(t.code),ps.todayDrawList.push(t)}),$("#prizeRankBtn").click(),drawBar.getCurIssue(drawBar.init),$('#thisIssueNumUL').live({mouseenter:function(){''!=$('#original_code').html()&&$('#original_code').fadeIn(200)},mouseleave:function(){$('#original_code').hide().stop()}})},drawBar={init:function(){if(runTime.remainTimer=window.setInterval(drawBar.showCurIssue_Timer,1e3),""==ps.lastIssueInfo.code)ps.getLastOpenTime=0,clearInterval(runTime.getLastOpenTimer),runTime.getLastOpenTimer=window.setInterval(drawBar.getLastOpen_Timer,1e3),$("#thisIssueInfo").addClass("lock"),ps.canBuy=!1,$("#thisIssueSpan").text(ps.lastIssueInfo.issue);else{var e=ps.todayDrawList[0];if(ps.lastIssueInfo.issue!=e.issue){var t=ps.lastIssueInfo,a=drawBar.getMoreInfo(t.code);if(t.prop=a,ps.todayDrawList.unshift(t),$("#todayDrawBtn").hasClass("cur")){var s=ps.todayDrawList[0],r='<ul><li class="width80px">'+s.issue+'</li><li class="width60px">'+s.code+'</li><li class="width53px">'+s.prop.qszt+'</li><li class="width53px">'+s.prop.hszt+"</li></ul>";$("#todayIssuesBody").prepend(r)}}}var n;null!=ps.todayDrawList[0].code&&(n=ps.todayDrawList[0].code.split("")),$('#thisIssueNumUL').empty().hide(),$('#pendingText').show(),null!=n&&$.each(n,function(e,t){$('#thisIssueNumUL').append('<span class="pendingBall"></span>')}),$('#thisIssueNumUL').append('<span class="black">=</span>'),$('#thisIssueNumUL').append('<span></span>'),drawBar.showLastDraw(),ps.canBuy=!0},getCurIssue:function(e){$.ajax({url:"?c=game&a=play",type:"POST",data:{op:"getCurIssue",lotteryId:ps.lotteryId},cache:!1,dataType:"json",timeout:3e4,success:function(t){if(0==t.errno)if(0!=t.kTime){$('.secondBtn').attr("disabled","disabled"),$('.secondBtn').css("background","#ccc"),$('#traceBtn').attr("disabled","disabled"),$('#traceBtn').css("background","#ccc"),$('#confirmBtn').attr("disabled","disabled"),$('#confirmBtn').css("background","#ccc url(../images/light_blue/confirmBtn.png) no-repeat 11px 6px"),$('#quickSelect').attr('disabled','disabled'),$('#quickSelect').css('background','#ccc'),$('#lastIssueSpan').text('**'),$('#curIssueSpan').text('**'),$('#thisIssueSpan').text('*************');var a=t.kTime/1e3;window.setInterval(function(){var e=subTime(--a),t='<span style="font-size: 26px;color: red; text-align: center;   margin-top: 20px;">休市中...</span>';t+="<div style='font-size: 18px;'><span>距离下次开市:"+e.hour+"</span><em>:</em><span>"+e.minute+"</span><em>:</em><span>"+e.second+"</span></div>",$('#pendingText').html(t)},1e3),window.setTimeout(function(){clearInterval(runTime.waitOpenTimer),window.location.reload()},t.kTime)}else ps.curIssueInfo=t.issueInfo,ps.curServerTime=t.serverTime,ps.curRemainTime=getTS(ps.curIssueInfo.end_time)-getTS(ps.curServerTime),ps.curWaitOpenTime=8,ps.lastIssueInfo=t.lastIssueInfo,t.lastIssueInfo&&ps.counters>0&&todayGetCurIssue(t.lastIssueInfo),ps.counters++,"function"==typeof e&&e();else alert("系统繁忙，请稍候再试(02)")},error:function(e,t,a){-1!=a.indexOf("a=logout")||-1!=a.indexOf("a=login")?(top.layer.alert("您已经超时退出，请重新登录",{icon:7}),window.location.href="?a=logout"):top.layer.alert("操作超时，请刷新页面..",{icon:7})}})},showCurIssue_Timer:function(){$("#thisIssueSpan").text(ps.curIssueInfo.issue),$("#thisIssueSpan2").text(ps.curIssueInfo.issue);var e=subTime(--ps.curRemainTime);if(ps.curRemainTime>=0)remainTime(e),$("#thisIssueTimerIcon").removeClass("lock").addClass('clock').text("可以投注");else{clearInterval(runTime.remainTimer),layer.alert(ps.curIssueInfo.issue+'期销售已截止，请进入下一期购买',{icon:7}),$('#thisIssueTimerIcon').removeClass('clock').addClass('lock').text("已截止投注");var t=subTime(ps.curWaitOpenTime);e.hour=t.hour,e.minute=t.minute,e.second=t.second,remainTime(t),$('#thisIssueRemainTime').html("<span>"+t.hour+"</span><em>:</em><span>"+t.minute+"</span><em>:</em><span>"+t.second+"</span>"),ps.canBuy=!1,runTime.waitOpenTimer=window.setInterval(drawBar.waitOpen_Timer,1e3)}},waitOpen_Timer:function(){$('#pendingText').show(),$('#thisIssueNumUL').hide(),--ps.curWaitOpenTime,remainTime(subTime(ps.curWaitOpenTime)),ps.curWaitOpenTime<0&&(clearInterval(runTime.waitOpenTimer),drawBar.getCurIssue(drawBar.init))},getLastOpen_Timer:function(){ps.getLastOpenTime++,ps.getLastOpenTime%10==0&&$.ajax({url:"?c=game&a=play",type:"POST",data:{op:"getLastIssueCode",lotteryId:ps.lotteryId,issue:ps.lastIssueInfo.issue},cache:!1,dataType:"json",timeout:3e4,success:function(e){if(0==e.errno){if(0!=e.kTime)clearInterval(runTime.waitOpenTimer),window.location.reload();else if(void 0!==e.issueInfo.code){clearInterval(runTime.getLastOpenTimer),ps.getLastOpenTime=0,ps.lastIssueInfo=e.issueInfo,todayGetCurIssue(e.issueInfo);var t=drawBar.getMoreInfo(e.issueInfo.code);if(e.issueInfo.prop=t,ps.todayDrawList.unshift(e.issueInfo),$("#todayDrawBtn").hasClass("cur")){var a=ps.todayDrawList[0],s='<ul><li class="width80px">'+a.issue+'</li><li class="width60px">'+a.code+'</li><li class="width53px">'+a.prop.qszt+'</li><li class="width53px">'+a.prop.hszt+"</li></ul>";$("#todayIssuesBody").prepend(s)}drawBar.showLastDraw()}}else alert("系统繁忙，请稍候再试(03)")},error:function(e,t,a){-1!=a.indexOf("a=logout")||-1!=a.indexOf("a=login")?(top.layer.alert("您已经超时退出，请重新登录",{icon:7}),window.location.href="?a=logout"):top.layer.alert("操作超时，请刷新页面...",{icon:7})}})},showLastDraw:function(){var e=ps.todayDrawList[0];$("#curIssueSpan").text(ps.lastIssueInfo.issue),$("#lastIssueSpan").text(ps.lastIssueInfo.issue);var t;if(ps.lastIssueInfo.issue==e.issue){if(null==e.code)return;$('#pendingText').hide(),$('#thisIssueNumUL').show();var a=e.code.split("");t="<ul><li>三星形态:[<span>"+e.prop.hszt+"</span>]</li><li>三星和值:[<span>"+e.prop.hshz+"</span>]</li><li>二星和值:[<span>"+e.prop.hehz+'</span>]</li><li class="last">大小单双:[<span>'+e.prop.dxds+"</span>]</li></ul>";var s=0,r=0;if($("#todayIssuesBody").find("li:first").text()!=ps.curIssueInfo.issue&&drawBar.todayBuyBtnNew_Click(),18==ps.lotteryId){var n=e.original_code.split(' '),i=0,l='',o=1;$("#original_code").html("<div class='numb_main'><dl class='numb_1'><dt>万位：</dt><dd></dd><dd>=<span></span></dd></dl><dl class='numb_2'><dt>千位：</dt><dd></dd><dd>=<span></span></dd></dl><dl class='numb_3'><dt>百位：</dt><dd></dd><dd>=<span></span></dd></dl><dl class='numb_4'><dt>十位：</dt><dd></dd><dd>=<span></span></dd></dl><dl class='numb_5'><dt>个位：</dt><dd></dd><dd>=<span></span></dd></dl></div>"),$(n).each(function(e){if(l+=e%4==3?n[e]:n[e]+"+",i+=parseInt(n[e]),e%4==3){var t=i.toString().split(""),a='';$(t).each(function(e){e==t.length-1?a+="<b>"+t[e]+"</b>":a+=t[e]}),$(".numb_"+o+" dd:first").html(l),$(".numb_"+o+" dd:last span").html(a),o++,l='',i=0}})}var c=0,u=a.length;$.each(a,function(e,t){c+=parseInt(t)});window.setTimeout(function e(){if($("#thisIssueNumUL").children(".pendingBall").length>0){var t=$("#thisIssueNumUL").children(".pendingBall").first();window.setTimeout(function(){t.removeClass("pendingBall").text(a[s++]),t.addClass("bl"+a[r++]),s!=u?e():$("#thisIssueNumUL span:last").text(c)},500)}},100)}else $("#thisIssueNumUL").children().addClass("pendingBall").removeClass("sd115_Ball"),t='<ul><li>三星形态:[<span></span>]</li><li>二星和值:[<span></span>]</li><li>三星和值:[<span></span>]</li><li class="last">大小单双:[<span></span>]</li></ul>';$("#thisIssueMoreInfo").html(t)},todayDrawBtn_Click:function(){$("#todayIssuesHead").html('<li>期号</li><li>开奖号</li>'),$("#todayIssuesBody").empty(),$.each(ps.todayDrawList,function(e,t){for(var a="",s="",r="",n=0,r=0;n<t.code.length;n++)a+="<b>"+t.code[n]+"</b>",s+=t.code[n],r+=parseFloat(t.code[n]);var i='<ul class="fix"><li>'+t.issue+'</li><li>'+a+'<span>=</span><a class="numshezhia">'+r+'</a></li></ul>';$("#todayIssuesBody").append(i)})},prizeRankBtn_Click:function(){$("#todayBuyBody").empty().hide(),$.post("?c=game&a=play",{op:"getPrizeRank",lotteryId:ps.lotteryId},function(e){0==e.errno?0==e.data.length?$('<div class="todayNoBet">暂时没有记录！</div>').appendTo("#prizeScrollContent"):($("#prizeScrollContent").empty(),$.each(e.data,function(e,t){$('<ul><li><span>'+t.nick_name+"</span> 喜中 <em>"+number_format(t.total_prize,2)+"</em>元</li></ul>").appendTo($("#prizeScrollContent"))}),$("#prizeScrollContent").html($("#prizeScrollContent").html()+$("#prizeScrollContent").html()).show(),0==runTime.scollTopIntervalTimer&&(runTime.scollTopIntervalTimer=window.setInterval(drawBar.scrollPrizeRank,100),$("#prizeScrollContent").mouseover(function(){clearInterval(runTime.scollTopIntervalTimer)}).mouseout(function(){runTime.scollTopIntervalTimer=window.setInterval(drawBar.scrollPrizeRank,100)}))):alert("暂时没有排行数据！")},"json")},todayBuyBtnNew_Click:function(){$("#todayIssuesBody").find("li:first").text()!=ps.curIssueInfo.issue&&$.post("?c=game&a=play",{op:"getBuyRecords",lotteryId:ps.lotteryId},function(e){0==e.errno?($("#todayBuyBody").empty(),$('<ul><li class="C1">玩法</li><li class="C2">期号</li><li class="C4">金额</li><li class="C5">状态</li></ul><div class="clear"></div>').appendTo("#todayBuyBody"),0==e.prj.length?$('<div class="todayNoBet">暂时没有记录！</div>').appendTo("#todayBuyBody"):$.each(e.prj,function(e,t){$('<ul class="fix"><li class="C1"><a href="javascript:void(0);" onclick="showPackageDetail(\''+t.wrapId+'\');return false;">'+t.methodName+'</a></li><li class="C2">'+helper.getNumByIssue(t.issue)+'</li><li class="C4">'+t.amount+'</li><li class="C5">'+t.prizeStatus+"</li></ul>").click(function(){}).appendTo("#todayBuyBody")})):alert("系统繁忙，请稍候再试(04)")},"json")},scrollPrizeRank:function(){var e=$("#prizeScrollContent")[0];e.scrollTop+=1,e.scrollTop>=$("#prizeScrollContent")[0].scrollHeight/2&&(e.scrollTop=0)},getMoreInfo:function(e){var t={},a=e.split("");return t.qshz=parseInt(a[0])+parseInt(a[1])+parseInt(a[2]),t.qszt=drawBar.zutai(a[0],a[1],a[2]),t.hshz=parseInt(a[2])+parseInt(a[3])+parseInt(a[4]),t.hszt=drawBar.zutai(a[2],a[3],a[4]),t.hehz=parseInt(a[3])+parseInt(a[4]),t.dxds=drawBar.dxds(a[3],a[4]),t},zutai:function(e,t,a){return e==t&&e==a&&t==a?"豹子":e==t||e==a||t==a?"组三":"组六"},dxds:function(e,t){var a=[],s=[];return a.push(e>=5?"大":"小"),a.push(e%2==1?"单":"双"),s.push(t>=5?"大":"小"),s.push(t%2==1?"单":"双"),[a[0]+s[0],a[0]+s[1],a[1]+s[0],a[1]+s[1]].join(",")}};if(!verifyParams())return parent.layer.alert("数据初始化失败",{icon:2}),!1;initPrizeBar(),initModesBar(),initMethodBar(),initMissHotBar(),initBuyBar(),initDrawBar();var isLegalCode=function(e){if(0==allHasValue(e).charsNum)return{singleNum:0,isDup:0};var t,a=0,s=0;switch(ps.curMethod.name){case'TMHZ':t=e[0].split('_'),$.each(t,function(e,t){a+=helper.TMHZ[t]}),s=t.length>1?1:0;break;case'XYDXDS':console.log(e);case'JDX':case'XYSB':case'TMBZ':t=e[0].split('_'),s=(a=t.length)>1?1:0;break;case'TMBS':(t=e[0].split('_')).length>=3&&(s=(a=t.length*(t.length-1)*(t.length-2)/6)>1?1:0);break;default:throw"unknown method2 "+ps.curMethod.name}return{singleNum:a,isDup:s}}}}(jQuery);
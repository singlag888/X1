<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
    <meta content="telephone=no,email=no" name="format-detection">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>注册-<?php echo config::getConfig('site_title'); ?></title>
    <style>.header-logo .logo-play {
            padding: 16px 0;
        }</style>
    <link rel="stylesheet" type="text/css" href="<?php echo $imgCdnUrl ?>/css/Jstyle.css"/>
    <?php $this->import('public_cssjs') ?>
</head>
<body>
<div class="big-box">
    <!--头部-->
    <?php $this->import('public_header_zhuce') ?>

    <!--主要main-->
    <div class="reg">
        <div class="reg-play">
            <div class="reg-tt cf">
                <div class="fl reg-user">用户注册</div>
                <!--<div class="fr account">已有账号？<a href="javascript:;">马上登陆</a></div>-->
            </div>
            <div class="reg-inp">
                <form>
                <div class="reg-inp-list1 cf">
                    <div class="reg-inp-list1l fl">
                        <span>*</span>会员账号：
                    </div>
                    <div class="fl">
                        <input style="font-size:12px;color:#a9a9a9;" type="text" name="username" maxlength="18"
                               id="username" class="reginput" value="以字母开头，长度为6-12个字母或数字!"
                               onfocus="if (this.value=='以字母开头，长度为6-12个字母或数字!'||this.value=='用户名不能为空!')this.value='',this.style.color='#666',this.style.fontSize='14px'"
                               onblur="if (this.value=='')this.value='用户名不能为空!',this.style.color='red'">
                        <span>用户名须为6-12个字母或数字</span>
                    </div>
                </div>

                <?php if($realNameToggle > 0): ?>
                    <div class="reg-inp-list1 cf">
                        <div class="reg-inp-list1l fl">
                            <span>*</span>真实姓名：
                        </div>
                        <div class="fl">
                            <input style="font-size:12px;color:#a9a9a9;" type="text" name="real_name" maxlength="18"
                                   class="reginput" value="真实姓名"
                                   onfocus="if (this.value=='真实姓名'||this.value=='不能为空!')this.value='',this.style.color='#666',this.style.fontSize='14px'"
                                   onblur="if (this.value=='')this.value='不能为空!',this.style.color='red'">
                            <span style="color: red">必须与您的银行账户名称相同，否则不能出款!</span>
                        </div>
                    </div>
                <?php endif; ?>

                <div class="reg-inp-list1 cf">
                    <div class="reg-inp-list1l fl">
                        <span>*</span>登录密码：
                    </div>
                    <div class="fl">
                        <input style="font-size:12px;color:#a9a9a9;" type="text" name="pwd" maxlength="15" id="pwd"
                               class="reginput" value="6-15位字母数字，且不能全为字母或数字"
                               onfocus="if (this.value=='6-15位字母数字，且不能全为字母或数字'||this.value=='密码不能为空!'||this.value=='密码有误!')this.value='',this.style.color='#666',this.style.fontSize='14px',this.type='password'"
                               onblur="if (this.value=='')this.value='密码不能为空!',this.style.color='red',this.type='text'">
                        <span>密码须为6-12个同时包含字母或数字的组合</span>
                    </div>
                </div>
                <div class="reg-inp-list1 cf">
                    <div class="reg-inp-list1l fl">
                        <span>*</span>确认密码：
                    </div>
                    <div class="fl">
                        <input style="font-size:12px;color:#a9a9a9;" type="text" name="confirm_pwd" maxlength="15"
                               id="confirm_pwd" class="reginput" value="确认密码"
                               onfocus="if (this.value=='确认密码'||this.value=='确认密码错误')this.value='',this.style.color='#666',this.style.fontSize='14px',this.type='password'"
                               onblur="if (this.value=='')this.value='确认密码错误',this.style.color='red',this.type='text'">
                    </div>
                </div>

                <?php if($regNeedMobile > 0): ?>
                <div class="reg-inp-list1 cf">
                    <div class="reg-inp-list1l fl">
                        <span>*</span>手机号码：
                    </div>
                    <div class="fl">
                        <input style="font-size:12px;color:#a9a9a9;" type="text" name="mobile" maxlength="20"
                               id="mobile" class="reginput" value="手机号码"
                               onfocus="if (this.value=='手机号码'||this.value=='手机号不能为空')this.value='',this.style.color='#666',this.style.fontSize='14px',this.type='text'"
                               onblur="if (this.value=='')this.value='手机号不能为空',this.style.color='red',this.type='text'">
                        <span style="color: red">平台将通过此方式确认会员本人并给予活动回馈</span>
                    </div>
                </div>
                <?php endif; ?>

                <?php if($regNeedQq > 0): ?>
                <div class="reg-inp-list1 cf">
                    <div class="reg-inp-list1l fl">
                        <span>*</span>QQ号码：
                    </div>
                    <div class="fl">
                        <input style="font-size:12px;color:#a9a9a9;" type="text" name="qq" maxlength="20" id="qq"
                               class="reginput" value="QQ号码"
                               onfocus="if (this.value=='QQ号码')this.value='',this.style.fontSize='14px',this.style.color='#666'"
                               onblur="if (this.value=='')this.value='QQ号码',this.style.fontSize='12px',this.style.color='#a9a9a9'">
                    </div>
                </div>
                <?php endif; ?>

                <div class="reg-inp-list1 cf">
                    <div class="reg-inp-list1l fl">
                        <span>*</span>验证码：
                    </div>
                    <div class="fl">
                        <input type="text" name="verifyCode" maxlength="4" id="verifyCode" placeholder="验证码"
                               class="regyzm">
                        <img class="text-cen" align="absmiddle" width="100px" height="40px" id="code" title="点击获取验证码"
                             alt="点击获取验证码" src="<?php echo $imgCdnUrl ?>/images_fh/yzm_xy3.png"
                             style="cursor:pointer;">
                    </div>
                </div>
                <div class="btn">
                    <input type="hidden" name="verify" value="register">
                    <input type="button" value="立即注册" name="btn_Add" id="btn_Add" class="btn_login"/>
                </div>
                <div style="margin-top:15px; margin-left:24px; line-height: 1.5em; ">
                    <p>1.标记有<span style="color: red"> *</span> 者为必填项目。</p>
                    <p>2.建议使用谷歌、火狐、IE（Internet Explorer）9.0 浏览器，可达到最佳使用效果</p>
                </div>
            </form>
            </div>
        </div>
    </div>
    <!-- 注册成功弹出层 -->
    <div class="popLayer">
        <div class="reg_poplayer">
            <h1>恭喜您注册成功！！</h1>
            <div class="reg_main">
                <div class="reg_boxtab">
                    <div class="reg_content">
                        <p><label>会员账号：</label><span id="successUsername"></span></p>
                        <p><label>登录密码：</label><span id="successPassword"></span></p>
                        <p>请牢记您的密码，点击确定登录平台</p>
                    </div>
                </div>
                <div class="reg_btn"><a id="loginURL" href="#" class="reglogin">确定</a></div>
            </div>
        </div>
        <div class="maskLayer"></div>
    </div>
    <!-- 弹出层end -->
    <!--底部-->
    <?php $this->import('public_foot') ?>
</div>
<script>
    (function () {
        var flag;
        setInterval(function () {
            if (flag) {
                $('.hot').css({'display': 'none'});
                $('.hot1').css({'display': 'block'})
            } else {
                $('.hot1').css({'display': 'none'});
                $('.hot').css({'display': 'block'})
            }
            flag = !flag;
        }, 100);

        $("#username").blur(function () {
            var regex1 = /^[a-zA-Z]\w{5,11}$/;
            if ($("#username").val() == '') {
                $("#usernameTips").html("用户名不能为空!");
                $("#usernameTips").css("color", "red");
            } else if (!regex1.test($("#username").val())) {
                $("#usernameTips").html("以字母开头，长度为6-12个字母或数字!");
                $("#usernameTips").css("color", "red");
            } else {
                $("#usernameTips").html("正确");
                $("#usernameTips").css("color", "#CCCCCC");
            }
        });
        var Flag=0;
        $('#btn_Add').click(function () {
            var regex1 = /^[a-zA-Z]\w{5,11}$/;
            var regex2 = /^[0-9]+$/;
            var regex3 = /^[a-zA-Z]+$/;
            var mobileRegex = /^1[34578]\d{9}$/;
            var is_qq = "<?php echo $regNeedQq;?>";
            if(is_qq > 0)
            {
                var qq = $('#qq').val();
                var regx = /^[1-9]\d{4,11}$/;
                if(regx.test(qq) === false)
                {
                    layer.alert('qq号码格式不正确!');
                }
            }
            // if ($("#agree").attr("checked") != true) {
            //     alert('请先同意条款再注册');
            //     return false;
            // }
            if ($("input[name=username]").val() == '' || !regex1.test($("input[name=username]").val())) {
                $("input[name=username]").val("以字母开头，长度为6-12个字母或数字!");
                $("input[name=username]").css({"color": "red", "fontSize": "12px"});
                return false;
            }
            if ($("#pwd").val() == '' || $("#pwd").val().length < 6 || regex2.test($("#pwd").val()) || $("#pwd").val().length > 15 || regex3.test($("#pwd").val())) {
                $("#pwd").val("密码有误!");
                $("#pwd").css({"color": "red", "fontSize": "12px"});
                $("#pwd")[0].type = "text";
                return false;
            }
            if ($("#confirm_pwd").val() == '' || $("#pwd").val() != $("#confirm_pwd").val()) {
                $("#confirm_pwd").val("确认密码错误");
                $("#confirm_pwd").css({"color": "red", "fontSize": "12px"});
                $("#confirm_pwd")[0].type = "text";
                return false;
            }

            <?php if($regNeedMobile > 0): ?>
            if(!mobileRegex.test($('#mobile').val())){
                layer.alert('请输入正确的手机号!');
                return false;
            }
            <?php endif; ?>
            Flag+=1;		
		    if(Flag==1){
            $.post(
                '?a=marketReg',
               $("form").serialize(),
                function (response) {
                    if (response.errno == 0) {
                        $("#successUsername").html($('input[name=username]').val());
                        $("#successPassword").html($('input[name=pwd]').val());
                        $("#loginURL").attr('href', response.loginURL);
                        $(".popLayer").fadeIn(100);
                    }
                    else {
                        layer.alert(response.errstr + '!');
                    }
                }, 'json');
                var disonckick=setInterval(function(){
					Flag=0;
					if(Flag==0){
						clearInterval(disonckick);
						
					}
				},5000)
            }

            return false;
        });
        $(".reglogin").click(function () {
            $(".popLayer").fadeOut(100);
        });
        //验证码
        $('#verifyCode').focus(function(){
            getCode('.text-cen');
        })
        $('.text-cen').click(function(){
            getCode('.text-cen');
            $('#verifyCode').focus();
        })
        function getCode(ele){
            $(ele).attr('src','?a=verifyCode&'+Math.random())
        }
    })();


</script>
</body>
</html>
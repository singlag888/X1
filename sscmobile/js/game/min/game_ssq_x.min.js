if("object"!=typeof console)var console={info:function(e){window.status=e}};var runTime={remainTimer:0,waitOpenTimer:0,getLastOpenTimer:0,scollTopIntervalTimer:0,traceRemainTimer:0,traceWaitOpenTimer:0,buyTodayTimer:0,clearAll:function(){clearInterval(runTime.remainTimer),clearInterval(runTime.waitOpenTimer),clearInterval(runTime.getLastOpenTimer),clearInterval(runTime.scollTopIntervalTimer),clearInterval(runTime.traceRemainTimer),clearInterval(runTime.traceWaitOpenTimer),clearInterval(runTime.buyTodayTimer)}};!function(e){e.init=function(t){function a(t){if(t.code){for(var a="",n="",l=0;l<t.code.length;l++)a+="<b>"+t.code[l]+"</b>",n+=t.code[l];e("#todayIssuesBody").prepend("<ul class=\"fix\"><li style=\"width:30%\">第"+t.issue+"期</li><li style=\"width:70%\">"+a+'</li></ul>')}}function n(e){var t=e>0?{day:Math.floor(e/86400),hour:Math.floor(e%86400/3600),minute:Math.floor(e%3600/60),second:Math.floor(e%60)}:{day:0,hour:0,minute:0,second:0};return 1==(t.hour+"").length&&(t.hour="0"+t.hour),1==(t.minute+"").length&&(t.minute="0"+t.minute),1==(t.second+"").length&&(t.second="0"+t.second),t}function l(t){var a=1,n=0;return e.each(t,function(e,t){n+=t.length,0==t.length&&(a=0)}),{flag:a,charsNum:n}}var i=e.extend({counter:0,lotteryId:1,lotteryName:'SSQ',lotteryType:3,property_id:1,methods:[],maxCombPrize:0,openedIssues:[],minRebateGaps:[{from:0,to:.12,gap:.005},{from:.12,to:.125,gap:.001}],rebate:.123,defaultMode:1,defaultRebate:.123,missHot:{miss:[],hot:[]},halt:function(e){throw alert(e+'!'),e},prizeRate:0,curIssueInfo:{},lastIssueInfo:{},curMode:0,curMethod:{},curProjects:[],nextProjectCounter:0,curPrizeIndex:-1,rebateGapList:[],todayDrawList:[],curServerTime:'',curRemainTime:0,remainTimer:{},curWaitOpenTime:0,waitOpenTimer:{},getLastOpenTime:0,getLastOpenTimer:{},canBuy:!1,traceMethodPrize:0,tracePrizeLimit:0,canTraceIssues:[],counters:0},t),s={factorial:function(e){return e<=1?1:e*s.factorial(e-1)},getNumByIssue:function(e){if(0==e.length)return!1;var t=e.indexOf("-");return-1!=t?e.substr(t+1):e.substr(e.length-3)},expandLotto:function(t){var a=[],n=[],l=0;if(e.each(t,function(t,a){if(""!=e.trim(a)){var i=a.split("_");i.sort(),n.push(i)}else l=1}),l)return[];var i,s,r,o,c;switch(t.length){case 2:for(i=0;i<n[0].length;i++)for(s=0;s<n[1].length;s++)a.push(n[0][i]+" "+n[1][s]);break;case 3:for(i=0;i<n[0].length;i++)for(s=0;s<n[1].length;s++)for(r=0;r<n[2].length;r++)a.push(n[0][i]+" "+n[1][s]+" "+n[2][r]);break;case 5:for(i=0;i<n[0].length;i++)for(s=0;s<n[1].length;s++)for(r=0;r<n[2].length;r++)for(o=0;o<n[3].length;o++)for(c=0;c<n[4].length;c++)a.push(n[0][i]+" "+n[1][s]+" "+n[2][r]+" "+n[2][o]+" "+n[2][c]);break;default:throw"unkown expand"}var u=[];return e.each(a,function(e,t){var a=t.split(" ");array_unique(a).length==a.length&&u.push(t)}),u}},r={uniqueArr:function(e){var t={};len=e.length,result=[];for(var a=0;a<len;a++)t[e[a]]||(t[e[a]]=!0,result.push(e[a]));return result}},o={changePrize:function(){if(('YMBDW'==i.curMethod.name||'QSYMBDW'==i.curMethod.name||'ZSYMBDW'==i.curMethod.name||'SXYMBDW'==i.curMethod.name||'WXYMBDW'==i.curMethod.name)&&i.rebateGapList[e("#curPrizeSpan").val()].prize>1900){var t=0;for(var a in i.rebateGapList)i.rebateGapList[a].prize<=1900&&i.rebateGapList[a].prize>t&&(i.curPrizeIndex=a,t=i.rebateGapList[a].prize);var n=e("#curPrizeSpan option").eq(i.curPrizeIndex).html().split("/");switch(i.curMethod.name){case'YMBDW':case'QSYMBDW':case'ZSYMBDW':sscmsg='一码不定位最大奖金固定是￥'+n[0]+'，不能再往上调节';break;case'SXYMBDW':sscmsg='四星一码不定位最大奖金固定是￥'+n[0]+'，不能再往上调节';break;case'WXYMBDW':sscmsg='一码不定位最大奖金固定是￥'+n[0]+'，不能再往上调节'}e("#curPrizeSpan").val(i.curPrizeIndex);var l=i.curPrizeIndex,s=layer.confirm(sscmsg,{closeBtn:0,icon:7,btn:['确定']},function(){layer.close(s),e("#curPrizeSpan").val(l),e('#rebateValue').html(e('#curPrizeSpan option').eq(l).html()),e('#selectRebate').slider('option','value',l)})}else{if(!0!==e.isEmptyObject(i.curMethod)&&i.curMethod.description.indexOf("@P@")>0){for(var r=e("#curPrizeSpan option:selected").text().split("/"),c='',u=i.curMethod.description.split("@P@"),d=1;d<u.length;d++)void 0!=i.curMethod.prize[d]&&(c+=u[d-1]+Math.round(i.curMethod.prize[d]*r[0]/i.curMethod.prize[1]*1e4)/1e4+"元");c+=u[u.length-1],e("#methodDesc").text(c)}i.curPrizeIndex=e("#curPrizeSpan").val(),o.saveLastPrize(),p.updateTotalSingle()}},generateGapList:function(){var t=[];e.each(i.minRebateGaps,function(e,a){if(a.from=parseFloat(a.from),a.to=parseFloat(a.to),a.gap=parseFloat(a.gap),i.rebate>a.to)for(var n=a.from;n<=a.to;n+=a.gap)t.push(parseFloat(number_format(n,3)));else{for(n=a.from;n<a.to&&n<i.rebate;n+=a.gap)t.push(parseFloat(number_format(n,3)));t.push(parseFloat(number_format(i.rebate,3)))}}),t=array_unique(t);var a=[];return e.each(t,function(e,t){var n=round(i.maxCombPrize*(i.prizeRate+t),0);a.push({rebate:round(i.rebate-t,3),prize:n})}),a},showPirze:function(){!0!==e.isEmptyObject(i.curMethod)&&(e('#curPrizeSpan').empty(),e.each(i.rebateGapList,function(t,a){var n=round(i.curMode*i.curMethod.prize[1]*(i.prizeRate+i.rebate-i.rebateGapList[t].rebate)/i.prizeRate,4),l=number_format(100*parseFloat(i.rebateGapList[t].rebate),1);e('#curPrizeSpan').append('<option value="'+t+'">'+n+'/'+l+'%</option>'),e('#curPrizeSpan').siblings('span').html('奖金/返点')}),e("#curPrizeSpan").val(i.curPrizeIndex),e("#gamesPrize").html(e('#curPrizeSpan').find("option:selected").text().split("/")[0]),o.changePrize(),e('#rebateValue').html(e('#curPrizeSpan option:selected').html()),e("#curPrizeSpan").val(0),e('#rebateValue').html(e('#curPrizeSpan option').eq(0).html()))},saveLastPrize:function(){setCookie("reb_"+i.lotteryId,i.rebateGapList[i.curPrizeIndex].rebate,2592e3)}},c={methodGroup_Click:function(t){e(this).addClass("methodGroup_selected").siblings().removeClass("methodGroup_selected methodGroup_hover"),e(t.target).is('label')&&(e(this).find('dd:first').click(),e("#traceBtn").show(),e(".choMainTab").children('.progressBar')&&(e(".progressBar").remove(),e(".choMainTab").css("padding-top",""))),e(this).addClass("methodGroup_hover"),/\w+_(\d+)/.test(e(this).attr("id"));RegExp.$1;e(".playNav ul .methodPopStyle").hide(),e(this).find('.methodPopStyle').show()},methodGroup_hoverOver:function(){e(this).addClass("methodGroup_hover"),e(this).hasClass("methodGroup_selected")&&e(this).find('.methodPopStyle').show()},methodGroup_hoverOut:function(){e(this).removeClass("methodGroup_hover"),/\w+_(\d+)/.test(e(this).attr("id"));RegExp.$1},method_hoverOver:function(){e(this).addClass("method_hover"),/\w+_(\d+)/.test(e(this).attr("id"));RegExp.$1;e(this).find('.methodPopStyle').show()},method_hoverOut:function(){e(this).removeClass("method_hover"),/\w+_(\d+)/.test(e(this).attr("id"));RegExp.$1;e(this).find('.methodPopStyle').hide()},method_Click:function(t){i.curMethod=t.data,e('.methodPopStyle').hide(),e('#methodGroupContainer').find('.method').removeClass("method_selected"),e(this).addClass("method_selected"),e(".GameText span").text(e(this).text()),e('#curMethod').text(i.curMethod.cname),e("#methodDesc").html(i.curMethod.description).hide(),e("#methodTipInfo").click(function(){layer.tips(e("#methodDesc").html(),this,{tips:[2,'#f13131'],time:0,closeBtn:0,shade:[.1,'#000'],shadeClose:!0})}),u.generateBall(),e(".selectRandomBtn").parent().hide(),p.updateSingle(0),o.showPirze(),0==propLen(i.curMethod.field_def)&&(u.showInput(),e("#singleInfo").show(),e("#selectArea").removeClass("N-selected")),2==propLen(i.curMethod.field_def)&&e(".locate").css("padding","10px 0"),3==propLen(i.curMethod.field_def)&&e(".locate").css("padding","10px 0"),4==propLen(i.curMethod.field_def)&&e(".locate").css("padding","5px 0")},selectDefault:function(){e("#methodGroupContainer").find("label:contains('普通')").click(),e(".playNav ul ul").hide()}},u={reset:function(){e.isEmptyObject(i.curMethod.field_def)||(e.each(i.curMethod.field_def,function(t,a){e('#field_'+t).children().removeClass('ball_Selected')}),p.updateSingle(0))},showInput:function(){e("#selectArea").children().remove();var t,a='<div class="manualInput fix"><div class="manualInputTop"><ul><li><p class="NumbBasket DisplayNone">号码篮</p><textarea cols="" rows="" class="inputTA MachineSeleBg" id="inputTA"></textarea></li><li id="delTA" class="delTA custBtnStyle">清空号码</li></div><div class="manualInputBottom DisplayNone"><li class="inputTip1"><p>提示：</p><p>请把您已有的大底号码复制或者输入到下边文本框中。</p><p>每注号码之间必须用 换行  隔开，每注号码每位之间必须使用 空格 作为分隔。</p><p>仅支持单式。 </p></li><li class="inputTip2"><p>例如：</p><p id="inputExample">',n=["01","02","03","04","05","06","07","08","09","10","11"];t=propLen(i.curMethod.field_def),a+=n.slice(0,t).join(" ")+"<br/>"+n.slice(1,1+t).join(" ")+"<br></p></li></ul></div></div>",e(a).appendTo("#selectArea"),e("#delTA").click(function(){e("#inputTA").val(""),e(".FatherCodeBtn").removeClass("selectCodeBtn_selected")}),e("#inputTA").live('keyup',function(){''!=e("#inputTA").val()?(e(".FatherCodeBtn").addClass('selectCodeBtn_selected'),e(this).removeClass('MachineSeleBg')):(e(".FatherCodeBtn").removeClass('selectCodeBtn_selected'),e(this).addClass('MachineSeleBg'))})},generateBall:function(){e("#selectArea").children().remove();e.each(i.curMethod.field_def,function(t,a){var n=a.nums.split(" "),l='',s="";e.each(n,function(e,t){l+='<li>'+t+"</li>"});l="<li><ul class=\"ballList"+(/(BD|HZ)$/.test(i.curMethod.name)?" w400":"")+'" id=field_'+t+">"+l+"</ul></li>",s='<li><ul class="BDHZinfo">'+s+"</ul></li>";e('<div class="locate" id="locate_'+t+"\"><ul class=\"lotteryNumber\">"+(a.prompt?'<li class="areaPrefix">'+a.prompt+"</li>":"")+l+"</ul></div>").appendTo("#selectArea"),a.has_filter_btn&&(e("#locate_"+t).find("ul .areaPrefix").after("<li class=\"Quick\"><div class=\"QuickChoose\"><dl class=\"navSub\"><dd>全</dd><dd>奇</dd><dd>偶</dd> <dd>大</dd><dd>小</dd><dd>清</dd></dl></div></li>"),"EXZUX"==i.curMethod.name||i.curMethod.name,e("#locate_"+t).find("dd").click(function(){switch(e(this).addClass("DDcolor").siblings().removeClass("DDcolor"),e(this).text()){case'全':e('#field_'+t).children().addClass('ball_Selected');break;case'奇':e('#field_'+t).children().removeClass('ball_Selected').parent().find(":even").addClass('ball_Selected');break;case'偶':e('#field_'+t).children().removeClass('ball_Selected').parent().find(":odd").addClass('ball_Selected');break;case'大':e('#field_'+t).children().removeClass('ball_Selected').filter(function(e){return e>=5}).addClass('ball_Selected');break;case'小':e('#field_'+t).children().removeClass('ball_Selected').filter(function(e){return e<5}).addClass('ball_Selected');break;case'清':e('#field_'+t).children().removeClass('ball_Selected');break;case'质':e('#field_'+t).children().removeClass('ball_Selected').filter(function(t){return-1!=e.inArray(t,[1,2,4,6,10])}).addClass('ball_Selected');break;case'合':e('#field_'+t).children().removeClass('ball_Selected').filter(function(t){return-1!=e.inArray(t,[3,5,7,8,9])}).addClass('ball_Selected')}u.computeSingle()}));var r=[];r.length>0&&e.each(r,function(t,a){e(a).appendTo('#selectArea')})}),e('.lotteryNumber ul>li').bind("click",u.ball_Click)},getAssisInfo:function(t){var a="",n=[];if(!e.isArray(i.missHot.miss)||!e.isArray(i.missHot.hot))return[];var l=-1;switch(i.curMethod.name){case"QSZX":case"QSLX":case"QEZX":case"QELX":case"QSIZX":case"WXZX":case"WXLX":case"WXDW":case'SXDW':case"SDQSZX":case"SDQEZX":l=t-1+0;break;case"SIXZX":case"ZSZX":case"ZSLX":l=t-1+1;break;case"SXZX":case"SXLX":l=t-1+2;break;case"EXZX":case"EXLX":l=t-1+3;break;case"YXZX":l=t-1+4}return l>-1&&(e.each(i.missHot.miss[l],function(e,t){a+='<li class="yiLouNum">'+t+"</li>"}),a='<div class="missDIV" id="missHot_'+t+'"><ul class="missHotNumber"><li class="missHotUnit">遗漏:</li><li><ul class="yiLouList" id=yiLouList_'+t+">"+a+"</ul></li></ul></div>",n.push(a),a="",e.each(i.missHot.hot[l],function(e,t){a+='<li class="yiLouNum">'+t+"</li>"}),a='<div class="hotDIV" id="missHot_'+t+'"><ul class="missHotNumber"><li class="missHotUnit">冷热:</li><li><ul class="yiLouList" id=yiLouList_'+t+">"+a+"</ul></li></ul></div>",n.push(a)),n},ball_Click:function(t){e(this).toggleClass("ball_Selected"),/\w+_(\d+)/.test(e(this).parent().attr("id"));var a=RegExp.$1;e(this).parent().find(".ball_Selected").length>i.curMethod.field_def[a].max_selected?1==i.curMethod.field_def[a].max_selected?e(this).siblings(".ball_Selected").removeClass("ball_Selected"):(e(this).removeClass("ball_Selected"),parent.layer.alert("当前最多只能选择"+i.curMethod.field_def[a].max_selected+"个号码",{icon:7})):('JSETDX'==i.curMethod.name&&e('#locate_'+(1==a?2:1)).find(".ballList_k3no_square li").eq(parseInt(e(this).text().substr(0,1))-1).removeClass("ball_Selected"),u.computeSingle())},computeSingle:function(){var t=[];e.each(i.curMethod.field_def,function(a,n){var l="";i.curMethod.field_def[a].nums.split(" ");e("#field_"+a+" li").each(function(t){e(this).hasClass("ball_Selected")&&(l+=e(this).text()+"_")}),-1==l.indexOf("_")?t.push(l):t.push(l.substr(0,l.length-1))});var a=f(t);p.updateSingle(a.singleNum);var n=t.join(",");return{singleNum:a.singleNum,isDup:a.isDup,code:n}}},d={missHotBtn_Click:function(){"1"==e(this).val()?(e("#selectArea .missDIV").removeClass("hidden"),e("#selectArea .hotDIV").addClass("hidden")):(e("#selectArea .missDIV").addClass("hidden"),e("#selectArea .hotDIV").removeClass("hidden"))}},p={selectCodeBtnFast:function(){p.confirmBtn_Click(1)},inputBtn_Click:function(t){i.curMethod=t.data,e('.methodPopStyle').hide(),u.showInput(),e('#methodGroupContainer').find('.method').removeClass("method_selected"),e(this).addClass("method_selected"),e("#selectCodeBtn").addClass("selectCodeBtn_selected"),e(".selectRandomBtn").parent().show(),e("#selectArea").removeClass("N-selected")},selectCodeBtn_Click:function(){if(e("#inputTA").length>0){var t=[],a=e.trim(e("#inputTA").val());if(0==a.length)return!1;var n=a.split(/,|，|\n|;|；/),l=/^[01]\d$/,s=r.uniqueArr(n);for(var o in s){s[o]=e.trim(rtrim(e.trim(s[o]),","));var c=s[o].split(" ");for(var d in c)if(!l.test(c[d]))return parent.layer.alert("您输入的号码有误，请重新检查输入",{icon:7,closeBtn:0},function(e){p.layerremoveAll(),layer.close(e)}),!1;if(c.length!=array_unique(c).length)return parent.layer.alert("您输入的号码有重复，请重新检查输入",{icon:7,closeBtn:0},function(e){p.layerremoveAll(),layer.close(e)}),!1;'SDQSZUX'==i.curMethod.name||'SDQEZUX'==i.curMethod.name||/SDRX(\d+)/.test(i.curMethod.name)?t.push([c.join("_")]):t.push(c)}var m={singleNum:1,isDup:0},h='<li><span class="width1" mid="'+i.curMethod.method_id+'" mname="'+i.curMethod.name+'">',y=i.curMethod.cname+'</span><span class="width2">';if(t.length<=1e3)for(var o in t){var m=f(t[o]),v=number_format(2*m.singleNum*i.curMode,3),b='</span><span class="width3">'+m.singleNum+'注</span><span class="width4">￥'+v+'</span><span class="xDel">X</span></li>';if(0==m.singleNum&&parent.layer.alert("您输入的号码有误，请重新检查输入!",{icon:7,closeBtn:0},function(e){p.layerremoveAll(),layer.close(e)}),m.isDup)return parent.layer.alert("您输入的号码有误，请重新检查输入!",{icon:7,closeBtn:0},function(e){p.layerremoveAll(),layer.close(e)}),!1;i.nextProjectCounter++,e(h+y+t[o].join(",")+b).appendTo("#projectList")}else{var _='',g='';for(var o in t)if(_&&(_+='|'),_+=t[o].join(","),(m=f(t[o])).isDup)return parent.layer.alert("您输入的号码有误，请重新检查输入!",{icon:7,closeBtn:0},function(e){p.layerremoveAll(),layer.close(e)}),!1;var v=number_format(2*t.length*i.curMode,3),b='</span><span class="width3">'+t.length+'注</span><span class="width4">￥'+v+'</span><span class="xDel">X</span></li>';i.nextProjectCounter=t.length,e(g+=h+y+_+b).appendTo("#projectList")}p.updateTotalSingle(),e("#delTA").click()}else{if(0==(m=u.computeSingle()).singleNum)return!1;i.nextProjectCounter++;v=number_format(2*m.singleNum*i.curMode,3);367==i.curMethod.method_id&&(m.code='123_234_345_456'),e('<li><span class="width1" mid="'+i.curMethod.method_id+'" mname="'+i.curMethod.name+'">'+i.curMethod.cname+'</span><span class="width2">'+m.code+'</span><span class="width3">'+m.singleNum+'注</span><span class="width4">￥'+v+'</span><span class="xDel">X</span></li>').appendTo("#projectList"),p.updateTotalSingle()}e(".betPage").addClass('DisplayBlock'),e(".locate dd").removeClass("DDcolor")},rxInputCodes:function(e,t){for(var a=['-','-','-','-','-'],n=e[0];n<=e[e.length-1];n++)a[n]=''},layerremoveAll:function(t){e(".NumberBox5").addClass("DisplayBlock").removeClass("DisplayNone"),e(".moreGame").addClass("DisplayBlock").removeClass("DisplayNone"),e(".GameBoxall").addClass("DisplayBlock").removeClass("DisplayNone"),e(".betPage").addClass('DisplayNone').removeClass("DisplayBlock"),e(".top-box").addClass("DisplayBlock").removeClass("DisplayNone"),e("#projectList").empty()},removeAll:function(){e("#token").val(""),e("#projectList").empty(),i.nextProjectCounter=0,e("#multiple").val(""),p.updateTotalSingle(),u.reset()},updateSingle:function(t){var a=number_format(2*t*i.curMode,3);e("#betCount").text(t),e("#betAmount").text(a);var n=0==e('#projectList li').length?1:e('#projectList li').length;t>0?(e("#selectCodeBtn").addClass('selectCodeBtn_selected'),e(".selectCodeBtn_selected").click(function(){console.log("1111"),e(".NumberBox5").addClass("DisplayNone").removeClass("DisplayBlock"),e(".moreGame").addClass("DisplayNone").removeClass("DisplayBlock"),e(".GameBoxall").addClass("DisplayNone").removeClass("DisplayBlock"),e(".betPage").addClass('DisplayBlock').removeClass("DisplayNone"),e(".locate dd").removeClass("DDcolor")})):(e("#selectCodeBtn").click(function(){'红蓝直选单式'==e("#playingMethod").html()?(e(".top-box").addClass("DisplayNone").removeClass("DisplayBlock"),e(".NumberBox5").addClass("DisplayNone").removeClass("DisplayBlock"),e(".moreGame").addClass("DisplayNone").removeClass("DisplayBlock"),e(".GameBoxall").addClass("DisplayNone").removeClass("DisplayBlock"),e(".betPage").addClass('DisplayBlock').removeClass("DisplayNone"),console.log("000")):(e(".NumberBox5").addClass("DisplayBlock").removeClass("DisplayNone"),e(".moreGame").addClass("DisplayBlock").removeClass("DisplayNone"),e(".GameBoxall").addClass("DisplayBlock").removeClass("DisplayNone"),e(".betPage").addClass('DisplayNone').removeClass("DisplayBlock"))}),e("#selectCodeBtn").removeClass('selectCodeBtn_selected'));var l=e("#totalBetAmount").text(),s=e('#curPrizeSpan').find("option:selected").text().split('/')[0];e("#totalWin").text(number_format(s*n*e("#multiple").val()-l,3))},updateTotalSingle:function(){var t=0;e("#projectList").children("li").each(function(a){var n=e(this).children();t+=parseInt(n.eq(2).text()),n.eq(3).text("￥"+number_format(2*parseInt(n.eq(2).text())*e("#multiple").val()*i.curMode,3))}),t>0?e("#confirmBtn").addClass('CantapCodeBtn_selected'):e("#confirmBtn").removeClass('CantapCodeBtn_selected');var a=0==e('#projectList li').length?1:e('#projectList li').length;e("#totalBetCount").text(t);var n=number_format(2*t*e("#multiple").val()*i.curMode,3);e("#totalBetAmount").text(n);var l=e('#curPrizeSpan').find("option:selected").text().split('/')[0];e("#totalWin").text(number_format(l*a*e("#multiple").val()-n,3))},checkMultiple:function(){return this.value=this.value.replace(/^0|[^\d]/g,''),!(e(this).val()>5e4)||(parent.layer.alert("请输入正确的倍数，最大为50000倍",{icon:7}),e(this).val(5e4),!0)},confirmBtn_Click:function(t){e("#projectList").empty(),p.selectCodeBtn_Click();var a={},n='';if(e("#projectList").children("li").each(function(t){e(this).children().eq(0).attr("mname");a[e(this).children().eq(0).attr("mid")]||(a[e(this).children().eq(0).attr("mid")]={}),a[e(this).children().eq(0).attr("mid")][t]=e(this).children().eq(1).text()}),e.each(a,function(t,a){n+=t+':',e.each(a,function(e,t){n+=t+'|'}),n=rtrim(n,'|'),n+='#'}),n=rtrim(n,'#'),!i.canBuy)return parent.layer.alert("该期已截止购买",{icon:7}),!1;if(0==n.length)return parent.layer.alert("请先选择号码再投注",{icon:7,closeBtn:0},function(e){p.layerremoveAll(),layer.close(e)}),!1;e("#token").val(getRandChar(32));var l=0,s=e("#totalBetAmount").text(),r=e("#totalBetCount").text(),o=e("#multiple").val();if(!/^[1-9]*[1-9][0-9]*$/.test(o))return parent.layer.alert("请重新输入金额 单注最高额度为50000",{icon:7}),e("#multiple").val(""),!1;if(0==t){var c=1==i.curMode?"2元":.5==i.curMode?"1元":.1==i.curMode?"2角":.05==i.curMode?"1角":.01==i.curMode?"分":"厘",u='<div id="buy_message">请确认以下投注内容：<br>************************<br>单倍注数：'+r+"注<br>总 金 额：￥"+s+"<br>************************<br></div>";parent.layer.confirm(u,{icon:7},function(t){if(parent.$('.xubox_botton').empty(),parent.$('.xubox_botton').html('<div class="LoadingShow"><span class="Loading_icon"></span><span class="Loading_Font">投注中，请稍后...</span></div>'),1==(l+=1)){e.post("?c=game&a=play",{op:"buy",lotteryId:i.lotteryId,issue:i.curIssueInfo.issue,curRebate:i.rebateGapList[i.curPrizeIndex].rebate,modes:i.curMode,codes:n,multiple:e("#multiple").val(),token:e("#token").val()},function(e){if(0==e.errno){h.todayBuyBtnNew_Click(),p.removeAll();var a='<div id="buy_success_message">购买成功!<br>************************<br>订单编号：'+e.pkgnum+"<br>投注期号："+i.curIssueInfo.issue+"<br>投注总额：￥"+s+"<br>模&nbsp;&nbsp;式："+c+"模式<br>倍&nbsp;&nbsp;数："+o+"倍<br>************************<br></div>";parent.layer.close(t),parent.layer.alert(a,{icon:1,closeBtn:0},function(e){p.layerremoveAll(),layer.close(e)}),parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")})}else 65534==e.errno||(parent.layer.close(t),console.log("错误代码:"+e.errno),parent.layer.alert("购买失败:"+e.errstr,{icon:2}));showBalance()},"json").fail(function(e){parent.layer.close(t),parent.layer.alert("网络异常，请在“游戏记录-订单查询”中确认该订单是否提交成功。",{icon:2})});var a=setInterval(function(){0==(l=0)&&clearInterval(a)},5e3)}},function(){e("#token").val(""),e("#projectList").empty(),i.nextProjectCounter=0,e("#totalSingleInfo input").val("1")})}else parent.$('.xubox_botton').empty(),parent.$('.xubox_botton').html('<div class="LoadingShow"><span class="Loading_icon"></span><span class="Loading_Font">投注中，请稍后...</span></div>'),e.post("?c=game&a=play",{op:"buy",lotteryId:i.lotteryId,issue:i.curIssueInfo.issue,curRebate:i.rebateGapList[i.curPrizeIndex].rebate,modes:i.curMode,codes:n,multiple:e("#multiple").val(),token:e("#token").val()},function(e){if(0==e.errno){h.todayBuyBtnNew_Click(),p.removeAll();var t=1==i.curMode?"2元":.5==i.curMode?"1元":.1==i.curMode?"2角":.05==i.curMode?"1角":.01==i.curMode?"分":"厘",a='<div id="buy_success_message">购买成功!<br>************************<br>订单编号：'+e.pkgnum+"<br>投注期号："+i.curIssueInfo.issue+"<br>投注总额：￥"+s+"<br>模&nbsp;&nbsp;式："+t+"模式<br>倍&nbsp;&nbsp;数："+o+"倍<br>************************<br></div>";parent.layer.alert(a,{icon:1}),parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")})}else 65534==e.errno||(console.log("错误代码:"+e.errno),parent.layer.alert("购买失败:"+e.errstr,{icon:2}));showBalance()},"json").fail(function(e){parent.layer.alert("网络异常，请在“游戏记录-订单查询”中确认该订单是否提交成功。",{icon:2})});parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")})},traceBtn_Click:function(){if(e("#traceBtn").attr("mark",1),0==e("#projectList li").length)return parent.layer.alert("请先选择投注号码",{icon:7}),!1;e("#traceBtn").attr('disabled',"true");var t=[];e("#projectList li").each(function(a){-1==e.inArray(e(this).find("span:first").attr("mid"),t)&&t.push(e(this).find("span:first").attr("mid"))}),e.ajax({url:"?c=game&a=play",type:"POST",data:{op:"getTracePage",lotteryId:i.lotteryId,mids:t.join(",")},cache:!1,dataType:"json",timeout:3e4,success:function(a){if(e("#traceBtn").removeAttr("disabled"),0==a.errno){i.canTraceIssues=a.issues,i.traceMethodPrize=a.prize,i.tracePrizeLimit=a.prizeLimit;var n=m.showTracePage("<div id=\"traceHtml\"><div class=\"beitouToolsBox\"><ul class=\"beitouToolsQishi\"><li class=\"beitouToolsQishiR\"><span class=\"SpanPlace\">倍数:</span><div class=\"inputNum select-area\"><input type=\"text\" id=\"style1BodyMultiple\" class=\"zhuiz_number_e2 select-value\" value=\"1\" size=\"5\"  maxlength=\"5\" /><select class=\"multipleNumValue hand\"><option>1</option><option>5</option><option>10</option><option>20</option></select></div><div  class=\"multipleNum\"><span class=\"SpanPlace\">追号期数：</span><div class=\"inputNum select-area\"><input type=\"text\" id=\"traceNum\" class=\"zhuiz_number_e2\" value=\"1\" size=\"5\"  maxlength=\"5\" /></div><select class=\"multipleNumValue hand\"><option>1</option><option>5</option><option>10</option><option>20</option></select><li class=\"beitouToolsQishiL\"><span>起始:</span><span><select id=\"startIssue\"></select></span></li><div class=\"beitouToolsfotter FloatRight\"><p><span style=\"font-weight:bold;\">中奖后停止</span><input  type=\"checkbox\" value=\"1\" name=\"stopOnWin\" checked=\"checked\" /></p></div></ul><div class=\"beitouToolsmainBox\"><div style=\"display:block;\" id=\"multipleStyle1DIV\"><ul class=\"beitouToolsmainBoxTop\" id=\"style1Head\"><li class=\"checkbox\"><input type=\"checkbox\" id=\"checkAll\" checked /></li><li>期号</li><li>倍数</li><li>当前投入</li><li>累计投入</li></ul><ul class=\"beitouToolsmainBoxCont\" id=\"style1Body\"></ul></div><div class=\"beitouToolSmainbt\" id=\"multipleStyle2DIV\" style=\"display:none;\"><p>起始倍数<input type=\"text\" value=\"1\" class=\"beitouToolsinput\" name=\"startMultiple\" id=\"startMultiple\" maxlength=\"5\" size=\"5\"/></p><ul class=\"beitouToolSmainbtzk\" id=\"beitouToolSmainbtzk\"><li><input type=\"radio\" name=\"profitStyle\"  value=\"1\" />                            全程利润率:<input type=\"text\" size=\"5\" value=\"10\" name=\"totalProfitRate\" class=\"beitouToolsinput\" class=\"beitouToolsinput\" />                            %</li><li><input type=\"radio\" name=\"profitStyle\"  value=\"2\"/>                            前<input type=\"text\" size=\"5\" value=\"5\" name=\"first5Rate\" class=\"beitouToolsinput\"/>                            期利润率<input type=\"text\" size=\"5\"  class=\"beitouToolsinput\" value=\"10\" name=\"first5RateValue\"/>                            %,之后利润率<input type=\"text\" size=\"5\" value=\"5\" class=\"beitouToolsinput\" name=\"laterRateValue\"/>                            %</li><li><input type=\"radio\" name=\"profitStyle\"  value=\"3\"/>                            全程累计利润:<input type=\"text\" size=\"5\" value=\"100\" name=\"totalProfit\" class=\"beitouToolsinput\" />                            元</li><li><input type=\"radio\" name=\"profitStyle\" value=\"4\"/>                            前<input type=\"text\" size=\"5\" value=\"5\" class=\"beitouToolsinput\" name=\"first5Profit\" />                            期累计利润<input type=\"text\" size=\"5\"  class=\"beitouToolsinput\" value=\"100\" name=\"first5ProfitValue\" />                            元,之后累计利润<input type=\"text\" size=\"5\" value=\"50\" class=\"beitouToolsinput\"  name=\"laterProfitValue\" />                            元</li></ul><span class=\"beitouTooltzjhb\"><input type=\"button\"  class=\"bt_tools_navys\" id=\"generalPlanBtn\" value=\"生成投资计划表\"/></span><ul class=\"beitouToolSmainbtContTop\" id=\"style2Head\"><li class=\"spanWidth90px\">期号</li><li class=\"spanWidth50px\">倍数</li><li class=\"spanWidth70px\">当前投入</li><li class=\"spanWidth70px\">累积投入</li><li class=\"spanWidth70px\">当期奖金</li><li class=\"spanWidth70px\">合计利润</li><li class=\"spanWidth70px\">利润率</li></ul><ul class=\"beitouToolSmainBTContZneir\" id=\"style2Body\"></ul></div></div><ul class=\"beitouToolsTop\"><li class=\"TextAlignC\"> 包含当前期最多追<span id=\"maxTraceCount\">0</span>期</li><li class=\"beitouToolsTopContent fix\"><ul><li class=\"beitouToolsTopCont1\">单倍注数<span id=\"singleNum\"></span>注,购买<span id=\"issuesNum2\"></span>期,<span class=\"FloatRight\">合计￥<span id=\"traceTotalAmount\"></span></span></li></ul><ul class=\"beitouToolsQs\"><li>期数倍数<span><input type=\"radio\" name=\"multipleStyle\" id=\"multipleStyle1\" value=\"1\" class=\"radio1\" /><label for=\"multipleStyle1\">自定义</label></span><span class=\"FloatRight\">                                当前期倒计时：<label id=\"remainTimerLabel\"></label></span></li></ul><ul><li class=\"beitouToolsButton\"><input class=\"btnOne\" id=\"confirmTraceBtn\" value=\"确认追号\"></input></li></ul></li><li class=\"beitouToolsTopR\"></li></ul></div>          "),l=[250,251,360,368,28,56,101,202,298,34,57,102,203,304,4,52,106,193,274,5,53,107,194,275,81,108,109,195,351,42,75,115,219,312,43,76,116,220,313,38,71,120,214,308,39,72,121,215,309,82,110,122,216,352,86,93,126,228,356,87,94,127,229,357,88,95,128,230,358,47,78,141,222,317,235,236,386,25,155,173,189,24,154,172,188];0!=a.prize&&1==t.length&&-1==e.inArray(parseInt(i.curMethod.method_id),l)||e("#multipleStyle2",parent.document).attr("disabled",!0),e("input[name=multipleStyle]",parent.document).click(m.multipleStyle_Click),e("#confirmTraceBtn",parent.document).click(function(){m.confirmTraceBtn_Click()&&parent.layer.close(n)}),e("#cancelTraceBtn",parent.document).click(function(){m.cancelTraceBtn_Click(),parent.layer.close(n)}),e("#startIssue",parent.document).change(m.startIssue_Change),e("#traceNum",parent.document).click(function(){this.focus(),this.select()}).keyup(p.checkMultiple).keyup(m.traceNum_Keyup),e(".multipleNumDropdown",parent.document).mousemove(function(){e(this).addClass('multipleNumDropdownSelected')}).mouseout(function(){e(this).removeClass('multipleNumDropdownSelected')}).click(function(){'none'==e(this).next('.multipleNumValue').css('display')?e(this).next('.multipleNumValue').slideDown('fast'):e(this).next('.multipleNumValue').slideUp('fast')}),e(".multipleNumValue li",parent.document).mousemove(function(){e(this).addClass('multipleNumValueSelected')}).mouseout(function(){e(this).removeClass('multipleNumValueSelected')}).click(function(){var t=e(this).parent().siblings('.zhuiz_number_e2');t.val(parseInt(e(this).text())),e.proxy(p.checkMultiple,t.get(0))(),'style1BodyMultiple'==t.attr('id')?(e('.style1BodyMultiple',parent.document).val(t.val()).each(function(){e.proxy(m.style1BodyMultiple_Keyup,e(this).get(0))()}),m.updateTotalMoney()):'traceNum'==t.attr('id')&&e.proxy(m.traceNum_Keyup,t.get(0))(),e(this).parent().slideUp('fast')}),e('#style1BodyMultiple',parent.document).click(function(){this.focus(),this.select()}).keyup(p.checkMultiple).keyup(function(){isNaN(parseInt(e(this).val()))?e('.style1BodyMultiple').val(1):(e('.style1BodyMultiple',parent.document).val(e(this).val()).each(function(){e.proxy(m.style1BodyMultiple_Keyup,e(this).get(0))()}),m.updateTotalMoney())}),e('#checkAll',parent.document).click(function(){e(this).is(':checked')?e('.checkbox input[type=checkbox]',parent.document).attr('checked',!0).parent().parent().css('color',''):e('.checkbox input[type=checkbox]',parent.document).attr('checked',!1).parent().parent().css('color','#ccc'),m.updateTotalMoney()}),e('.checkbox input[type=checkbox]',parent.document).live('click',function(){if('checkAll'!=e(this).attr('id')){e(this).is(':checked')?e(this).parent().parent().css('color',''):e(this).parent().parent().css('color','#ccc');var t=e(this).parent().parent().index();e.proxy(m.style1BodyMultiple_Keyup,e('#style1BodyMultiple_'+t,parent.document).get(0))(),m.updateTotalMoney()}}),e("#singleNum",parent.document).text(e("#totalBetCount").text()),e("#issuesNum2",parent.document).text("1"),e("#multipleStyle1",parent.document).click(),m.updateTotalMoney(),runTime.traceRemainTimer=window.setInterval(m.traceRemain_Timer_Handle,1e3)}else alert(a.errstr)},error:function(t,a,n){e("#traceBtn").removeAttr("disabled"),-1!=n.indexOf("a=logout")||-1!=n.indexOf("a=login")?(alert("您已经退出，请重新登录"),window.location.href="?a=logout"):alert("操作超时，请刷新页面.")}})},selectRandom:function(){var t,a,n=propLen(i.curMethod.field_def),l={},s=[];switch(i.curMethod.name){case'WXDW':l.WXDW=1;case'REZX':l.REZX=2;case'RSZX':l.RSZX=3;for(u=0;u<n;u++)s[u]="-";for(var r=[],o=1;o<=l[i.curMethod.name];o++){count=Math.floor(Math.random()*n+1);v=!1;for(var c in r)if(r[c]===count){v=!0;break}if(v)o--;else{r.push(count),t=parseInt(i.curMethod.field_def[o].max_selected),a=Math.floor(Math.random()*t);_=(b=i.curMethod.field_def[o].nums.split(" "))[a];s[count-1]=_}}break;case'RSIZX':l.RSIZX=4;for(var u=0;u<n;u++)s[u]="-";for(var r=[],o=1;o<=l[i.curMethod.name];o++){count=Math.floor(Math.random()*n+1);v=!1;for(var c in r)if(r[c]===count){v=!0;break}if(v)o--;else{r.push(count),t=parseInt(i.curMethod.field_def[o].max_selected),a=Math.floor(Math.random()*t);_=(b=i.curMethod.field_def[o].nums.split(" "))[a];s[count-1]=_}}break;case'EXZUX':l.EXZUX=[2];case'SXZS':l.SXZS=[2];case'SXZL':l.SXZL=[3];case'QEZUX':l.QEZUX=[2];case'QSZS':l.QSZS=[2];case'QSZL':l.QSZL=[3];case"ZSZS":l.ZSZS=[2];case"ZSZL":l.ZSZL=[3];case'ZUX24':l.ZUX24=[4];case'ZUX12':l.ZUX12=[1,2];case'ZUX6':l.ZUX6=[2];case'ZUX4':l.ZUX4=[1,1];case'ZUX120':l.ZUX120=[5];case'ZUX60':l.ZUX60=[1,3];case'ZUX30':l.ZUX30=[2,1];case'ZUX20':l.ZUX20=[1,2];case'ZUX10':l.ZUX10=[1,1];case'ZUX5':l.ZUX5=[1,1];for(var d=[],o=1;o<=n;o++){var m=[],h="";t=parseInt(i.curMethod.field_def[o].max_selected);for(var y=1;y<=l[i.curMethod.name][o-1];y++){var v=!1;a=Math.floor(Math.random()*t);for(var c in d)if(d[c]===a){v=!0;break}v?y--:(d.push(a),m.push(a),h=m.sort().join(''))}s.push(h)}break;default:for(o=1;o<=n;o++){t=parseInt(i.curMethod.field_def[o].max_selected),a=Math.floor(Math.random()*t);var b=i.curMethod.field_def[o].nums.split(" "),_=b[a];s.push(_)}}var g=f(s),x=s.join(",");if(0==g.singleNum)return!1;i.nextProjectCounter++;var I=number_format(2*g.singleNum*i.curMode,3);e('<li><span class="width1" mid="'+i.curMethod.method_id+'" mname="'+i.curMethod.name+'">'+i.curMethod.cname+'</span><span class="width2">'+x+'</span><span class="width3">'+g.singleNum+'注</span><span class="width4">￥'+I+'</span><span class="xDel">X</span></li>').appendTo("#projectList"),p.updateTotalSingle()},selectRandomBtn_Click:function(){e(this).attr('disabled','true');var t,a=e(this).attr('num');for(t=1;t<=a;t++)p.selectRandom();e(this).removeAttr('disabled'),e(".betPage").addClass('DisplayBlock')}},m={multipleStyle_Click:function(){e("#startIssue",parent.document).get(0).selectedIndex=0,e("#traceNum",parent.document).val(1),e("#style1BodyMultiple",parent.document).val(1),1==e(this).val()?(e(".style1BodyMultiple",parent.document).live("click",function(){this.focus(),this.select()}).live("keyup",p.checkMultiple).live("keyup",m.style1BodyMultiple_Keyup),m.updateStyle1(),e(".multipleNum",parent.document).eq(0).show(),e("#multipleStyle1DIV",parent.document).show(),e("#multipleStyle2DIV",parent.document).hide()):(e("#startMultiple",parent.document).click(function(){this.focus(),this.select()}),e("#beitouToolSmainbtzk input",parent.document).click(function(){e(this).parent().click()}).focus(function(){this.select()}),e("#beitouToolSmainbtzk li",parent.document).click(function(){e(this).addClass("checked").siblings().removeClass("checked"),e(this).find("input[name=profitStyle]").attr("checked",!0)}),e(".multipleNum",parent.document).eq(0).hide(),e("#generalPlanBtn",parent.document).click(m.generalPlanBtn_Click),e("#issuesNum2",parent.document).text("1"),e("#traceTotalAmount",parent.document).text(number_format(2*parseInt(e("#singleNum",parent.document).text())*i.curMode,3)),e("#style2Body",parent.document).empty(),e("#startMultiple",parent.document).val("1"),e("input[name=totalProfitRate]",parent.document).val("10"),e("input[name=first5Rate]",parent.document).val("5"),e("input[name=first5RateValue]",parent.document).val("10"),e("input[name=laterRateValue]",parent.document).val("5"),e("input[name=totalProfit]",parent.document).val("100"),e("input[name=first5Profit]",parent.document).val("5"),e("input[name=first5ProfitValue]",parent.document).val("100"),e("input[name=laterProfitValue]",parent.document).val("50"),e("#beitouToolSmainbtzk li:first",parent.document).click(),e("#multipleStyle1DIV",parent.document).hide(),e("#multipleStyle2DIV",parent.document).show())},startIssue_Change:function(){"1"==e("input[name=multipleStyle]:checked",parent.document).val()?m.updateStyle1():m.generalPlanBtn_Click()},traceNum_Keyup:function(){"1"==e("input[name=multipleStyle]:checked",parent.document).val()&&m.updateStyle1()},traceRemain_Timer_Handle:function(){var t=n(i.curRemainTime);if(i.curRemainTime>0)e("#remainTimerLabel",parent.document).text(t.hour+":"+t.minute+":"+t.second),e("#traceBtn").attr("mark",0);else{clearInterval(runTime.traceRemainTimer);var a=n(i.curWaitOpenTime);if(e("#remainTimerLabel",parent.document).text(a.hour+":"+a.minute+":"+a.second),runTime.traceWaitOpenTimer=window.setInterval(m.traceWaitOpen_Timer_Handle,100),parent.layer.alert("第"+i.curIssueInfo.issue+"期投注时间已结束，投注内容将进入到下一期！",{icon:7}),1!=e("#traceBtn").attr("mark"))if(e("#startIssue",parent.document).children(":first").remove(),e("#startIssue",parent.document).children(":first").text(e("#startIssue",parent.document).children(":first").text()+"(当前期)"),"1"==e("input[name=multipleStyle]:checked",parent.document).val()){var l=[];e(".style1BodyMultiple",parent.document).each(function(){l.push(this.value)}),m.updateStyle1(),e(".style1BodyMultiple",parent.document).each(function(){this.value=l.pop()})}else e("#style2Body li",parent.document).length>0&&m.generalPlanBtn_Click()}},traceWaitOpen_Timer_Handle:function(){var t=n(i.curWaitOpenTime);e("#remainTimerLabel",parent.document).text(t.hour+":"+t.minute+":"+t.second),i.curWaitOpenTime<0&&(clearInterval(runTime.traceWaitOpenTimer),runTime.traceRemainTimer=window.setInterval(m.traceRemain_Timer_Handle,1e3))},style1BodyMultiple_Keyup:function(){var t=parseInt(e(this).val());(isNaN(t)||t<1||t>99999)&&(t=1),/\w+_(\d+)/.test(e(this).attr("id"));var a=RegExp.$1;if(0==a)s=0;else{for(var n,l=a-1;l>=0;l--)if(e('#check_'+l,parent.document).is(':checked')){n=l;break}var s=parseFloat(e("#totalMoney_"+n,parent.document).text())}e("#style1BodyMultiple_"+a,parent.document).val(t);var r=parseInt(e("#singleNum",parent.document).text())*t*2*i.curMode;for(e("#curMoney_"+a,parent.document).text(number_format(r,3));a<=e("#style1Body li",parent.document).length;)e('#check_'+a,parent.document).is(':checked')&&(s+=parseFloat(e("#curMoney_"+a,parent.document).text()),e("#totalMoney_"+a,parent.document).text(number_format(s,3))),a++;m.updateTotalMoney()},updateStyle1:function(){var t=-1;if(e.each(i.canTraceIssues,function(a,n){n==e("#startIssue",parent.document).val()&&(t=a)}),-1!=t)if(isNaN(parseInt(e("#traceNum",parent.document).val())))e("#style1Body",parent.document).empty();else{e('#style1BodyMultiple',parent.document).val("1");var a=i.canTraceIssues.slice(t,t+parseInt(e("#traceNum",parent.document).val()));a.length<e("#traceNum",parent.document).val()&&(parent.layer.alert("最多只能追"+a.length+"期",{icon:7}),e("#traceNum",parent.document).val(a.length)),e("#style1Body",parent.document).empty();var n,l=0;e('#checkAll',parent.document).attr('checked',!0),e.each(a,function(t,a){n=2*parseInt(e("#singleNum",parent.document).text())*i.curMode,l+=n;var s='<li id="traceIssueLI_'+t+'"><span class="checkbox"><input type="checkbox" id="check_'+t+'" checked /></span><span id="traceIssue_'+t+'">'+a+'</span><span><input type="text" value="1" id="style1BodyMultiple_'+t+'" class="beitouToolsinput style1BodyMultiple" maxlength="5" /></span><span id=curMoney_'+t+">"+number_format(n,3)+"</span><span id=totalMoney_"+t+">"+number_format(l,3)+"</span></li>";e("#style1Body",parent.document).append(s),e(".style1BodyMultiple",parent.document).bind("click",function(){this.focus(),this.select()}).bind("keyup",p.checkMultiple).bind("keyup",m.style1BodyMultiple_Keyup)}),m.updateTotalMoney()}},confirmTraceBtn_Click:function(){var t,a,n,l,s,r;if(e("#projectList").children("li").each(function(i){t=e(this).children(),l=t.eq(0).attr("mid"),s=t.eq(1).text(),r=!1,n||(n=l,a=l+":",r=!0),n!=l?(a+="#"+l+":",n=l,a+=s):a+=1==r?s:"|"+s}),!i.canBuy)return parent.layer.alert("该期已截止购买",{icon:7}),!1;if(0==a.length)return parent.layer.alert("请先选择号码再投注",{icon:7}),!1;var o=[];if("1"==e("input[name=multipleStyle]:checked",parent.document).val()?e("#style1Body li",parent.document).each(function(t){if(e(this).find("input[type=checkbox]").is(':checked')){var a=e(this).find("span:eq(1)").text(),n=e(this).find("input[type=text]").val();o.push({issue:a,multiple:n})}}):e("#style2Body li",parent.document).each(function(t){var a=e(this).find("span:eq(0)").text(),n=e(this).find("span:eq(1)").text();o.push({issue:a,multiple:n})}),!o||o.length<=0)return parent.layer.alert("追号的期数不能为空",{icon:7}),!1;e("#token").val(getRandChar(32));var c=1==i.curMode?"2元":.5==i.curMode?"1元":.1==i.curMode?"2角":.05==i.curMode?"1角":.01==i.curMode?"分":"厘",u=e("#traceTotalAmount",parent.document).text(),d=e("input[name=stopOnWin]",parent.document).attr("checked")?1:0,f='<div id="buy_message">请确认以下投注内容：<br>************************<br>是否追号：是<br>单倍注数：'+e("#totalBetCount").text()+"注<br>总 金 额：￥"+u+"<br>超始期号："+o[0].issue+"<br>追号期数："+o.length+"<br>模&nbsp;&nbsp;式："+c+"模式<br>************************<br></div>";return m.destroyTracePage(),parent.layer.confirm(f,{icon:7},function(t){e.post("?c=game&a=play",{op:"buy",lotteryId:i.lotteryId,issue:i.curIssueInfo.issue,curRebate:i.rebateGapList[i.curPrizeIndex].rebate,modes:i.curMode,codes:a,traceData:o,stopOnWin:d,token:e("#token").val()},function(e){if(0==e.errno){p.removeAll(),h.todayBuyBtnNew_Click();var a='<div id="buy_success_message">追号订单成功!<br>************************<br>订单编号：'+e.pkgnum+"<br>起始期号："+o[0].issue+"<br>追号期数："+o.length+"<br>追号总额：￥"+u+"<br>模&nbsp;&nbsp;式："+c+"模式<br>************************<br></div>";parent.layer.close(t),parent.layer.alert(a,{icon:1}),parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")})}else parent.layer.close(t),parent.layer.alert("追号失败:"+e.errstr+e.errno,{icon:2})},"json").fail(function(e){parent.layer.close(t),layer.alert("网络异常，请在“游戏记录-追号记录”中确认该订单是否提交成功。",{icon:2})}),parent.$('.xubox_botton').empty(),parent.$('.xubox_botton').html('<div class="LoadingShow"><span class="Loading_icon"></span><span class="Loading_Font">投注中，请稍后...</span></div>')}),parent.$('.xubox_yes').focus(),parent.$('.xubox_yes').one('keyup',function(e){var t=e.keyCode?e.keyCode:e.which;32==t&&parent.$('.xubox_yes').trigger("click"),27==t&&parent.$('.xubox_no').trigger("click")}),!0},cancelTraceBtn_Click:function(){m.destroyTracePage()},showTracePage:function(t){var a=parent.layer.open({type:1,title:'追号管理',offset:['0','0'],area:['auto','28.44rem'],content:t,success:function(t){var a='';e.each(i.canTraceIssues,function(e,t){a+='<option value="'+t+'">'+t+'期</option>'}),e("#startIssue",parent.document).html(a).children(":first").text(e("#startIssue",parent.document).children(":first").text()+"(当前期)"),e('#maxTraceCount',parent.document).html(i.canTraceIssues.length)},close:m.cancelTraceBtn_Click});return e(document,parent.document).one('keyup',function(e){27==(e.keyCode?e.keyCode:e.which)&&(m.cancelTraceBtn_Click(),parent.layer.close(a))}),a},destroyTracePage:function(){clearInterval(runTime.traceRemainTimer),clearInterval(runTime.traceWaitOpenTimer)},updateTotalMoney:function(){var t=0;"1"==e("input[name=multipleStyle]:checked",parent.document).val()?(e("#style1Body li",parent.document).each(function(a){e(this).find("input[type=checkbox]").is(':checked')&&(t+=parseInt(e(this).find("input[type=text]").val()))}),e("#issuesNum2",parent.document).text(e("#style1Body li input[type=checkbox]:checked",parent.document).length)):(e("#style2Body li",parent.document).each(function(a){t+=parseInt(e(this).find("span:eq(1)").text())}),e("#issuesNum2",parent.document).text(e("#style2Body li",parent.document).length)),e("#traceTotalAmount",parent.document).text(number_format(parseInt(e("#singleNum",parent.document).text())*t*2*i.curMode,3))},generalPlanBtn_Click:function(){var t=function(e,t,a,n,l){if(e=isNaN(parseInt(e))?-1:parseInt(e),t=isNaN(parseInt(t))?-1:parseInt(t),a=isNaN(parseFloat(a))?-1:parseFloat(a),n=isNaN(parseFloat(n))?-1:parseFloat(n),l=parseFloat(l),e<0||t<0||a<0||n<0||l<=0)return 0;var i=0;return a>0&&(t>0?(i=(t/100+1)*n/(l-a*(t/100+1)),i=Math.ceil(round(i,3))):i=1,i>0&&i<e&&(i=e)),i},a=-1;if(e.each(i.canTraceIssues,function(t,n){n==e("#startIssue",parent.document).val()&&(a=t)}),-1==a)throw alert("数据出错"),"数据出错";isNaN(parseInt(e("#traceNum",parent.document).val()))&&e("#traceNum",parent.document).val("1");var n=i.canTraceIssues.slice(a,a+parseInt(e("#traceNum",parent.document).val()));n.length<e("#traceNum",parent.document).val()&&(parent.layer.alert("最多只能追"+n.length+"期",{icon:7}),e("#traceNum",parent.document).val(n.length)),e("#style2Body",parent.document).empty();var l,s,r=[],o=0,c=2*parseInt(e("#singleNum",parent.document).text())*i.curMode,u=i.traceMethodPrize*(i.rebateGapList[i.curPrizeIndex].prize/(i.maxCombPrize*i.prizeRate))*i.curMode;e.each(n,function(a,n){if(1==e("input[name=profitStyle]:checked",parent.document).val())if(0==a){if(l=parseInt(e("#startMultiple",parent.document).val()),s=l*parseInt(e("#singleNum",parent.document).text())*2*i.curMode,(l*u-s)/s*100<e("input[name=totalProfitRate]",parent.document).val())return parent.layer.alert("该计划无法实现，请调整目标",{icon:7}),!1}else l=t(e("#startMultiple",parent.document).val(),e("input[name=totalProfitRate]",parent.document).val(),c,o,u);else if(2==e("input[name=profitStyle]:checked",parent.document).val())if(0==a){if(l=parseInt(e("#startMultiple",parent.document).val()),s=l*parseInt(e("#singleNum",parent.document).text())*2*i.curMode,(l*u-s)/s*100<e("input[name=first5RateValue]",parent.document).val())return parent.layer.alert("该计划无法实现，请调整目标",{icon:7}),!1}else l=a<e("input[name=first5Rate]",parent.document).val()?t(e("#startMultiple",parent.document).val(),e("input[name=first5RateValue]",parent.document).val(),c,o,u):t(e("#startMultiple",parent.document).val(),e("input[name=laterRateValue]",parent.document).val(),c,o,u);else 3==e("input[name=profitStyle]:checked",parent.document).val()?(l=Math.ceil(round((parseInt(e("input[name=totalProfit]",parent.document).val())+o)/(u-2*parseInt(e("#singleNum",parent.document).text())*i.curMode),3)))<e("#startMultiple",parent.document).val()&&(l=e("#startMultiple",parent.document).val()):4==e("input[name=profitStyle]:checked",parent.document).val()&&(l=a<e("input[name=first5Profit]",parent.document).val()?Math.ceil(round((parseInt(e("input[name=first5ProfitValue]",parent.document).val())+o)/(u-2*parseInt(e("#singleNum",parent.document).text())*i.curMode),3)):Math.ceil(round((parseInt(e("input[name=laterProfitValue]",parent.document).val())+o)/(u-2*parseInt(e("#singleNum",parent.document).text())*i.curMode),3)));return 0==l?(parent.layer.alert("您输入的参数有误，必须为正整数",{icon:7}),!1):l<0?(parent.layer.alert("该计划不可能实现，请调整目标",{icon:7}),!1):l*u>i.tracePrizeLimit?(parent.layer.alert("该计划超出无法实现，请调整目标",{icon:7}),!1):(s=l*parseInt(e("#singleNum",parent.document).text())*2*i.curMode,o+=s,void r.push({issue:n,multiple:l,curMoney:number_format(s,2),totalMoney:number_format(o,2),curPrize:number_format(l*u,2),totalProfit:number_format(l*u-o,2),totalProfitRate:round((l*u-o)/o,2)}))}),m._showPlan(r)},_showPlan:function(t){e.each(t,function(t,a){var n='<li><span class="spanWidth90px">'+a.issue+'</span><span class="spanWidth50px">'+a.multiple+'</span><span class="spanWidth70px">'+a.curMoney+'</span><span class="spanWidth70px">'+a.totalMoney+'</span><span class="spanWidth70px">'+a.curPrize+'</span><span class="spanWidth70px">'+a.totalProfit+'</span><span class="spanWidth70px">'+Math.round(100*a.totalProfitRate)+"%</span></li>";e("#style2Body",parent.document).append(n)}),m.updateTotalMoney()}},h={init:function(){if(runTime.remainTimer=window.setInterval(h.showCurIssue_Timer,1e3),""==i.lastIssueInfo.code)i.getLastOpenTime=0,clearInterval(runTime.getLastOpenTimer),runTime.getLastOpenTimer=window.setInterval(h.getLastOpen_Timer,1e3),e("#thisIssueInfo").addClass("lock"),i.canBuy=!1,e("#thisIssueSpan").text(i.lastIssueInfo.issue);else{var t=i.todayDrawList[0];if(i.lastIssueInfo.issue!=t.issue){var a=i.lastIssueInfo,n=h.getMoreInfo(a.code);if(a.prop=n,i.todayDrawList.unshift(a),e.post("?c=game&a=play",{op:"getBuyRecords",lotteryId:i.lotteryId,issue:i.lastIssueInfo.issue},function(e){if(0==e.errno&&0!=e.prj.length){var t=e.prj[0];"已中奖"==t.prizeStatus&&parent.layer.open({title:"中奖通知",offset:'172px',content:'恭喜您中得<span style="color:red">'+i.lotteryName+'</span>第<span style="color:red">'+t.issue+'</span>期<span style="color:red">￥'+t.prize+'</span>'})}},"json"),e("#todayDrawBtn").hasClass("cur")){var l=i.todayDrawList[0],s='<ul class="fix"><li class="width:30%">'+l.issue+'</li><li class="width:70%">'+l.code+"</li>";e("#todayIssuesBody").prepend(s)}}}var r,o;null!=i.todayDrawList[0].code&&(r=i.todayDrawList[0].code.split(" "),o=r.length),e('#thisIssueNumUL').empty(),null!=r&&e.each(r,function(t,a){t<o-1?e('#thisIssueNumUL').append('<span class="pendingBall"></span>'):e('#thisIssueNumUL').append('<span class="lan pendingBall"></span>')}),h.showLastDraw(),i.canBuy=!0},getCurIssue:function(t){e.ajax({url:"?c=game&a=play",type:"POST",data:{op:"getCurIssue",lotteryId:i.lotteryId},cache:!1,dataType:"json",timeout:3e4,success:function(l){if(0==l.errno)if(0!=l.kTime){e('#confirmBtn').attr("disabled","disabled"),e('#confirmBtn').css("background","#ccc"),e('#clearProjectBtn').attr("disabled","disabled"),e('#clearProjectBtn').css("background","#ccc");var s=l.kTime/1e3;e('.GameName').text(''),e('#thisIssueNumUL').html("<div style='font-size: 27px;text-align:center;float: left;margin-left: 77px;margin-top:12px;'>休市中...</div>"),e('.issue').text('距离下次开市:'),window.setInterval(function(){var t=n(--s);e("#thisIssueRemainTime").html("<span>"+t.hour+"</span><em>:</em><span>"+t.minute+"</span><em>:</em><span>"+t.second+"</span>")},1e3),window.setTimeout(function(){clearInterval(runTime.waitOpenTimer),window.location.reload()},l.kTime)}else i.curIssueInfo=l.issueInfo,i.curServerTime=l.serverTime,i.curRemainTime=getTS(i.curIssueInfo.end_time)-getTS(i.curServerTime),i.curWaitOpenTime=8,i.lastIssueInfo=l.lastIssueInfo,l.lastIssueInfo&&i.counters>0&&a(l.lastIssueInfo),i.counters++,"function"==typeof t&&t();else alert("系统繁忙，请稍候再试(02)")},error:function(e,t,a){-1!=a.indexOf("a=logout")||-1!=a.indexOf("a=login")?(top.layer.alert("您已经超时退出，请重新登录",{icon:7}),window.location.href="?a=logout"):top.layer.alert("操作超时，请刷新页面..",{icon:7})}})},showCurIssue_Timer:function(){e("#thisIssueSpan").text(i.curIssueInfo.issue),e("#thisIssueSpan2").text(i.curIssueInfo.issue);var t=n(--i.curRemainTime);if(i.curRemainTime>=0)e("#thisIssueRemainTime").html("<span>"+t.day+"</span><em>:</em><span>"+t.hour+"</span><em>:</em><span>"+t.minute+"</span><em>:</em><span>"+t.second+"</span>"),e("#thisIssueTimerIcon").removeClass("lock").addClass('clock').text("可以投注");else{clearInterval(runTime.remainTimer),e('#thisIssueTimerIcon').removeClass('clock').addClass('lock').text("已截止投注");var a=n(i.curWaitOpenTime);layer.alert(i.lastIssueInfo.issue+'期销售已截止，请进入下一期购买',{icon:7}),e('#thisIssueRemainTime').html("<span>"+a.day+"</span><em>:</em><span>"+a.hour+"</span><em>:</em><span>"+a.minute+"</span><em>:</em><span>"+a.second+"</span>"),i.canBuy=!1,runTime.waitOpenTimer=window.setInterval(h.waitOpen_Timer,1e3)}},waitOpen_Timer:function(){--i.curWaitOpenTime;var t=n(i.curWaitOpenTime);e("#thisIssueRemainTime").html("<span>"+t.hour+"</span><em>:</em><span>"+t.minute+"</span><em>:</em><span>"+t.second+"</span>"),i.curWaitOpenTime<0&&(clearInterval(runTime.waitOpenTimer),h.getCurIssue(h.init))},getLastOpen_Timer:function(){i.getLastOpenTime++,i.getLastOpenTime%10==0&&e.ajax({url:"?c=game&a=play",type:"POST",data:{op:"getLastIssueCode",lotteryId:i.lotteryId,issue:i.lastIssueInfo.issue},cache:!1,dataType:"json",timeout:3e4,success:function(t){if(0==t.errno){if(0!=t.kTime)clearInterval(runTime.waitOpenTimer),window.location.reload();else if(void 0!==t.issueInfo.code){clearInterval(runTime.getLastOpenTimer),i.getLastOpenTime=0,i.lastIssueInfo=t.issueInfo,a(t.issueInfo);var n=h.getMoreInfo(t.issueInfo.code);if(t.issueInfo.prop=n,i.todayDrawList.unshift(t.issueInfo),e("#todayDrawBtn").hasClass("cur")){var l=i.todayDrawList[0],s='<ul><li class="width247px">'+l.issue+'</li><li class="width247px">'+l.code+"</li>";e("#todayIssuesBody").prepend(s)}h.showLastDraw()}}else alert("系统繁忙，请稍候再试(03)")},error:function(e,t,a){-1!=a.indexOf("a=logout")||-1!=a.indexOf("a=login")?(top.layer.alert("您已经超时退出，请重新登录",{icon:7}),window.location.href="?a=logout"):top.layer.alert("操作超时，请刷新页面...",{icon:7})}})},showLastDraw:function(){var t=i.todayDrawList[0];e("#lastIssueSpan").text(i.lastIssueInfo.issue);var a;if(i.lastIssueInfo.issue==t.issue){var n=t.code.split(" ");a="<ul><li>第一位：<span>"+n[0]+"</span></li><li>第二位：<span>"+n[0]+","+n[1]+"</span></li></ul><ul><li>第三位：<span>"+n[0]+","+n[1]+","+n[2]+"</span></li></ul>";var l=0,s=0;if(e("#todayIssuesBody").find("li:first").text()!=i.curIssueInfo.issue&&h.todayBuyBtnNew_Click(),18==i.lotteryId){var r=t.original_code.split(' '),o=0,c='',u=1;e("#original_code").html("<div class='numb_main'><dl class='numb_1'><dt>万位：</dt><dd></dd><dd>=<span></span></dd></dl><dl class='numb_2'><dt>千位：</dt><dd></dd><dd>=<span></span></dd></dl><dl class='numb_3'><dt>百位：</dt><dd></dd><dd>=<span></span></dd></dl><dl class='numb_4'><dt>十位：</dt><dd></dd><dd>=<span></span></dd></dl><dl class='numb_5'><dt>个位：</dt><dd></dd><dd>=<span></span></dd></dl></div>"),e(r).each(function(t){if(c+=t%4==3?r[t]:r[t]+"+",o+=parseInt(r[t]),t%4==3){var a=o.toString().split(""),n='';e(a).each(function(e){e==a.length-1?n+="<b>"+a[e]+"</b>":n+=a[e]}),e(".numb_"+u+" dd:first").html(c),e(".numb_"+u+" dd:last span").html(n),u++,c='',o=0}})}var d=function(){if(e("#thisIssueNumUL").children(".pendingBall").length>0){t=e("#thisIssueNumUL").children(".pendingBall").first();window.setTimeout(function(){t.removeClass("pendingBall sd115Ball").text(n[l++]),t.addClass("sd115_Ball bl"+n[s++]),d()},500)}else if(e("#thisIssueNumUL").children(".k3").length>0){var t=e("#thisIssueNumUL").children(".k3").first();window.setTimeout(function(){t.removeClass().addClass("pendingNum_k3_"+n[l++]),d()},1e3)}};window.setTimeout(d,100)}else e("#thisIssueNumUL").children().addClass("pendingBall").removeClass("sd115_Ball"),e('#original_code').empty(),a="<ul><li>第一位：<span></span></li><li>第二位：<span></span></li><li>第三位：<span></span></li></ul>";e("#thisIssueMoreInfo").html(a)},todayDrawBtn_Click:function(){e("#todayIssuesHead").html('<li>期号</li><li>开奖号</li>'),e("#todayIssuesBody").empty(),e.each(i.todayDrawList,function(t,a){for(var n="",l=0;l<a.code.length;l++)"<b>"+a.code[l]+"</b>",n+=a.code[l];var i=n.split(" ").join("</b><b>"),s="<ul class=\"fix1\"><li style=\"width:30%\">第"+a.issue+"期</li><li style=\"width:70%\"><b>"+i+"</b></li></ul>";e("#todayIssuesBody").append(s)})},prizeRankBtn_Click:function(){e("#todayBuyBody").empty().hide(),e.post("?c=game&a=play",{op:"getPrizeRank",lotteryId:i.lotteryId},function(t){0==t.errno?0==t.data.length?e('<div class="todayNoBet">暂时没有记录！</div>').appendTo("#prizeScrollContent"):(e("#prizeScrollContent").empty(),e.each(t.data,function(t,a){e('<ul><li><span>'+a.nick_name+"</span> 喜中 <em>"+number_format(a.total_prize,2)+"</em>元</li></ul>").appendTo(e("#prizeScrollContent"))}),e("#prizeScrollContent").html(e("#prizeScrollContent").html()+e("#prizeScrollContent").html()).show(),0==runTime.scollTopIntervalTimer&&(runTime.scollTopIntervalTimer=window.setInterval(h.scrollPrizeRank,100),e("#prizeScrollContent").mouseover(function(){clearInterval(runTime.scollTopIntervalTimer)}).mouseout(function(){runTime.scollTopIntervalTimer=window.setInterval(h.scrollPrizeRank,100)}))):alert("暂时没有排行数据！")},"json")},todayBuyBtnNew_Click:function(){e("#todayIssuesBody").find("li:first").text()!=i.curIssueInfo.issue&&e.post("?c=game&a=play",{op:"getBuyRecords",lotteryId:i.lotteryId},function(t){0==t.errno?(e("#todayBuyBody").empty(),e('<ul><li class="C1">玩法</li><li class="C2">期号</li><li class="C4">金额</li><li class="C5">状态</li></ul><div class="clear"></div>').appendTo("#todayBuyBody"),0==t.prj.length?e('<div class="todayNoBet">暂时没有记录！</div>').appendTo("#todayBuyBody"):e.each(t.prj,function(t,a){e('<ul class="fix"><li class="C1"><a href="javascript:void(0);" onclick="showPackageDetail(\''+a.wrapId+'\');return false;">'+a.methodName+'</a></li><li class="C2">'+s.getNumByIssue(a.issue)+'</li><li class="C4">'+a.amount+'</li><li class="C5">'+a.prizeStatus+"</li></ul>").click(function(){}).appendTo("#todayBuyBody")})):alert("系统繁忙，请稍候再试(04)")},"json")},scrollPrizeRank:function(){var t=e("#prizeScrollContent")[0];t.scrollTop+=1,t.scrollTop>=e("#prizeScrollContent")[0].scrollHeight/2&&(t.scrollTop=0)},getMoreInfo:function(e){var t={};if(1==i.lotteryType||4==i.lotteryType){var a=e.split("");t.qshz=parseInt(a[0])+parseInt(a[1])+parseInt(a[2]),t.qszt=h.zutai(a[0],a[1],a[2]),t.hshz=parseInt(a[2])+parseInt(a[3])+parseInt(a[4]),t.hszt=h.zutai(a[2],a[3],a[4]),t.hehz=parseInt(a[3])+parseInt(a[4]),t.dxds=h.dxds(a[3],a[4])}return t},zutai:function(e,t,a){return e==t&&e==a&&t==a?"豹子":e==t||e==a||t==a?"组三":"组六"},dxds:function(e,t){var a=[],n=[];return a.push(e>=5?"大":"小"),a.push(e%2==1?"单":"双"),n.push(t>=5?"大":"小"),n.push(t%2==1?"单":"双"),[a[0]+n[0],a[0]+n[1],a[1]+n[0],a[1]+n[1]].join(",")}};if(!function(){var a=0;return void 0==t.lotteryId||!is_numeric(t.lotteryId)||t.lotteryId<=0?a=-1:void 0==t.lotteryName||''==t.lotteryName?a=-2:void 0!=t.lotteryType&&is_numeric(t.lotteryType)&&-1!=e.inArray(t.lotteryType,[3])?void 0!=t.methods&&e.isArray(t.methods)&&0!=t.methods.length?void 0!=t.openedIssues&&e.isArray(t.openedIssues)&&0!=t.openedIssues.length?void 0!=t.minRebateGaps&&e.isArray(t.minRebateGaps)&&0!=t.minRebateGaps.length?void 0==t.rebate||!is_numeric(t.rebate)||t.rebate<0||t.rebate>.15?a=-7:void 0!=t.defaultMode&&is_numeric(t.defaultMode)&&-1!=!e.inArray(t.defaultMode,[1,.5,.1,.05,.01,.001])?void 0==t.defaultRebate||!is_numeric(t.defaultRebate)||t.defaultRebate<0||t.defaultRebate>t.rebate?a=-9:(void 0==t.maxCombPrize||!is_numeric(t.maxCombPrize)||t.maxCombPrize<=0)&&(a=-10):a=-8:a=-6:a=-5:a=-4:a=-3,a<0&&console.info('参数错误：flag='+a),0==a}())return parent.layer.alert("数据初始化失败",{icon:2}),!1;i.rebateGapList=o.generateGapList(),0==i.rebateGapList.length&&i.halt("initPrizeBar failed"),i.curPrizeIndex=i.rebateGapList.length-1,o.showPirze(),e('#curPrizeSpan').change(o.changePrize),function(){var t=.5,a=parseFloat(getCookie("mod_"+i.lotteryId));e.each([.5],function(e,n){n==a&&(t=n)}),i.curMode=t}(),e.each(i.methods,function(t,a){1==a.childs.length?e('<li class="methodGroupLI" id="methodGroup_'+t+'"><label>'+a.mg_name+"</label></li>").click(c.methodGroup_Click).appendTo("#methodGroupContainer"):e('<li class="methodGroupLI" id="methodGroup_'+t+'"><label>'+a.mg_name+"</label></li>").click(c.methodGroup_Click).hover(c.methodGroup_hoverOver,c.methodGroup_hoverOut).appendTo("#methodGroupContainer");var n='',l='',i='',s='',r='',o='',u='',d='',m='',h='',f='';6==a.mg_id||50==a.mg_id||57==a.mg_id||169==a.mg_id?(h='<dl class="fix"><dt>任选复式：</dt>',f='<dl class="fix"><dt>任选单式：</dt>'):(n='<dl class="fix"><dt>直选：</dt>',l='<dl class="fix"><dt>组选：</dt>',i='<dl class="fix"><dt>趣味：</dt>',s='<dl class="fix"><dt>特殊：</dt>',r='<dl class="fix"><dt>定位：</dt>',o='<dl class="fix"><dt>不定位：</dt>',u='<dl class="fix"><dt>任选二：</dt>',d='<dl class="fix"><dt>任选三：</dt>',m='<dl class="fix"><dt>任选四：</dt>',h='<dl class="fix"><dt>其他：</dt>');var y=e('<div id="method_'+t+'"></div>').addClass('methodPopStyle').hide();e.each(a.childs,function(e,a){var c='<dd class="method" name="'+a.name+'" id="method_'+t+"_"+e+'">'+a.cname+'</dd>';1==a.method_property?n+=c:2==a.method_property?l+=c:3==a.method_property?i+=c:4==a.method_property?s+=c:5==a.method_property?r+=c:6==a.method_property?o+=c:7==a.method_property?u+=c:8==a.method_property?d+=c:9==a.method_property?m+=c:0==a.method_property&&(h+=c)}),l+='</dl>',i+='</dl>',s+='</dl>',r+='</dl>',o+='</dl>',u+='</dl>',d+='</dl>',m+='</dl>',h+='</dl>',f+='</dl>',(n+='</dl>').indexOf('</dd>')<0&&(n=''),l.indexOf('</dd>')<0&&(l=''),i.indexOf('</dd>')<0&&(i=''),s.indexOf('</dd>')<0&&(s=''),r.indexOf('</dd>')<0&&(r=''),o.indexOf('</dd>')<0&&(o=''),u.indexOf('</dd>')<0&&(u=''),d.indexOf('</dd>')<0&&(d=''),m.indexOf('</dd>')<0&&(m=''),h.indexOf('</dd>')<0&&(h=''),f.indexOf('</dd>')<0&&(f=''),e(n+l+i+s+r+o+u+d+m+h+f).appendTo(y),e.each(a.childs,function(a,n){e('#method_'+t+"_"+a).live("click",n,c.method_Click).hover(c.method_hoverOver,c.methodGroup_hoverOut),e("#method_"+t+"_"+a+"son").live("click",n,p.inputBtn_Click).hover(c.method_hoverOver,c.methodGroup_hoverOut)}),e("#methodGroup_"+t).append(y)}),e(".subTopBar").mouseleave(function(){e(this).find("li").removeClass("methodGroup_hover"),e(this).find("ul li .methodPopStyle").hide()}),c.selectDefault(),e("input[name=missHotBtn]").click(d.missHotBtn_Click),e('input[name=missHotBtn][value="1"]').click(),i.nextProjectCounter=0,p.removeAll(),e("#multiple").click(function(){this.focus(),this.select()}).blur(function(){''!=this.value&&0!=this.value||(this.value=1,p.updateTotalSingle())}).keyup(p.checkMultiple).keyup(p.updateTotalSingle),e(".inputNumJian").click(function(){var t=e("#multiple").val();1==t?e("#multiple").val(parseInt(1)):e("#multiple").val(parseInt(t)-1),p.updateTotalSingle()}),e(".inputNumJia").click(function(){var t=e("#multiple").val();t>5e3?e("#multiple").val(parseInt(5e3)):e("#multiple").val(parseInt(t)+1),p.updateTotalSingle()}),e(".xDel").live("click",function(){e(this).parent().remove(),p.updateTotalSingle()}),e("#clearProjectBtn").click(p.removeAll),e("#inputBtn").click(p.inputBtn_Click),e("#selectCodeBtn").click(p.selectCodeBtn_Click),e("#selectCodeBtnFast").click(p.selectCodeBtnFast),e("#confirmBtn").click(function(){p.confirmBtn_Click(0)}),e("#traceBtn").click(p.traceBtn_Click),e(".selectRandomBtn").click(p.selectRandomBtn_Click),e("#curLotteryName").text(i.lotteryName),e("header p").text(i.lotteryName),e("#todayIssuesHead").html('<li class="width:30%">期号</li><li class="width:70%">开奖号</li>'),e("#todayDrawBtn").find(h.todayDrawBtn_Click),e("#prizeRankBtn").click(h.prizeRankBtn_Click),h.todayBuyBtnNew_Click(),e.each(i.openedIssues,function(e,t){t.prop=h.getMoreInfo(t.code),i.todayDrawList.push(t)}),e("#prizeRankBtn").click(),h.getCurIssue(h.init),e('#thisIssueNumUL').live({mouseenter:function(){''!=e('#original_code').html()&&e('#original_code').fadeIn(200)},mouseleave:function(){e('#original_code').hide().stop()}});var f=function(e){if(0==l(e).charsNum)return{singleNum:0,isDup:0};var t,a=0,n=0;switch(i.curMethod.name){case'EZE':(t=e[0].split('_')).length>=2&&(a=t.length*(t.length-1)/2),n=a>1?1:0;break;case'SLX':case'SZS':case'SZE':(t=e[0].split('_')).length>=3&&(a=t.length*(t.length-1)*(t.length-2)/6),n=a>1?1:0;break;case'SILX':(t=e[0].split('_')).length>=4&&(a=t.length*(t.length-1)*(t.length-2)*(t.length-3)/24),n=a>1?1:0;break;case'HLZX':part1=e[0].split('_'),part2=e[1].split('_'),part1.length>=5&&''!=e[1]&&part2.length>=1&&(n=(a=part1.length*(part1.length-1)*(part1.length-2)*(part1.length-3)*(part1.length-4)/120*part2.length)>1?1:0);break;default:throw"unknown method2 "+i.curMethod.name}return{singleNum:a,isDup:n}}}}(jQuery);